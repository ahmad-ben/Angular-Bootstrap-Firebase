"use strict";(self.webpackChunkLearnFireBase=self.webpackChunkLearnFireBase||[]).push([[179],{2011:(pt,Ce,P)=>{P.d(Ce,{Dh:()=>le,GT:()=>ae,cc:()=>Te,hO:()=>$e,on:()=>z,pX:()=>ie,xv:()=>fe});var h=P(4650),j=P(9260),O=P(2122);pt=P.hmd(pt);const te=["ngOnDestroy"],ie=(Se,Ie,Pe,Ae={})=>new Proxy(Se,{get:(xe,be)=>Pe.runOutsideAngular(()=>{var je;if(Se[be])return!(null===(je=Ae?.spy)||void 0===je)&&je.get&&Ae.spy.get(be,Se[be]),Se[be];if(te.indexOf(be)>-1)return()=>{};const Y=Ie.toPromise().then(se=>{const ve=se&&se[be];return"function"==typeof ve?ve.bind(se):ve&&ve.then?ve.then(We=>Pe.run(()=>We)):Pe.run(()=>ve)});return new Proxy(()=>{},{get:(se,ve)=>Y[ve],apply:(se,ve,We)=>Y.then(Ge=>{var Mt;const Xe=Ge&&Ge(...We);return!(null===(Mt=Ae?.spy)||void 0===Mt)&&Mt.apply&&Ae.spy.apply(be,We,Xe),Xe})})})}),ae=(Se,Ie)=>{Ie.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(Ae=>{Object.defineProperty(Se.prototype,Ae,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,Ae))})})};class ge{constructor(Ie){return Ie}}const le=new h.OlP("angularfire2.app.options"),fe=new h.OlP("angularfire2.app.name");function z(Se,Ie,Pe){const xe="object"==typeof Pe&&Pe||{};xe.name=xe.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const je=j.Z.apps.filter(Y=>Y&&Y.name===xe.name)[0]||Ie.runOutsideAngular(()=>j.Z.initializeApp(Se,xe));try{JSON.stringify(Se)!==JSON.stringify(je.options)&&G("error",`${je.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(je)}const G=(Se,...Ie)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Se](...Ie)},Z={provide:ge,useFactory:z,deps:[le,h.R0b,[new h.FiY,fe]]};let $e=(()=>{class Se{constructor(Pe){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",h.q4F.full,Pe.toString())}static initializeApp(Pe,Ae){return{ngModule:Se,providers:[{provide:le,useValue:Pe},{provide:fe,useValue:Ae}]}}}return Se.\u0275fac=function(Pe){return new(Pe||Se)(h.LFG(h.Lbi))},Se.\u0275mod=h.oAB({type:Se}),Se.\u0275inj=h.cJS({providers:[Z]}),Se})();function Te(Se,Ie,Pe,Ae,xe){const[,be,je]=globalThis.\u0275AngularfireInstanceCache.find(Y=>Y[0]===Se)||[];if(be)return function ze(Se,Ie){try{return Se.toString()===Ie.toString()}catch{return Se===Ie}}(xe,je)||(pe("error",`${Ie} was already initialized on the ${Pe} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:xe,was:je})),be;{const Y=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Se,Y,xe]),Y}}const ot=!!pt.hot,pe=(Se,...Ie)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Se](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,Ce,P)=>{P.d(Ce,{q4:()=>vp,iC:()=>sa,fc:()=>bc,HU:()=>Dc,vb:()=>xr,JM:()=>Ic,u3:()=>sh});var h=P(4650),j=P(259),O=P(5861),te=P(9681),ie=P(2090),ae=P(4859),ge=P(1877),le=P(8766);const fe="@firebase/installations",z="0.6.3",Z=`w:${z}`,$e="FIS_v2",Ie=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function Ae({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function xe(b){return{token:b.token,requestStatus:2,expiresIn:Ge(b.expiresIn),creationTime:Date.now()}}function be(b,C){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(b,C){const V=(yield C.json()).error;return Ie.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function Y({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function se(b,{refreshToken:C}){const x=Y(b);return x.append("Authorization",function Mt(b){return`${$e} ${b}`}(C)),x}function ve(b){return We.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function Ge(b){return Number(b.replace("s","000"))}function Xe(b,C){return oe.apply(this,arguments)}function oe(){return(oe=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const V=Ae(b),K=Y(b),X=C.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Ye={method:"POST",headers:K,body:JSON.stringify({fid:x,authVersion:$e,appId:b.appId,sdkVersion:Z})},ct=yield ve(()=>fetch(V,Ye));if(ct.ok){const mt=yield ct.json();return{fid:mt.fid||x,registrationStatus:2,refreshToken:mt.refreshToken,authToken:xe(mt.authToken)}}throw yield be("Create Installation",ct)})).apply(this,arguments)}function de(b){return new Promise(C=>{setTimeout(C,b)})}const Re=/^[cdef][\w-]{21}$/;function Be(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function tt(b){return function we(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Re.test(x)?x:""}catch{return""}}function Ze(b){return`${b.appName}!${b.appId}`}const cn=new Map;function bt(b,C){const x=Ze(b);rn(x,C),function _n(b,C){const x=function sn(){return!mn&&"BroadcastChannel"in self&&(mn=new BroadcastChannel("[Firebase] FID Change"),mn.onmessage=b=>{rn(b.data.key,b.data.fid)}),mn}();x&&x.postMessage({key:b,fid:C}),function Wn(){0===cn.size&&mn&&(mn.close(),mn=null)}()}(x,C)}function rn(b,C){const x=cn.get(b);if(x)for(const V of x)V(C)}let mn=null;const Un="firebase-installations-store";let Kr=null;function _i(){return Kr||(Kr=(0,le.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(Un)}})),Kr}function pn(b,C){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(b,C){const x=Ze(b),K=(yield _i()).transaction(Un,"readwrite"),X=K.objectStore(Un),he=yield X.get(x);return yield X.put(C,x),yield K.done,(!he||he.fid!==C.fid)&&bt(b,C.fid),C})).apply(this,arguments)}function at(b){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*(b){const C=Ze(b),V=(yield _i()).transaction(Un,"readwrite");yield V.objectStore(Un).delete(C),yield V.done})).apply(this,arguments)}function mr(b,C){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,O.Z)(function*(b,C){const x=Ze(b),K=(yield _i()).transaction(Un,"readwrite"),X=K.objectStore(Un),he=yield X.get(x),Ye=C(he);return void 0===Ye?yield X.delete(x):yield X.put(Ye,x),yield K.done,Ye&&(!he||he.fid!==Ye.fid)&&bt(b,Ye.fid),Ye})).apply(this,arguments)}function Bn(b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,O.Z)(function*(b){let C;const x=yield mr(b.appConfig,V=>{const K=Nt(V),X=gt(b,K);return C=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Nt(b){return Kn(b||{fid:Be(),registrationStatus:0})}function gt(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ie.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function xt(b,C){return gn.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Zn(b)}:{installationEntry:C}}function gn(){return(gn=(0,O.Z)(function*(b,C){try{const x=yield Xe(b,C);return pn(b.appConfig,x)}catch(x){throw Pe(x)&&409===x.customData.serverCode?yield at(b.appConfig):yield pn(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Zn(b){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(b){let C=yield Yr(b.appConfig);for(;1===C.registrationStatus;)yield de(100),C=yield Yr(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield Bn(b);return V||x}return C})).apply(this,arguments)}function Yr(b){return mr(b,C=>{if(!C)throw Ie.create("installation-not-found");return Kn(C)})}function Kn(b){return function vi(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function $t(b,C){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const V=Wt(b,x),K=se(b,x),X=C.getImmediate({optional:!0});if(X){const mt=yield X.getHeartbeatsHeader();mt&&K.append("x-firebase-client",mt)}const Ye={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:Z,appId:b.appId}})},ct=yield ve(()=>fetch(V,Ye));if(ct.ok)return xe(yield ct.json());throw yield be("Generate Auth Token",ct)})).apply(this,arguments)}function Wt(b,{fid:C}){return`${Ae(b)}/${C}/authTokens:generate`}function Tr(b){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(b,C=!1){let x;const V=yield mr(b.appConfig,X=>{if(!Xt(X))throw Ie.create("not-registered");const he=X.authToken;if(!C&&H(he))return X;if(1===he.requestStatus)return x=He(b,C),X;{if(!navigator.onLine)throw Ie.create("app-offline");const Ye=W(X);return x=Ct(b,Ye),Ye}});return x?yield x:V.authToken})).apply(this,arguments)}function He(b,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(b,C){let x=yield nt(b.appConfig);for(;1===x.authToken.requestStatus;)yield de(100),x=yield nt(b.appConfig);const V=x.authToken;return 0===V.requestStatus?Tr(b,C):V})).apply(this,arguments)}function nt(b){return mr(b,C=>{if(!Xt(C))throw Ie.create("not-registered");return function U(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(b,C){return St.apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(b,C){try{const x=yield $t(b,C),V=Object.assign(Object.assign({},C),{authToken:x});return yield pn(b.appConfig,V),x}catch(x){if(!Pe(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield pn(b.appConfig,V)}else yield at(b.appConfig);throw x}})).apply(this,arguments)}function Xt(b){return void 0!==b&&2===b.registrationStatus}function H(b){return 2===b.requestStatus&&!function B(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function W(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function L(){return(L=(0,O.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:V}=yield Bn(C);return V?V.catch(console.error):Tr(C).catch(console.error),x.fid})).apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(b,C=!1){const x=b;return yield lt(x),(yield Tr(x,C)).token})).apply(this,arguments)}function lt(b){return qe.apply(this,arguments)}function qe(){return(qe=(0,O.Z)(function*(b){const{registrationPromise:C}=yield Bn(b);C&&(yield C)})).apply(this,arguments)}function Nu(b){return Ie.create("missing-app-config-values",{valueName:b})}const Ou="installations",no=b=>{const C=b.getProvider("app").getImmediate(),x=function to(b){if(!b||!b.options)throw Nu("App Configuration");if(!b.name)throw Nu("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw Nu(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,te._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Xl=b=>{const C=b.getProvider("app").getImmediate(),x=(0,te._getProvider)(C,Ou).getImmediate();return{getId:()=>function R(b){return L.apply(this,arguments)}(x),getToken:K=>function re(b){return Me.apply(this,arguments)}(x,K)}};(function ku(){(0,te._registerComponent)(new ae.wA(Ou,no,"PUBLIC")),(0,te._registerComponent)(new ae.wA("installations-internal",Xl,"PRIVATE"))})(),(0,te.registerVersion)(fe,z),(0,te.registerVersion)(fe,z,"esm2017");const Da="@firebase/remote-config",kn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gi{constructor(C,x,V,K){this.client=C,this.storage=x,this.storageCache=V,this.logger=K}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,K=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${K}.`),K}fetch(C){var x=this;return(0,O.Z)(function*(){const[V,K]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(K&&x.isCachedDataFresh(C.cacheMaxAgeMillis,V))return K;C.eTag=K&&K.eTag;const X=yield x.client.fetch(C),he=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&he.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(he),X})()}}function Vr(b=navigator){return b.languages&&b.languages[0]||b.language}class Br{constructor(C,x,V,K,X,he){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=V,this.projectId=K,this.apiKey=X,this.appId=he}fetch(C){var x=this;return(0,O.Z)(function*(){const[V,K]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ct={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:K,app_id:x.appId,language_code:Vr()},mt={method:"POST",headers:Ye,body:JSON.stringify(ct)},Yt=fetch(he,mt),Bt=new Promise((dt,Ci)=>{C.signal.addEventListener(()=>{const sl=new Error("The operation was aborted.");sl.name="AbortError",Ci(sl)})});let Rr;try{yield Promise.race([Yt,Bt]),Rr=yield Yt}catch(dt){let Ci="fetch-client-network";throw"AbortError"===dt?.name&&(Ci="fetch-timeout"),kn.create(Ci,{originalErrorMessage:dt?.message})}let Jn=Rr.status;const Ws=Rr.headers.get("ETag")||void 0;let Cs,Cn;if(200===Rr.status){let dt;try{dt=yield Rr.json()}catch(Ci){throw kn.create("fetch-client-parse",{originalErrorMessage:Ci?.message})}Cs=dt.entries,Cn=dt.state}if("INSTANCE_STATE_UNSPECIFIED"===Cn?Jn=500:"NO_CHANGE"===Cn?Jn=304:("NO_TEMPLATE"===Cn||"EMPTY_CONFIG"===Cn)&&(Cs={}),304!==Jn&&200!==Jn)throw kn.create("fetch-status",{httpStatus:Jn});return{status:Jn,eTag:Ws,config:Cs}})()}}class jn{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:V}){var K=this;return(0,O.Z)(function*(){yield function Pu(b,C){return new Promise((x,V)=>{const K=Math.max(C-Date.now(),0),X=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(X),V(kn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const X=yield K.client.fetch(C);return yield K.storage.deleteThrottleMetadata(),X}catch(X){if(!function wn(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(X))throw X;const he={throttleEndTimeMillis:Date.now()+(0,ie.$s)(V),backoffCount:V+1};return yield K.storage.setThrottleMetadata(he),K.attemptFetch(C,he)}})()}}class Sa{constructor(C,x,V,K,X){this.app=C,this._client=x,this._storageCache=V,this._storage=K,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zi(b,C){const x=b.target.error||void 0;return kn.create(C,{originalErrorMessage:x&&x?.message})}const oi="app_namespace_store";class Jr{constructor(C,x,V,K=function Xr(){return new Promise((b,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{C(zi(V,"storage-open"))},x.onsuccess=V=>{b(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(oi,{keyPath:"compositeKey"})}}catch(x){C(kn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=V,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((K,X)=>{const Ye=V.transaction([oi],"readonly").objectStore(oi),ct=x.createCompositeKey(C);try{const mt=Ye.get(ct);mt.onerror=Yt=>{X(zi(Yt,"storage-get"))},mt.onsuccess=Yt=>{const Bt=Yt.target.result;K(Bt?Bt.value:void 0)}}catch(mt){X(kn.create("storage-get",{originalErrorMessage:mt?.message}))}})})()}set(C,x){var V=this;return(0,O.Z)(function*(){const K=yield V.openDbPromise;return new Promise((X,he)=>{const ct=K.transaction([oi],"readwrite").objectStore(oi),mt=V.createCompositeKey(C);try{const Yt=ct.put({compositeKey:mt,value:x});Yt.onerror=Bt=>{he(zi(Bt,"storage-set"))},Yt.onsuccess=()=>{X()}}catch(Yt){he(kn.create("storage-set",{originalErrorMessage:Yt?.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((K,X)=>{const Ye=V.transaction([oi],"readwrite").objectStore(oi),ct=x.createCompositeKey(C);try{const mt=Ye.delete(ct);mt.onerror=Yt=>{X(zi(Yt,"storage-delete"))},mt.onsuccess=()=>{K()}}catch(mt){X(kn.create("storage-delete",{originalErrorMessage:mt?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class qi{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),K=C.storage.getActiveConfig(),X=yield x;X&&(C.lastFetchStatus=X);const he=yield V;he&&(C.lastSuccessfulFetchTimestampMillis=he);const Ye=yield K;Ye&&(C.activeConfig=Ye)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function sp(){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Go(){(0,te._registerComponent)(new ae.wA("remote-config",function b(C,{instanceIdentifier:x}){const V=C.getProvider("app").getImmediate(),K=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,ie.hl)())throw kn.create("indexed-db-unavailable");const{projectId:X,apiKey:he,appId:Ye}=V.options;if(!X)throw kn.create("registration-project-id");if(!he)throw kn.create("registration-api-key");if(!Ye)throw kn.create("registration-app-id");const ct=new Jr(Ye,V.name,x=x||"firebase"),mt=new qi(ct),Yt=new ge.Yd(Da);Yt.logLevel=ge.in.ERROR;const Bt=new Br(K,te.SDK_VERSION,x,X,he,Ye),Rr=new jn(Bt,ct),Jn=new Gi(Rr,ct,mt,Yt),Ws=new Sa(V,Jn,mt,ct,Yt);return function vn(b){const C=(0,ie.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ws),Ws},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(Da,"0.4.3"),(0,te.registerVersion)(Da,"0.4.3","esm2017")}();const Wi="/firebase-messaging-sw.js",so="/firebase-cloud-messaging-push-scope",zo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Jl="google.c.a.c_id",ap="google.c.a.c_l",up="google.c.a.ts",qo="google.c.a.e";var Pi=(()=>{return(b=Pi||(Pi={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Pi;var b})();function Ls(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lp(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),K=new Uint8Array(V.length);for(let X=0;X<V.length;++X)K[X]=V.charCodeAt(X);return K}const Ma="fcm_token_details_db",xa="fcm_token_object_Store";function ec(b){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(Ma))return null;let C=null;return(yield(0,le.X3)(Ma,5,{upgrade:(V=(0,O.Z)(function*(K,X,he,Ye){var ct;if(X<2||!K.objectStoreNames.contains(xa))return;const mt=Ye.objectStore(xa),Yt=yield mt.index("fcmSenderId").get(b);if(yield mt.clear(),Yt)if(2===X){const Bt=Yt;if(!Bt.auth||!Bt.p256dh||!Bt.endpoint)return;C={token:Bt.fcmToken,createTime:null!==(ct=Bt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Bt.auth,p256dh:Bt.p256dh,endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:"string"==typeof Bt.vapidKey?Bt.vapidKey:Ls(Bt.vapidKey)}}}else if(3===X){const Bt=Yt;C={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Ls(Bt.auth),p256dh:Ls(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Ls(Bt.vapidKey)}}}else if(4===X){const Bt=Yt;C={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Ls(Bt.auth),p256dh:Ls(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Ls(Bt.vapidKey)}}}}),function(X,he,Ye,ct){return V.apply(this,arguments)})})).close(),yield(0,le.Lj)(Ma),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),tc(C)?C:null;var V}),Ra.apply(this,arguments)}function tc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const oo="firebase-messaging-store";let ao=null;function uo(){return ao||(ao=(0,le.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(oo)}})),ao}function Na(b){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*(b){const C=Bs(b),V=yield(yield uo()).transaction(oo).objectStore(oo).get(C);if(V)return V;{const K=yield ec(b.appConfig.senderId);if(K)return yield lo(b,K),K}})).apply(this,arguments)}function lo(b,C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,O.Z)(function*(b,C){const x=Bs(b),K=(yield uo()).transaction(oo,"readwrite");return yield K.objectStore(oo).put(C,x),yield K.done,C})).apply(this,arguments)}function Uu(b){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,O.Z)(function*(b){const C=Bs(b),V=(yield uo()).transaction(oo,"readwrite");yield V.objectStore(oo).delete(C),yield V.done})).apply(this,arguments)}function Bs({appConfig:b}){return b.appId}const Pn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vu(b,C){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(b,C){const x=yield Zi(b),V=Fa(C),K={method:"POST",headers:x,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(Pa(b.appConfig),K)).json()}catch(he){throw Pn.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(X.error)throw Pn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw Pn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function ka(b,C){return ps.apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(b,C){const x=yield Zi(b),V=Fa(C.subscriptionOptions),K={method:"PATCH",headers:x,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(`${Pa(b.appConfig)}/${C.token}`,K)).json()}catch(he){throw Pn.create("token-update-failed",{errorInfo:he?.toString()})}if(X.error)throw Pn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw Pn.create("token-update-no-token");return X.token})).apply(this,arguments)}function hr(b,C){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,O.Z)(function*(b,C){const V={method:"DELETE",headers:yield Zi(b)};try{const X=yield(yield fetch(`${Pa(b.appConfig)}/${C}`,V)).json();if(X.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(K){throw Pn.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function Pa({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Zi(b){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Fa({p256dh:b,auth:C,endpoint:x,vapidKey:V}){const K={web:{endpoint:x,auth:C,p256dh:b}};return V!==zo&&(K.web.applicationPubKey=V),K}const js=6048e5;function Hd(b){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(b){const C=yield zd(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:Ls(C.getKey("auth")),p256dh:Ls(C.getKey("p256dh"))},V=yield Na(b.firebaseDependencies);if(V){if(rc(V.subscriptionOptions,x))return Date.now()>=V.createTime+js?Vt(b,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield hr(b.firebaseDependencies,V.token)}catch(K){console.warn(K)}return Gd(b.firebaseDependencies,x)}return Gd(b.firebaseDependencies,x)})).apply(this,arguments)}function Bu(b){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(b){const C=yield Na(b.firebaseDependencies);C&&(yield hr(b.firebaseDependencies,C.token),yield Uu(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Vt(b,C){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(b,C){try{const x=yield ka(b.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield lo(b.firebaseDependencies,V),x}catch(x){throw yield Bu(b),x}})).apply(this,arguments)}function Gd(b,C){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,O.Z)(function*(b,C){const V={token:yield Vu(b,C),createTime:Date.now(),subscriptionOptions:C};return yield lo(b,V),V.token})).apply(this,arguments)}function zd(b,C){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lp(C)})})).apply(this,arguments)}function rc(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function ju(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function qd(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const V=C.notification.body;V&&(b.notification.body=V);const K=C.notification.image;K&&(b.notification.image=K);const X=C.notification.icon;X&&(b.notification.icon=X)}(C,b),function me(b,C){C.data&&(b.data=C.data)}(C,b),function en(b,C){var x,V,K,X,he;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Ye=null!==(K=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==K?K:null===(X=C.notification)||void 0===X?void 0:X.click_action;Ye&&(b.fcmOptions.link=Ye);const ct=null===(he=C.fcmOptions)||void 0===he?void 0:he.analytics_label;ct&&(b.fcmOptions.analyticsLabel=ct)}(C,b),C}function Wd(b){return"object"==typeof b&&!!b&&Jl in b}function ic(b,C){const x=[];for(let V=0;V<b.length;V++)x.push(b.charAt(V)),V<C.length&&x.push(C.charAt(V));return x.join("")}function $u(b){return Pn.create("missing-app-config-values",{valueName:b})}ic("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ic("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ho{constructor(C,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Xn(b){if(!b||!b.options)throw $u("App Configuration Object");if(!b.name)throw $u("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const V of C)if(!x[V])throw $u(V);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:K,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ii(b){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Wi,{scope:so}),b.swRegistration.update().catch(()=>{})}catch(C){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function sc(b,C){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield Ii(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function Zd(b,C){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=zo)})).apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(b,C){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield Zd(b,C?.vapidKey),yield sc(b,C?.serviceWorkerRegistration),Hd(b)})).apply(this,arguments)}function go(b,C,x){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(b,C,x){const V=gs(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[Jl],message_name:x[ap],message_time:x[up],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function gs(b){switch(b){case Pi.NOTIFICATION_CLICKED:return"notification_open";case Pi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function mo(){return(mo=(0,O.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Pi.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ju(x)):b.onMessageHandler.next(ju(x)));const V=x.data;Wd(V)&&"1"===V[qo]&&(yield go(b,x.messageType,V))})).apply(this,arguments)}const Hu="@firebase/messaging",ms=b=>{const C=new ho(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function oc(b,C){return mo.apply(this,arguments)}(C,x)),C},Qo=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:V=>function vr(b,C){return Ar.apply(this,arguments)}(C,V)}};function Gu(){return ac.apply(this,arguments)}function ac(){return(ac=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Yd(){(0,te._registerComponent)(new ae.wA("messaging",ms,"PUBLIC")),(0,te._registerComponent)(new ae.wA("messaging-internal",Qo,"PRIVATE")),(0,te.registerVersion)(Hu,"0.12.3"),(0,te.registerVersion)(Hu,"0.12.3","esm2017")}();const lc="analytics",$r="firebase_id",cc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xd="https://www.googletagmanager.com/gtag/js",wr=new ge.Yd("@firebase/analytics");function Jd(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function pp(b,C){const x=document.createElement("script");x.src=`${Xd}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Xo(b,C,x,V,K,X){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,O.Z)(function*(b,C,x,V,K,X){const he=V[K];try{if(he)yield C[he];else{const ct=(yield Jd(x)).find(mt=>mt.measurementId===K);ct&&(yield C[ct.appId])}}catch(Ye){wr.error(Ye)}b("config",K,X)})).apply(this,arguments)}function Hs(b,C,x,V,K){return ys.apply(this,arguments)}function ys(){return(ys=(0,O.Z)(function*(b,C,x,V,K){try{let X=[];if(K&&K.send_to){let he=K.send_to;Array.isArray(he)||(he=[he]);const Ye=yield Jd(x);for(const ct of he){const mt=Ye.find(Bt=>Bt.measurementId===ct),Yt=mt&&C[mt.appId];if(!Yt){X=[];break}X.push(Yt)}}0===X.length&&(X=Object.values(C)),yield Promise.all(X),b("event",V,K||{})}catch(X){wr.error(X)}})).apply(this,arguments)}function Qi(b){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(Xd)&&x.src.includes(b))return x;return null}const Mr=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hc=new class gp{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function _s(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function zu(b){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(b){var C;const{appId:x,apiKey:V}=b,K={method:"GET",headers:_s(V)},X=cc.replace("{app-id}",x),he=yield fetch(X,K);if(200!==he.status&&304!==he.status){let Ye="";try{const ct=yield he.json();null!==(C=ct.error)&&void 0!==C&&C.message&&(Ye=ct.error.message)}catch{}throw Mr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:Ye})}return he.json()})).apply(this,arguments)}function Ba(b){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,O.Z)(function*(b,C=hc,x){const{appId:V,apiKey:K,measurementId:X}=b.options;if(!V)throw Mr.create("no-app-id");if(!K){if(X)return{measurementId:X,appId:V};throw Mr.create("no-api-key")}const he=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new _o;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==x?x:6e4),ja({appId:V,apiKey:K,measurementId:X},he,Ye,C)})).apply(this,arguments)}function ja(b,C,x){return Di.apply(this,arguments)}function Di(){return(Di=(0,O.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},V,K=hc){var X;const{appId:he,measurementId:Ye}=b;try{yield $a(V,C)}catch(ct){if(Ye)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:he,measurementId:Ye};throw ct}try{const ct=yield zu(b);return K.deleteThrottleMetadata(he),ct}catch(ct){const mt=ct;if(!qu(mt)){if(K.deleteThrottleMetadata(he),Ye)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:he,measurementId:Ye};throw ct}const Yt=503===Number(null===(X=mt?.customData)||void 0===X?void 0:X.httpStatus)?(0,ie.$s)(x,K.intervalMillis,30):(0,ie.$s)(x,K.intervalMillis),Bt={throttleEndTimeMillis:Date.now()+Yt,backoffCount:x+1};return K.setThrottleMetadata(he,Bt),wr.debug(`Calling attemptFetch again in ${Yt} millis`),ja(b,Bt,V,K)}})).apply(this,arguments)}function $a(b,C){return new Promise((x,V)=>{const K=Math.max(C-Date.now(),0),X=setTimeout(x,K);b.addEventListener(()=>{clearTimeout(X),V(Mr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function qu(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class _o{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Wu,wo;function vo(){return(vo=(0,O.Z)(function*(b,C,x,V,K){if(K&&K.global)b("event",x,V);else{const X=yield C;b("event",x,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function Ku(b){wo=b}function Ga(b){Wu=b}function Yu(){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(){if(!(0,ie.hl)())return wr.warn(Mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(b){return wr.warn(Mr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(b,C,x,V,K,X,he){var Ye;const ct=Ba(b);ct.then(Jn=>{x[Jn.measurementId]=Jn.appId,b.options.measurementId&&Jn.measurementId!==b.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Jn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Jn=>wr.error(Jn)),C.push(ct);const mt=Yu().then(Jn=>{if(Jn)return V.getId()}),[Yt,Bt]=yield Promise.all([ct,mt]);Qi(X)||pp(X,Yt.measurementId),wo&&(K("consent","default",wo),Ku(void 0)),K("js",new Date);const Rr=null!==(Ye=he?.config)&&void 0!==Ye?Ye:{};return Rr.origin="firebase",Rr.update=!0,null!=Bt&&(Rr[$r]=Bt),K("config",Yt.measurementId,Rr),Wu&&(K("set",Wu),Ga(void 0)),Yt.measurementId})).apply(this,arguments)}class Wa{constructor(C){this.app=C}_delete(){return delete bi[this.app.options.appId],Promise.resolve()}}let bi={},th=[];const qs={};let Qu,ei,Li="dataLayer",Ji=!1;function Eo(b,C,x){!function Xu(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((V,K)=>`(${K+1}) ${V}`).join(" "),x=Mr.create("invalid-analytics-context",{errorInfo:C});wr.warn(x.message)}}();const V=b.options.appId;if(!V)throw Mr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Mr.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bi[V])throw Mr.create("already-exists",{id:V});if(!Ji){!function dc(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(Li);const{wrappedGtag:X,gtagCore:he}=function eh(b,C,x,V,K){let X=function(...he){window[V].push(arguments)};return window[K]&&"function"==typeof window[K]&&(X=window[K]),window[K]=function yo(b,C,x,V){function X(){return(X=(0,O.Z)(function*(he,Ye,ct){try{"event"===he?yield Hs(b,C,x,Ye,ct):"config"===he?yield Xo(b,C,x,V,Ye,ct):"consent"===he?b("consent","update",ct):b("set",Ye)}catch(mt){wr.error(mt)}})).apply(this,arguments)}return function K(he,Ye,ct){return X.apply(this,arguments)}}(X,b,C,x),{gtagCore:X,wrappedGtag:window[K]}}(bi,th,qs,Li,"gtag");ei=X,Qu=he,Ji=!0}return bi[V]=function pc(b,C,x,V,K,X,he){return qa.apply(this,arguments)}(b,th,qs,C,Qu,Li,x),new Wa(b)}function yc(){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const an="@firebase/analytics";!function wc(){(0,te._registerComponent)(new ae.wA(lc,(C,{options:x})=>Eo(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,te._registerComponent)(new ae.wA("analytics-internal",function b(C){try{const x=C.getProvider(lc).getImmediate();return{logEvent:(V,K,X)=>function rh(b,C,x,V){b=(0,ie.m9)(b),function Gs(b,C,x,V,K){return vo.apply(this,arguments)}(ei,bi[b.app.options.appId],C,x,V).catch(K=>wr.error(K))}(x,V,K,X)}}catch(x){throw Mr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,te.registerVersion)(an,"0.9.3"),(0,te.registerVersion)(an,"0.9.3","esm2017")}();var yp=P(4408),Ya=P(7565);const iy=new class ih extends Ya.v{}(class Ka extends yp.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,x,V):(C.flush(this),0)}});var _p=P(4986),Do=P(9751),Fn=P(8505),Qa=P(5363),ra=P(9468);const vp=new h.GfV("7.5.0"),Er="__angularfire_symbol__analyticsIsSupportedValue",es="__angularfire_symbol__analyticsIsSupported",Ju="__angularfire_symbol__remoteConfigIsSupportedValue",ia="__angularfire_symbol__remoteConfigIsSupported",Ds="__angularfire_symbol__messagingIsSupportedValue",Ec="__angularfire_symbol__messagingIsSupported";function Ic(b,C,x){if(C){if(1===C.length)return C[0];const X=C.filter(he=>he.app===x);if(1===X.length)return X[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[es]||(globalThis[es]=yc().then(b=>globalThis[Er]=b).catch(()=>globalThis[Er]=!1)),globalThis[Ec]||(globalThis[Ec]=Gu().then(b=>globalThis[Ds]=b).catch(()=>globalThis[Ds]=!1)),globalThis[ia]||(globalThis[ia]=sp().then(b=>globalThis[Ju]=b).catch(()=>globalThis[Ju]=!1));const xr=(b,C)=>{const x=C?[C]:(0,j.C6)(),V=[];return x.forEach(K=>{K.container.getProvider(b).instances.forEach(he=>{V.includes(he)||V.push(he)})}),V};function dn(){}class bo{constructor(C,x=iy){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,V){const K=this.zone;return this.delegate.schedule(function(he){K.runGuarded(()=>{C.apply(this,[he])})},x,V)}}class tl{constructor(C){this.zone=C,this.task=null}call(C,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dn,{},dn,dn)),x.pipe((0,Fn.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dc=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new bo(Zone.current)),this.insideAngular=x.run(()=>new bo(Zone.current,_p.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ts(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function nl(b){return ts().ngZone.runOutsideAngular(()=>b())}function bs(b){return ts().ngZone.run(()=>b())}function bc(b){return b.pipe((0,Qa.Q)(ts().outsideAngular))}function sa(b){return ts(),function il(b){return function(x){return(x=x.lift(new tl(b.ngZone))).pipe((0,ra.R)(b.outsideAngular),(0,Qa.Q)(b.insideAngular))}}(ts())(b)}const Co=(b,C)=>function(){const V=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),bs(()=>b.apply(void 0,V))},sh=(b,C)=>function(){let x;const V=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof V[X]&&(C&&(x||(x=bs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",dn,{},dn,dn)))),V[X]=Co(V[X],x));const K=nl(()=>b.apply(this,V));if(!C){if(K instanceof Do.y){const X=ts();return K.pipe((0,ra.R)(X.outsideAngular),(0,Qa.Q)(X.insideAngular))}return bs(()=>K)}return K instanceof Do.y?K.pipe(sa):K instanceof Promise?bs(()=>new Promise((X,he)=>K.then(Ye=>bs(()=>X(Ye)),Ye=>bs(()=>he(Ye))))):"function"==typeof K&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),K.apply(this,arguments)}:bs(()=>K)}},2722:(pt,Ce,P)=>{P.d(Ce,{$:()=>Pa,A:()=>G,B:()=>Te,G:()=>Xl,H:()=>En,J:()=>jn,L:()=>H,M:()=>Aa,N:()=>op,P:()=>_p,Q:()=>Jl,R:()=>vc,T:()=>ap,U:()=>zo,V:()=>Pi,W:()=>Ls,X:()=>ec,Y:()=>jr,Z:()=>Vu,_:()=>ka,a:()=>ea,a0:()=>Hd,a1:()=>Bu,a2:()=>Vt,a3:()=>Gd,a4:()=>zd,a5:()=>rc,a6:()=>qd,a7:()=>me,a8:()=>Wd,a9:()=>ic,aA:()=>B,aB:()=>Ye,aC:()=>bs,aD:()=>nl,aE:()=>ur,aI:()=>_s,aL:()=>qo,aa:()=>Ii,ab:()=>sc,ac:()=>Zd,af:()=>go,ag:()=>gs,ah:()=>oc,ak:()=>oo,al:()=>Ua,an:()=>Xd,ao:()=>Jo,ap:()=>ve,aq:()=>ft,ar:()=>lt,as:()=>Pe,at:()=>al,au:()=>Cn,av:()=>yn,aw:()=>Ae,ax:()=>Y,ay:()=>Rr,az:()=>Ge,b:()=>Mr,c:()=>ia,d:()=>sy,e:()=>Ec,f:()=>sa,g:()=>x,h:()=>sh,i:()=>za,j:()=>X,k:()=>ch,l:()=>Is,m:()=>Ap,o:()=>le,r:()=>yp,s:()=>ry,u:()=>iy});var h=P(5861),j=P(2090),O=P(9681),te=P(1877),ie=P(655),ae=P(4859);const le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function Z(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Se=new te.Yd("@firebase/auth");function Ie(v,...p){Se.logLevel<=te.in.ERROR&&Se.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Pe(v,...p){throw je(v,...p)}function Ae(v,...p){return je(v,...p)}function xe(v,p,m){const E=Object.assign(Object.assign({},ze()),{[p]:m});return new j.LL("auth","Firebase",E).create(p,{appName:v.name})}function be(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Pe(v,"argument-error"),xe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(v,...p){if("string"!=typeof v){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return ot.create(v,...p)}function Y(v,p,...m){if(!v)throw je(p,...m)}function se(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ie(p),new Error(p)}function ve(v,p){v||se(p)}const We=new Map;function Ge(v){ve(v instanceof Function,"Expected a class definition");let p=We.get(v);return p?(ve(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,We.set(v,p),p)}function oe(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function de(){return"http:"===we()||"https:"===we()}function we(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Be{constructor(p,m){this.shortDelay=p,this.longDelay=m,ve(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Re(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(de()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tt(v,p){ve(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Ze{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},bt=new Be(3e4,6e4);function wt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function rt(v,p,m,E){return rn.apply(this,arguments)}function rn(){return(rn=(0,h.Z)(function*(v,p,m,E,A={}){return _n(v,A,(0,h.Z)(function*(){let k={},J={};E&&("GET"===p?J=E:k={body:JSON.stringify(E)});const De=(0,j.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),Je=yield v._getAdditionalHeaders();return Je["Content-Type"]="application/json",v.languageCode&&(Je["X-Firebase-Locale"]=v.languageCode),Ze.fetch()(Fr(v,v.config.apiHost,m,De),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function _n(v,p,m){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},cn),p);try{const A=new yi(v),k=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const J=yield k.json();if("needConfirmation"in J)throw Un(v,"account-exists-with-different-credential",J);if(k.ok&&!("errorMessage"in J))return J;{const De=k.ok?J.errorMessage:J.error.message,[Je,ht]=De.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw Un(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===Je)throw Un(v,"email-already-in-use",J);if("USER_DISABLED"===Je)throw Un(v,"user-disabled",J);const Ht=E[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(ht)throw xe(v,Ht,ht);Pe(v,Ht)}}catch(A){if(A instanceof j.ZR)throw A;Pe(v,"network-request-failed")}})).apply(this,arguments)}function sn(v,p,m,E){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(v,p,m,E,A={}){const k=yield rt(v,p,m,E,A);return"mfaPendingCredential"in k&&Pe(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function Fr(v,p,m,E){const A=`${p}${m}?${E}`;return v.config.emulator?tt(v.config,A):`${v.config.apiScheme}://${A}`}class yi{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ae(this.auth,"network-request-failed")),bt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(v,p,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ae(v,p,E);return A.customData._tokenResponse=m,A}function _i(){return(_i=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function pn(v,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function at(v,p){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function mr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Lr(){return(Lr=(0,h.Z)(function*(v,p=!1){const m=(0,j.m9)(v),E=yield m.getIdToken(p),A=gt(E);Y(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const k="object"==typeof A.firebase?A.firebase:void 0,J=k?.sign_in_provider;return{claims:A,token:E,authTime:mr(Nt(A.auth_time)),issuedAtTime:mr(Nt(A.iat)),expirationTime:mr(Nt(A.exp)),signInProvider:J||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Nt(v){return 1e3*Number(v)}function gt(v){const[p,m,E]=v.split(".");if(void 0===p||void 0===m||void 0===E)return Ie("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,j.tV)(m);return A?JSON.parse(A):(Ie("Failed to decode base64 JWT payload"),null)}catch(A){return Ie("Caught error parsing JWT payload as JSON",A?.toString()),null}}function gn(v,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof j.ZR&&Dn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Dn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Yr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Kn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function vi(v){return $t.apply(this,arguments)}function $t(){return($t=(0,h.Z)(function*(v){var p;const m=v.auth,E=yield v.getIdToken(),A=yield gn(v,at(m,{idToken:E}));Y(A?.users.length,m,"internal-error");const k=A.users[0];v._notifyReloadListener(k);const J=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?On(k.providerUserInfo):[],De=Tr(v.providerData,J),Ht=!!v.isAnonymous&&!(v.email&&k.passwordHash||De?.length),Tn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:De,metadata:new Kn(k.createdAt,k.lastLoginAt),isAnonymous:Ht};Object.assign(v,Tn)})).apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(v){const p=(0,j.m9)(v);yield vi(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Tr(v,p){return[...v.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}function On(v){return v.map(p=>{var{providerId:m}=p,E=(0,ie._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ee(){return(Ee=(0,h.Z)(function*(v,p){const m=yield _n(v,{},(0,h.Z)(function*(){const E=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:k}=v.config,J=Fr(v,A,"/v1/token",`key=${k}`),De=yield v._getAdditionalHeaders();return De["Content-Type"]="application/x-www-form-urlencoded",Ze.fetch()(J,{method:"POST",headers:De,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Y(p.idToken,"internal-error"),Y(typeof p.idToken<"u","internal-error"),Y(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function xt(v){const p=gt(v);return Y(p,"internal-error"),Y(typeof p.exp<"u","internal-error"),Y(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return Y(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:k,expiresIn:J}=yield function He(v,p){return Ee.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(A,k,Number(J))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:A,expirationTime:k}=m,J=new nt;return E&&(Y("string"==typeof E,"internal-error",{appName:p}),J.refreshToken=E),A&&(Y("string"==typeof A,"internal-error",{appName:p}),J.accessToken=A),k&&(Y("number"==typeof k,"internal-error",{appName:p}),J.expirationTime=k),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new nt,this.toJSON())}_performRefresh(){return se("not implemented")}}function Ct(v,p){Y("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class St{constructor(p){var{uid:m,auth:E,stsTokenManager:A}=p,k=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Kn(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield gn(m,m.stsTokenManager.getToken(m.auth,p));return Y(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function Bn(v){return Lr.apply(this,arguments)}(this,p)}reload(){return function wi(v){return Wt.apply(this,arguments)}(this)}_assign(p){this!==p&&(Y(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new St(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),m&&(yield vi(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield gn(p,function Kr(v,p){return _i.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,A,k,J,De,Je,ht,Ht;const Tn=null!==(E=m.displayName)&&void 0!==E?E:void 0,ui=null!==(A=m.email)&&void 0!==A?A:void 0,Ss=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,xc=null!==(J=m.photoURL)&&void 0!==J?J:void 0,nu=null!==(De=m.tenantId)&&void 0!==De?De:void 0,Rc=null!==(Je=m._redirectEventId)&&void 0!==Je?Je:void 0,xp=null!==(ht=m.createdAt)&&void 0!==ht?ht:void 0,ay=null!==(Ht=m.lastLoginAt)&&void 0!==Ht?Ht:void 0,{uid:Nc,emailVerified:uy,isAnonymous:Rp,providerData:Oc,stsTokenManager:Np}=m;Y(Nc&&Np,p,"internal-error");const ly=nt.fromJSON(this.name,Np);Y("string"==typeof Nc,p,"internal-error"),Ct(Tn,p.name),Ct(ui,p.name),Y("boolean"==typeof uy,p,"internal-error"),Y("boolean"==typeof Rp,p,"internal-error"),Ct(Ss,p.name),Ct(xc,p.name),Ct(nu,p.name),Ct(Rc,p.name),Ct(xp,p.name),Ct(ay,p.name);const gh=new St({uid:Nc,auth:p,email:ui,emailVerified:uy,displayName:Tn,isAnonymous:Rp,photoURL:xc,phoneNumber:Ss,tenantId:nu,stsTokenManager:ly,createdAt:xp,lastLoginAt:ay});return Oc&&Array.isArray(Oc)&&(gh.providerData=Oc.map(kc=>Object.assign({},kc))),Rc&&(gh._redirectEventId=Rc),gh}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const A=new nt;A.updateFromServerResponse(m);const k=new St({uid:m.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield vi(k),k})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,h.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function B(v,p,m){return`firebase:${v}:${p}:${m}`}class W{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:A,name:k}=this.auth;this.fullUserKey=B(this.userKey,A.apiKey,k),this.fullPersistenceKey=B("persistence",A.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?St._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new W(Ge(H),p,E);const A=(yield Promise.all(m.map(function(){var ht=(0,h.Z)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return ht.apply(this,arguments)}}()))).filter(ht=>ht);let k=A[0]||Ge(H);const J=B(E,p.config.apiKey,p.name);let De=null;for(const ht of m)try{const Ht=yield ht._get(J);if(Ht){const Tn=St._fromJSON(p,Ht);ht!==k&&(De=Tn),k=ht;break}}catch{}const Je=A.filter(ht=>ht._shouldAllowMigration);return k._shouldAllowMigration&&Je.length?(k=Je[0],De&&(yield k._set(J,De.toJSON())),yield Promise.all(m.map(function(){var ht=(0,h.Z)(function*(Ht){if(Ht!==k)try{yield Ht._remove(J)}catch{}});return function(Ht){return ht.apply(this,arguments)}}())),new W(k,p,E)):new W(k,p,E)})()}}function U(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Me(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(R(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(qe(p))return"Blackberry";if(Lt(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||re(p))&&!p.includes("edge/"))return"Chrome";if(lt(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function R(v=(0,j.z$)()){return/firefox\//i.test(v)}function L(v=(0,j.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function re(v=(0,j.z$)()){return/crios\//i.test(v)}function Me(v=(0,j.z$)()){return/iemobile/i.test(v)}function lt(v=(0,j.z$)()){return/android/i.test(v)}function qe(v=(0,j.z$)()){return/blackberry/i.test(v)}function Lt(v=(0,j.z$)()){return/webos/i.test(v)}function ft(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function yn(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Sr(v=(0,j.z$)()){return ft(v)||lt(v)||Lt(v)||qe(v)||/windows phone/i.test(v)||Me(v)}function to(v,p=[]){let m;switch(v){case"Browser":m=U((0,j.z$)());break;case"Worker":m=`${U((0,j.z$)())}-${v}`;break;default:m=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${E}`}class Nu{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=k=>new Promise((J,De)=>{try{J(p(k))}catch(Je){De(Je)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const A of m.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const k of E)try{k()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Ou{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new no(this),this.idTokenSubscription=new no(this),this.beforeStateQueue=new Nu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=Ge(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,k;if(!E._deleted&&(E.persistenceManager=yield W.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let k=A,J=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const De=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Je=k?._redirectEventId,ht=yield m.tryRedirectSignIn(p);(!De||De===Je)&&ht?.user&&(k=ht.user,J=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(J)try{yield m.beforeStateQueue.runMiddleware(k)}catch(De){k=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(De))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return Y(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield vi(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ue(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,j.m9)(p):null;return E&&Y(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&Y(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(Ge(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&Ge(p)||m._popupRedirectResolver;Y(E,m,"argument-error"),m.redirectPersistenceManager=yield W.create(m,[Ge(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,A){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(J,this,"internal-error"),J.then(()=>k(this.currentUser)),"function"==typeof m?p.addObserver(m,E,A):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=to(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function ur(v){return(0,j.m9)(v)}class no{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xl(v,p,m){const E=ur(v);Y(E._canInitEmulator,E,"emulator-config-failed"),Y(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!m?.disableWarnings,k=ku(p),{host:J,port:De}=function Da(v){const p=ku(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const k=A[1];return{host:k,port:ro(E.substr(k.length+1))}}{const[k,J]=E.split(":");return{host:k,port:ro(J)}}}(p);E.config.emulator={url:`${k}//${J}${null===De?"":`:${De}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:J,port:De,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function nn(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ku(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function ro(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class En{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return se("not implemented")}_getIdTokenResponse(p){return se("not implemented")}_linkToIdToken(p,m){return se("not implemented")}_getReauthenticationResolver(p){return se("not implemented")}}function yr(v,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:resetPassword",wt(v,p))})).apply(this,arguments)}function Ur(v,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function it(v,p){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",wt(v,p))})).apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithPassword",wt(v,p))})).apply(this,arguments)}function Oi(v,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:sendOobCode",wt(v,p))})).apply(this,arguments)}function ki(v,p){return vn.apply(this,arguments)}function vn(){return(vn=(0,h.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function ba(v,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,h.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function Zt(v,p){return $o.apply(this,arguments)}function $o(){return($o=(0,h.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function io(v,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}function Gi(){return(Gi=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}class Vr extends En{constructor(p,m,E,A=null){super("password",E),this._email=p,this._password=m,this._tenantId=A}static _fromEmailAndPassword(p,m){return new Vr(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Vr(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function bn(v,p){return _r.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Hi(v,p){return lr.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Pe(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Ur(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ca(v,p){return Gi.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Pe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Br(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithIdp",wt(v,p))})).apply(this,arguments)}class jn extends En{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new jn(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Pe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=m,k=(0,ie._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const J=new jn(E,A);return J.idToken=k.idToken||void 0,J.accessToken=k.accessToken||void 0,J.secret=k.secret,J.nonce=k.nonce,J.pendingToken=k.pendingToken||null,J}_getIdTokenResponse(p){return Br(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Br(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Br(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,j.xO)(m)}return p}}function Fu(v,p){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:sendVerificationCode",wt(v,p))})).apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p))})).apply(this,arguments)}function cr(){return(cr=(0,h.Z)(function*(v,p){const m=yield sn(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p));if(m.temporaryProof)throw Un(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ip={USER_NOT_FOUND:"user-not-found"};function Jr(){return(Jr=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ip)})).apply(this,arguments)}class qi extends En{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qi({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qi({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Sa(v,p){return zi.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function oi(v,p){return cr.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Xr(v,p){return Jr.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:k}=p;return E||m||A||k?new qi({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:k}):null}}class dr{constructor(p){var m,E,A,k,J,De;const Je=(0,j.zd)((0,j.pd)(p)),ht=null!==(m=Je.apiKey)&&void 0!==m?m:null,Ht=null!==(E=Je.oobCode)&&void 0!==E?E:null,Tn=function Go(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Je.mode)&&void 0!==A?A:null);Y(ht&&Ht&&Tn,"argument-error"),this.apiKey=ht,this.operation=Tn,this.code=Ht,this.continueUrl=null!==(k=Je.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(J=Je.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(De=Je.tenantId)&&void 0!==De?De:null}static parseLink(p){const m=function Lu(v){const p=(0,j.zd)((0,j.pd)(v)).link,m=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,E=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(E?(0,j.zd)((0,j.pd)(E)).link:null)||E||m||p||v}(p);try{return new dr(m)}catch{return null}}}let Aa=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return Vr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=dr.parseLink(E);return Y(A,"argument-error"),Vr._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Wi{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class so extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class zo extends so{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return Y("providerId"in m&&"signInMethod"in m,"argument-error"),jn._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Y(p.idToken||p.accessToken,"argument-error"),jn._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return zo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return zo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:k,nonce:J,providerId:De}=p;if(!E&&!A&&!m&&!k||!De)return null;try{return new zo(De)._credential({idToken:m,accessToken:E,nonce:J,pendingToken:k})}catch{return null}}}let op=(()=>{class v extends so{constructor(){super("facebook.com")}static credential(m){return jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Jl=(()=>{class v extends so{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ap=(()=>{class v extends so{constructor(){super("github.com")}static credential(m){return jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class qo extends En{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Br(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Br(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Br(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:k}=m;return E&&A&&k&&E===A?new qo(E,k):null}static _create(p,m){return new qo(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pi extends Wi{constructor(p){Y(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Pi.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Pi.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=qo.fromJSON(p);return Y(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return qo._create(E,m)}catch{return null}}}let Ls=(()=>{class v extends so{constructor(){super("twitter.com")}static credential(m,E){return jn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return v.credential(E,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function lp(v,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signUp",wt(v,p))})).apply(this,arguments)}class ai{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,A=!1){return(0,h.Z)(function*(){const k=yield St._fromIdTokenResponse(p,E,A),J=xa(E);return new ai({user:k,providerId:J,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=xa(E);return new ai({user:p,providerId:A,_tokenResponse:E,operationType:m})})()}}function xa(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ec(v){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(v){var p;const m=ur(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new ai({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield lp(m,{returnSecureToken:!0}),A=yield ai._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class tc extends j.ZR{constructor(p,m,E,A){var k;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,A){return new tc(p,m,E,A)}}function nc(v,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?tc._fromErrorAndOperation(v,k,p,E):k})}function Us(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function oo(v,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,p){const m=(0,j.m9)(v);yield Vs(!0,m,p);const{providerUserInfo:E}=yield pn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),A=Us(E||[]);return m.providerData=m.providerData.filter(k=>A.has(k.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function uo(v,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(v,p,m=!1){const E=yield gn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return ai._forOperation(v,"link",E)})).apply(this,arguments)}function Vs(v,p,m){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(v,p,m){yield vi(p);const A=!1===v?"provider-already-linked":"no-such-provider";Y(Us(p.providerData).has(m)===v,p.auth,A)})).apply(this,arguments)}function Oa(v,p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(v,p,m=!1){const{auth:E}=v,A="reauthenticate";try{const k=yield gn(v,nc(E,A,p,v),m);Y(k.idToken,E,"internal-error");const J=gt(k.idToken);Y(J,E,"internal-error");const{sub:De}=J;return Y(v.uid===De,E,"user-mismatch"),ai._forOperation(v,A,k)}catch(k){throw"auth/user-not-found"===k?.code&&Pe(E,"user-mismatch"),k}})).apply(this,arguments)}function Wo(v,p){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(v,p,m=!1){const E="signIn",A=yield nc(v,E,p),k=yield ai._fromIdTokenResponse(v,E,A);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function jr(v,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(v,p){return Wo(ur(v),p)})).apply(this,arguments)}function Vu(v,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(v,p){const m=(0,j.m9)(v);return yield Vs(!1,m,p.providerId),uo(m,p)})).apply(this,arguments)}function ka(v,p){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(v,p){return Oa((0,j.m9)(v),p)})).apply(this,arguments)}function hr(v,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,p){return sn(v,"POST","/v1/accounts:signInWithCustomToken",wt(v,p))})).apply(this,arguments)}function Pa(v,p){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,h.Z)(function*(v,p){const m=ur(v),E=yield hr(m,{token:p,returnSecureToken:!0}),A=yield ai._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qn{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Fa._fromServerResponse(p,m):Pe(p,"internal-error")}}class Fa extends Qn{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Fa(m)}}function js(v,p,m){var E;Y((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Y(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Y(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(Y(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Hd(v,p,m){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v),A={requestType:"PASSWORD_RESET",email:p};m&&js(E,A,m),yield ba(E,A)})).apply(this,arguments)}function Bu(v,p,m){return $s.apply(this,arguments)}function $s(){return($s=(0,h.Z)(function*(v,p,m){yield yr((0,j.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Vt(v,p){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(v,p){yield it((0,j.m9)(v),{oobCode:p})})).apply(this,arguments)}function Gd(v,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(v,p){const m=(0,j.m9)(v),E=yield yr(m,{oobCode:p}),A=E.requestType;switch(Y(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(E.mfaInfo,m,"internal-error");default:Y(E.email,m,"internal-error")}let k=null;return E.mfaInfo&&(k=Qn._fromServerResponse(ur(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:A}})).apply(this,arguments)}function zd(v,p){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,p){const{data:m}=yield Gd((0,j.m9)(v),p);return m.email})).apply(this,arguments)}function rc(v,p,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(v,p,m){const E=ur(v),A=yield lp(E,{returnSecureToken:!0,email:p,password:m}),k=yield ai._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function qd(v,p,m){return jr((0,j.m9)(v),Aa.credential(p,m))}function me(v,p,m){return en.apply(this,arguments)}function en(){return(en=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v),A={requestType:"EMAIL_SIGNIN",email:p};Y(m.handleCodeInApp,E,"argument-error"),m&&js(E,A,m),yield Zt(E,A)})).apply(this,arguments)}function Wd(v,p){return"EMAIL_SIGNIN"===dr.parseLink(p)?.operation}function ic(v,p,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v),A=Aa.credentialWithLink(p,m||oe());return Y(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),jr(E,A)})).apply(this,arguments)}function $u(v,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:createAuthUri",wt(v,p))})).apply(this,arguments)}function Ii(v,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:de()?oe():"http://localhost"},{signinMethods:A}=yield $u((0,j.m9)(v),E);return A||[]})).apply(this,arguments)}function sc(v,p){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(v,p){const m=(0,j.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&js(m.auth,A,p);const{email:k}=yield ki(m.auth,A);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Zd(v,p,m){return po.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&js(E.auth,k,m);const{email:J}=yield io(E.auth,k);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function vr(v,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(v,p){return rt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function go(v,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,j.m9)(v),k={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},J=yield gn(E,vr(E.auth,k));E.displayName=J.displayName||null,E.photoURL=J.photoUrl||null;const De=E.providerData.find(({providerId:Je})=>"password"===Je);De&&(De.displayName=E.displayName,De.photoURL=E.photoURL),yield E._updateTokensIfNecessary(J)})).apply(this,arguments)}function gs(v,p){return mo((0,j.m9)(v),p,null)}function oc(v,p){return mo((0,j.m9)(v),null,p)}function mo(v,p,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(v,p,m){const{auth:E}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(k.email=p),m&&(k.password=m);const J=yield gn(v,Ur(E,k));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class ms{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class Qo extends ms{constructor(p,m,E,A){super(p,m,E),this.username=A}}class Yd extends ms{constructor(p,m){super(p,"facebook.com",m)}}class Gu extends Qo{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class ac extends ms{constructor(p,m){super(p,"google.com",m)}}class Qd extends Qo{constructor(p,m,E){super(p,"twitter.com",m,E)}}function Ua(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Kd(v){var p,m;if(!v)return null;const{providerId:E}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const J=null===(m=null===(p=gt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new ms(k,"anonymous"!==J&&"custom"!==J?J:null)}if(!E)return null;switch(E){case"facebook.com":return new Yd(k,A);case"github.com":return new Gu(k,A);case"google.com":return new ac(k,A);case"twitter.com":return new Qd(k,A,v.screenName||null);case"custom":case"anonymous":return new ms(k,null);default:return new ms(k,E,A)}}(m)}class hn{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new hn("enroll",p,m)}static _fromMfaPendingCredential(p){return new hn("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return hn._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return hn._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cc{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=ur(p),A=m.customData._serverResponse,k=(A.mfaInfo||[]).map(De=>Qn._fromServerResponse(E,De));Y(A.mfaPendingCredential,E,"internal-error");const J=hn._fromMfaPendingCredential(A.mfaPendingCredential);return new cc(J,k,function(){var De=(0,h.Z)(function*(Je){const ht=yield Je._process(E,J);delete A.mfaInfo,delete A.mfaPendingCredential;const Ht=Object.assign(Object.assign({},A),{idToken:ht.idToken,refreshToken:ht.refreshToken});switch(m.operationType){case"signIn":const Tn=yield ai._fromIdTokenResponse(E,m.operationType,Ht);return yield E._updateCurrentUser(Tn.user),Tn;case"reauthenticate":return Y(m.user,E,"internal-error"),ai._forOperation(m.user,m.operationType,Ht);default:Pe(E,"internal-error")}});return function(Je){return De.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function Xd(v,p){var m;const E=(0,j.m9)(v),A=p;return Y(p.customData.operationType,E,"argument-error"),Y(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),cc._fromError(E,A)}function wr(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:start",wt(v,p))}class dc{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Qn._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new dc(p)}getSession(){var p=this;return(0,h.Z)(function*(){return hn._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const A=p,k=yield E.getSession(),J=yield gn(E.user,A._process(E.user.auth,k,m));return yield E.user._updateTokensIfNecessary(J),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield m.user.getIdToken();try{const k=yield gn(m.user,function pp(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(v,p))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:J})=>J!==E),yield m.user._updateTokensIfNecessary(k),yield m.user.reload()}catch(k){throw k}})()}}const Xo=new WeakMap;function Jo(v){const p=(0,j.m9)(v);return Xo.has(p)||Xo.set(p,dc._fromUser(p)),Xo.get(p)}const Hs="__sak";class ys{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Hs,"1"),this.storage.removeItem(Hs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mr=(()=>{class v extends ys{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function yo(){const v=(0,j.z$)();return L(v)||ft(v)}()&&function Ru(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Sr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),k=this.localCache[E];A!==k&&m(E,k,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((De,Je,ht)=>{this.notifyListeners(De,ht)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const De=this.storage.getItem(A);if(m.newValue!==De)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const k=()=>{const De=this.storage.getItem(A);!E&&this.localCache[A]===De||this.notifyListeners(A,De)},J=this.storage.getItem(A);!function kt(){return(0,j.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,k=this;return(0,h.Z)(function*(){yield A().call(k,m,E),k.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,h.Z)(function*(){const k=yield E().call(A,m);return A.localCache[m]=JSON.stringify(k),k})()}_remove(m){var E=()=>super._remove,A=this;return(0,h.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),ea=(()=>{class v extends ys{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let hc=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(k=>k.isListeningto(m));if(E)return E;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const A=m,{eventId:k,eventType:J,data:De}=A.data,Je=E.handlersMap[J];if(!Je?.size)return;A.ports[0].postMessage({status:"ack",eventId:k,eventType:J});const ht=Array.from(Je).map(function(){var Tn=(0,h.Z)(function*(ui){return ui(A.origin,De)});return function(ui){return Tn.apply(this,arguments)}}()),Ht=yield function gp(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(ht);A.ports[0].postMessage({status:"done",eventId:k,eventType:J,response:Ht})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function _s(v="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return v+m}class zu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var A=this;return(0,h.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let J,De;return new Promise((Je,ht)=>{const Ht=_s("",20);k.port1.start();const Tn=setTimeout(()=>{ht(new Error("unsupported_event"))},E);De={messageChannel:k,onMessage(ui){const Ss=ui;if(Ss.data.eventId===Ht)switch(Ss.data.status){case"ack":clearTimeout(Tn),J=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),Je(Ss.data.response);break;default:clearTimeout(Tn),clearTimeout(J),ht(new Error("invalid_response"))}}},A.handlers.add(De),k.port1.addEventListener("message",De.onMessage),A.target.postMessage({eventType:p,eventId:Ht,data:m},[k.port2])}).finally(()=>{De&&A.removeMessageHandler(De)})})()}}function xn(){return window}function Fi(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function Di(){return(Di=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _o="firebaseLocalStorageDb",Gs="firebaseLocalStorage",vo="fbase_key";class vs{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function zs(v,p){return v.transaction([Gs],p?"readwrite":"readonly").objectStore(Gs)}function ws(){const v=indexedDB.open(_o,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Gs,{keyPath:vo})}catch(A){m(A)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Gs)?p(E):(E.close(),yield function Zu(){const v=indexedDB.deleteDatabase(_o);return new vs(v).toPromise()}(),p(yield ws()))}))})}function Ha(v,p,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,h.Z)(function*(v,p,m){const E=zs(v,!0).put({[vo]:p,value:m});return new vs(E).toPromise()})).apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(v,p){const m=zs(v,!1).get(p),E=yield new vs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function wo(v,p){const m=zs(v,!0).delete(p);return new vs(m).toPromise()}const za=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield ws()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const k=yield E._openDb();return yield m(k)}catch(k){if(A++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Fi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=hc._getInstance(function qu(){return Fi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(A,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(A,k){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(A,k){return["keyChanged"]});return function(A,k){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function ja(){return Di.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new zu(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);k&&null!==(E=k[0])&&void 0!==E&&E.fulfilled&&null!==(A=k[0])&&void 0!==A&&A.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function $a(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ws();return yield Ha(m,Hs,"1"),yield wo(m,Hs),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(k=>Ha(k,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const A=yield E._withRetries(k=>function fc(v,p){return Xi.apply(this,arguments)}(k,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(A=>wo(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(J=>{const De=zs(J,!1).getAll();return new vs(De).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],k=new Set;for(const{fbase_key:J,value:De}of E)k.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(De)&&(m.notifyListeners(J,De),A.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!k.has(J)&&(m.notifyListeners(J,null),A.push(J));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const k of Array.from(A))k(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function pc(v,p){return rt(v,"POST","/v2/accounts/mfaSignIn:start",wt(v,p))}function bi(){return(bi=(0,h.Z)(function*(v){return(yield rt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qs(v){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=A=>{const k=Ae("internal-error");k.customData=A,m(k)},E.type="text/javascript",E.charset="UTF-8",function th(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Li(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ei=1e12;class Ji{constructor(p){this.auth=p,this.counter=ei,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new mp(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||ei;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||ei))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||ei))||void 0===E||E.execute(),""})()}}class mp{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;Y(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xu(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eo=Li("rcb"),nh=new Be(3e4,6e4);class yc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=xn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return Y(function Es(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(xn().grecaptcha):new Promise((E,A)=>{const k=xn().setTimeout(()=>{A(Ae(p,"network-request-failed"))},nh.get());xn()[Eo]=()=>{xn().clearTimeout(k),delete xn()[Eo];const De=xn().grecaptcha;if(!De)return void A(Ae(p,"internal-error"));const Je=De.render;De.render=(ht,Ht)=>{const Tn=Je(ht,Ht);return this.counter++,Tn},this.hostLanguage=m,E(De)},qs(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Eo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),A(Ae(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=xn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Za{load(p){return(0,h.Z)(function*(){return new Ji(p)})()}clearedOneInstance(){}}const Io="recaptcha",_c={theme:"light",type:"image"};class vc{constructor(p,m=Object.assign({},_c),E){this.parameters=m,this.type=Io,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ur(E),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;Y(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Za:new yc,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(k=>{const J=De=>{De&&(p.tokenChangeListeners.delete(J),k(De))};p.tokenChangeListeners.add(J),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=xn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){Y(de()&&!Fi(),p.auth,"internal-error"),yield function ta(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function Wa(v){return bi.apply(this,arguments)}(p.auth);Y(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rh{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qi._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function ry(v,p,m){return an.apply(this,arguments)}function an(){return(an=(0,h.Z)(function*(v,p,m){const E=ur(v),A=yield Ya(E,p,(0,j.m9)(m));return new rh(A,k=>jr(E,k))})).apply(this,arguments)}function Is(v,p,m){return wc.apply(this,arguments)}function wc(){return(wc=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v);yield Vs(!1,E,"phone");const A=yield Ya(E.auth,p,(0,j.m9)(m));return new rh(A,k=>Vu(E,k))})).apply(this,arguments)}function yp(v,p,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v),A=yield Ya(E.auth,p,(0,j.m9)(m));return new rh(A,k=>ka(E,k))})).apply(this,arguments)}function Ya(v,p,m){return ih.apply(this,arguments)}function ih(){return(ih=(0,h.Z)(function*(v,p,m){var E;const A=yield m.verify();try{let k;if(Y("string"==typeof A,v,"argument-error"),Y(m.type===Io,v,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const J=k.session;if("phoneNumber"in k)return Y("enroll"===J.type,v,"internal-error"),(yield wr(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Y("signin"===J.type,v,"internal-error");const De=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return Y(De,v,"missing-multi-factor-info"),(yield pc(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:De,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Fu(v,{phoneNumber:k.phoneNumber,recaptchaToken:A});return J}}finally{m._reset()}})).apply(this,arguments)}function iy(v,p){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(v,p){yield uo((0,j.m9)(v),p)})).apply(this,arguments)}let _p=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=ur(m)}verifyPhoneNumber(m,E){return Ya(this.auth,m,(0,j.m9)(E))}static credential(m,E){return qi._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?qi._fromTokenResponse(E,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Do(v,p){return p?Ge(p):(Y(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Fn extends En{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Br(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Br(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Br(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Qa(v){return Wo(v.auth,new Fn(v),v.bypassAuthState)}function ra(v){const{auth:p,user:m}=v;return Y(m,p,"internal-error"),Oa(m,new Fn(v),v.bypassAuthState)}function vp(v){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return Y(m,p,"internal-error"),uo(m,new Fn(v),v.bypassAuthState)})).apply(this,arguments)}class es{constructor(p,m,E,A,k=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:k,tenantId:J,error:De,type:Je}=p;if(De)return void m.reject(De);const ht={auth:m.auth,requestUri:E,sessionId:A,tenantId:J||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Je)(ht))}catch(Ht){m.reject(Ht)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qa;case"linkViaPopup":case"linkViaRedirect":return vp;case"reauthViaPopup":case"reauthViaRedirect":return ra;default:Pe(this.auth,"internal-error")}}resolve(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ju=new Be(2e3,1e4);function ia(v,p,m){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,h.Z)(function*(v,p,m){const E=ur(v);be(v,p,Wi);const A=Do(E,m);return new Gr(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Ec(v,p,m){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v);be(E.auth,p,Wi);const A=Do(E.auth,m);return new Gr(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function sy(v,p,m){return wp.apply(this,arguments)}function wp(){return(wp=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v);be(E.auth,p,Wi);const A=Do(E.auth,m);return new Gr(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let Gr=(()=>{class v extends es{constructor(m,E,A,k,J){super(m,E,k,J),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return Y(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){ve(1===m.filter.length,"Popup operations only handle one event");const E=_s();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ae(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ju.get())};m()}}return v.currentPopupAction=null,v})();const xr=new Map;class dn extends es{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=xr.get(m.auth._key());if(!E){try{const k=(yield function bo(v,p){return tl.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(k)}catch(A){E=()=>Promise.reject(A)}xr.set(m.auth._key(),E)}return m.bypassAuthState||xr.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function tl(){return(tl=(0,h.Z)(function*(v,p){const m=rl(p),E=bc(v);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function Dc(v,p){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(v,p){return bc(v)._set(rl(p),"true")})).apply(this,arguments)}function nl(){xr.clear()}function bs(v,p){xr.set(v._key(),p)}function bc(v){return Ge(v._redirectPersistence)}function rl(v){return B("pendingRedirect",v.config.apiKey,v.name)}function sa(v,p,m){return function il(v,p,m){return Co.apply(this,arguments)}(v,p,m)}function Co(){return(Co=(0,h.Z)(function*(v,p,m){const E=ur(v);be(v,p,Wi),yield E._initializationPromise;const A=Do(E,m);return yield Dc(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function sh(v,p,m){return function b(v,p,m){return C.apply(this,arguments)}(v,p,m)}function C(){return(C=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v);be(E.auth,p,Wi),yield E.auth._initializationPromise;const A=Do(E.auth,m);yield Dc(A,E.auth);const k=yield mt(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function x(v,p,m){return function V(v,p,m){return K.apply(this,arguments)}(v,p,m)}function K(){return(K=(0,h.Z)(function*(v,p,m){const E=(0,j.m9)(v);be(E.auth,p,Wi),yield E.auth._initializationPromise;const A=Do(E.auth,m);yield Vs(!1,E,p.providerId),yield Dc(A,E.auth);const k=yield mt(E);return A._openRedirect(E.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function X(v,p){return he.apply(this,arguments)}function he(){return(he=(0,h.Z)(function*(v,p){return yield ur(v)._initializationPromise,Ye(v,p,!1)})).apply(this,arguments)}function Ye(v,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(v,p,m=!1){const E=ur(v),A=Do(E,p),J=yield new dn(E,A,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield E._persistUserIfCurrent(J.user),yield E._setRedirectUser(null,p)),J})).apply(this,arguments)}function mt(v){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,h.Z)(function*(v){const p=_s(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Rr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Cs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ws(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!Ws(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ae(this.auth,A))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jn(p))}saveEventToCache(p){this.cachedEventUids.add(Jn(p)),this.lastProcessedEventTime=Date.now()}}function Jn(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Ws({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Cn(v){return dt.apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(v,p={}){return rt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Ci=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sl=/^https?/;function ol(){return(ol=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Cn(v);for(const m of p)try{if(b0(m))return}catch{}Pe(v,"unauthorized-domain")})).apply(this,arguments)}function b0(v){const p=oe(),{protocol:m,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===E}if(!sl.test(m))return!1;if(Ci.test(v))return E===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const oh=new Be(3e4,6e4);function oa(){const v=xn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Cc=null;function Tc(v){return Cc=Cc||function Ts(v){return new Promise((p,m)=>{var E,A,k;function J(){oa(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{oa(),m(Ae(v,"network-request-failed"))},timeout:oh.get()})}if(null!==(A=null===(E=xn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(k=xn().gapi)||void 0===k||!k.load){const De=Li("iframefcb");return xn()[De]=()=>{gapi.load?J():m(Ae(v,"network-request-failed"))},qs(`https://apis.google.com/js/api.js?onload=${De}`).catch(Je=>m(Je))}J()}}).catch(p=>{throw Cc=null,p})}(v),Cc}const C0=new Be(5e3,15e3),Xa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aa(v){const p=v.config;Y(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?tt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},A=S0.get(v.config.apiHost);A&&(E.eid=A);const k=v._getFrameworks();return k.length&&(E.fw=k.join(",")),`${m}?${(0,j.xO)(E).slice(1)}`}function Nr(){return Nr=(0,h.Z)(function*(v){const p=yield Tc(v),m=xn().gapi;return Y(m,v,"internal-error"),p.open({where:document.body,url:aa(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xa,dontclear:!0},E=>new Promise(function(){var A=(0,h.Z)(function*(k,J){yield E.restyle({setHideOnLeave:!1});const De=Ae(v,"network-request-failed"),Je=xn().setTimeout(()=>{J(De)},C0.get());function ht(){xn().clearTimeout(Je),k(E)}E.ping(ht).then(ht,()=>{J(De)})});return function(k,J){return A.apply(this,arguments)}}()))}),Nr.apply(this,arguments)}const To={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sc{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function al(v,p,m,E,A,k){Y(v.config.authDomain,v,"auth-domain-config-required"),Y(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:O.SDK_VERSION,eventId:A};if(p instanceof Wi){p.setDefaultLanguage(v.languageCode),J.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Je,ht]of Object.entries(k||{}))J[Je]=ht}if(p instanceof so){const Je=p.getScopes().filter(ht=>""!==ht);Je.length>0&&(J.scopes=Je.join(","))}v.tenantId&&(J.tid=v.tenantId);const De=J;for(const Je of Object.keys(De))void 0===De[Je]&&delete De[Je];return`${function Ja({config:v}){return v.emulator?tt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,j.xO)(De).slice(1)}`}const Ac="webStorageSupport",ch=class Sp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ea,this._completeRedirectFn=Ye,this._overrideRedirectResult=bs}_openPopup(p,m,E,A){var k=this;return(0,h.Z)(function*(){var J;ve(null===(J=k.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const De=al(p,m,E,oe(),A);return function ns(v,p,m,E=500,A=600){const k=Math.max((window.screen.availHeight-A)/2,0).toString(),J=Math.max((window.screen.availWidth-E)/2,0).toString();let De="";const Je=Object.assign(Object.assign({},To),{width:E.toString(),height:A.toString(),top:k,left:J}),ht=(0,j.z$)().toLowerCase();m&&(De=re(ht)?"_blank":m),R(ht)&&(p=p||"http://localhost",Je.scrollbars="yes");const Ht=Object.entries(Je).reduce((ui,[Ss,xc])=>`${ui}${Ss}=${xc},`,"");if(function ar(v=(0,j.z$)()){var p;return ft(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ht)&&"_self"!==De)return function bp(v,p){const m=document.createElement("a");m.href=v,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",De),new Sc(null);const Tn=window.open(p||"",De,Ht);Y(Tn,v,"popup-blocked");try{Tn.focus()}catch{}return new Sc(Tn)}(p,De,_s())})()}_openRedirect(p,m,E,A){var k=this;return(0,h.Z)(function*(){return yield k._originValidation(p),function Ba(v){xn().location.href=v}(al(p,m,E,oe(),A)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:A,promise:k}=this.eventManagers[m];return A?Promise.resolve(A):(ve(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function oy(v){return Nr.apply(this,arguments)}(p),A=new Rr(p);return E.register("authEvent",k=>(Y(k?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:A},m.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ac,{type:Ac},A=>{var k;const J=null===(k=A?.[0])||void 0===k?void 0:k[Ac];void 0!==J&&m(!!J),Pe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ep(v){return ol.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Sr()||L()||ft()}};class dh{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return se("unexpected MultiFactorSessionType")}}}class hh extends dh{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new hh(p)}_finalizeEnroll(p,m,E){return function Jd(v,p){return rt(v,"POST","/v2/accounts/mfaEnrollment:finalize",wt(v,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function qa(v,p){return rt(v,"POST","/v2/accounts/mfaSignIn:finalize",wt(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ap=(()=>{class v{constructor(){}static assertion(m){return hh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var zr="@firebase/auth";class fh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function Or(v){(0,O._registerComponent)(new ae.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:k,authDomain:J}=E.options;return((De,Je)=>{Y(k&&!k.includes(":"),"invalid-api-key",{appName:De.name}),Y(!J?.includes(":"),"argument-error",{appName:De.name});const ht={apiKey:k,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:to(v)},Ht=new Ou(De,Je,ht);return function Xe(v,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(Ge);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,p?.popupRedirectResolver)}(Ht,m),Ht})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ae.wA("auth-internal",p=>{const m=ur(p.getProvider("auth").getImmediate());return new fh(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(zr,"0.21.3",function ul(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(zr,"0.21.3","esm2017")}("Browser")},2090:(pt,Ce,P)=>{P.d(Ce,{$s:()=>nt,BH:()=>xe,G6:()=>we,L:()=>le,LL:()=>cn,Pz:()=>Ae,Sg:()=>be,UG:()=>se,US:()=>ae,ZB:()=>G,ZR:()=>Ze,aH:()=>Pe,b$:()=>Ge,eu:()=>Ue,hl:()=>Re,jU:()=>ve,m9:()=>Xt,ne:()=>Lr,pd:()=>Vn,r3:()=>yi,ru:()=>We,tV:()=>fe,uI:()=>Y,vZ:()=>pn,w1:()=>Xe,xO:()=>or,xb:()=>Kr,z$:()=>je,zI:()=>Be,zd:()=>mr});const te=function(H){const B=[];let W=0;for(let U=0;U<H.length;U++){let R=H.charCodeAt(U);R<128?B[W++]=R:R<2048?(B[W++]=R>>6|192,B[W++]=63&R|128):55296==(64512&R)&&U+1<H.length&&56320==(64512&H.charCodeAt(U+1))?(R=65536+((1023&R)<<10)+(1023&H.charCodeAt(++U)),B[W++]=R>>18|240,B[W++]=R>>12&63|128,B[W++]=R>>6&63|128,B[W++]=63&R|128):(B[W++]=R>>12|224,B[W++]=R>>6&63|128,B[W++]=63&R|128)}return B},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let R=0;R<H.length;R+=3){const L=H[R],re=R+1<H.length,Me=re?H[R+1]:0,lt=R+2<H.length,qe=lt?H[R+2]:0;let yn=(15&Me)<<2|qe>>6,ar=63&qe;lt||(ar=64,re||(yn=64)),U.push(W[L>>2],W[(3&L)<<4|Me>>4],W[yn],W[ar])}return U.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(te(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let W=0,U=0;for(;W<H.length;){const R=H[W++];if(R<128)B[U++]=String.fromCharCode(R);else if(R>191&&R<224){const L=H[W++];B[U++]=String.fromCharCode((31&R)<<6|63&L)}else if(R>239&&R<365){const lt=((7&R)<<18|(63&H[W++])<<12|(63&H[W++])<<6|63&H[W++])-65536;B[U++]=String.fromCharCode(55296+(lt>>10)),B[U++]=String.fromCharCode(56320+(1023&lt))}else{const L=H[W++],re=H[W++];B[U++]=String.fromCharCode((15&R)<<12|(63&L)<<6|63&re)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const W=B?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let R=0;R<H.length;){const L=W[H.charAt(R++)],Me=R<H.length?W[H.charAt(R)]:0;++R;const qe=R<H.length?W[H.charAt(R)]:64;++R;const ft=R<H.length?W[H.charAt(R)]:64;if(++R,null==L||null==Me||null==qe||null==ft)throw Error();U.push(L<<2|Me>>4),64!==qe&&(U.push(Me<<4&240|qe>>2),64!==ft&&U.push(qe<<6&192|ft))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},le=function(H){return function(H){const B=te(H);return ae.encodeByteArray(B,!0)}(H).replace(/\./g,"")},fe=function(H){try{return ae.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function G(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const W in B)!B.hasOwnProperty(W)||!Z(W)||(H[W]=G(H[W],B[W]));return H}function Z(H){return"__proto__"!==H}const pe=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&fe(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},Pe=()=>{var H;return null===(H=pe())||void 0===H?void 0:H.config},Ae=H=>{var B;return null===(B=pe())||void 0===B?void 0:B[`_${H}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,W)=>{this.resolve=B,this.reject=W})}wrapCallback(B){return(W,U)=>{W?this.reject(W):this.resolve(U),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(W):B(W,U))}}}function be(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=B||"demo-project",R=H.iat||0,L=H.sub||H.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const re=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:R,exp:R+3600,auth_time:R,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},H);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(re)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function se(){var H;const B=null===(H=pe())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ve(){return"object"==typeof self&&self.self===self}function We(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ge(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const H=je();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function we(){return!se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Ue(){return new Promise((H,B)=>{try{let W=!0;const U="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(U);R.onsuccess=()=>{R.result.close(),W||self.indexedDB.deleteDatabase(U),H(!0)},R.onupgradeneeded=()=>{W=!1},R.onerror=()=>{var L;B((null===(L=R.error)||void 0===L?void 0:L.message)||"")}}catch(W){B(W)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ze extends Error{constructor(B,W,U){super(W),this.code=B,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}}class cn{constructor(B,W,U){this.service=B,this.serviceName=W,this.errors=U}create(B,...W){const U=W[0]||{},R=`${this.service}/${B}`,L=this.errors[B],re=L?function bt(H,B){return H.replace(wt,(W,U)=>{const R=B[U];return null!=R?String(R):`<${U}?>`})}(L,U):"Error";return new Ze(R,`${this.serviceName}: ${re} (${R}).`,U)}}const wt=/\{\$([^}]+)}/g;function yi(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Kr(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function pn(H,B){if(H===B)return!0;const W=Object.keys(H),U=Object.keys(B);for(const R of W){if(!U.includes(R))return!1;const L=H[R],re=B[R];if(sr(L)&&sr(re)){if(!pn(L,re))return!1}else if(L!==re)return!1}for(const R of U)if(!W.includes(R))return!1;return!0}function sr(H){return null!==H&&"object"==typeof H}function or(H){const B=[];for(const[W,U]of Object.entries(H))Array.isArray(U)?U.forEach(R=>{B.push(encodeURIComponent(W)+"="+encodeURIComponent(R))}):B.push(encodeURIComponent(W)+"="+encodeURIComponent(U));return B.length?"&"+B.join("&"):""}function mr(H){const B={};return H.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[R,L]=U.split("=");B[decodeURIComponent(R)]=decodeURIComponent(L)}}),B}function Vn(H){const B=H.indexOf("?");if(!B)return"";const W=H.indexOf("#",B);return H.substring(B,W>0?W:void 0)}function Lr(H,B){const W=new Nt(H,B);return W.subscribe.bind(W)}class Nt{constructor(B,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{B(this)}).catch(U=>{this.error(U)})}next(B){this.forEachObserver(W=>{W.next(B)})}error(B){this.forEachObserver(W=>{W.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,W,U){let R;if(void 0===B&&void 0===W&&void 0===U)throw new Error("Missing Observer.");R=function xt(H,B){if("object"!=typeof H||null===H)return!1;for(const W of B)if(W in H&&"function"==typeof H[W])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:W,complete:U},void 0===R.next&&(R.next=gn),void 0===R.error&&(R.error=gn),void 0===R.complete&&(R.complete=gn);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),L}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,B)}sendOne(B,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{W(this.observers[B])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}function nt(H,B=1e3,W=2){const U=B*Math.pow(W,H),R=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+R)}function Xt(H){return H&&H._delegate?H._delegate:H}},4032:(pt,Ce,P)=>{var h=P(4650);let j=null;function O(){return j}class ie{}const ae=new h.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function le(){return(0,h.LFG)(z)}()},providedIn:"platform"}),n})();const fe=new h.OlP("Location Initialized");let z=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){G()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){G()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Z(){return new z((0,h.LFG)(ae))}()},providedIn:"platform"}),n})();function G(){return!!window.history.pushState}function $e(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let ot=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Se)},providedIn:"root"}),n})();const pe=new h.OlP("appBaseHref");let Se=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $e(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+ze(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+ze(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ie=(()=>{class n extends ot{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$e(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+ze(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+ze(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function je(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Te(be(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function xe(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=ze,n.joinWithSlash=$e,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(h.LFG(ot))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ae(){return new Pe((0,h.LFG)(ot))}()},providedIn:"root"}),n})();function be(n){return n.replace(/\/index.html$/,"")}class Yn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ki=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Yn(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),vn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{vn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function vn(n,e){n.context.$implicit=e.item}let Br=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),c=-1===s.indexOf("-")?void 0:h.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,s,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Ma=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function nc(n){return"server"===n}let uo=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Na((0,h.LFG)(ae),window)}),n})();class Na{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function lo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Vs(this.window.history)||Vs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Vs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hs extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ys extends Hs{static makeCurrent(){!function te(n){j||(j=n)}(new ys)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function eh(){return yo=yo||document.querySelector("base"),yo?yo.getAttribute("href"):null}();return null==t?null:function Va(n){Qi=Qi||document.createElement("a"),Qi.setAttribute("href",n);const e=Qi.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ur(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Qi,yo=null;const Mr=new h.OlP("TRANSITION_ID"),ea=[{provide:h.ip1,useFactory:function ny(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Mr,ae,h.zs3],multi:!0}];let hc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const _s=new h.OlP("EventManagerPlugins");let zu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_s),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class xn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Ba=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fi=(()=>{class n extends Ba{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ja),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ja))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ja(n){O().remove(n)}const Di={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$a=/%COMP%/g;function zs(n,e){return e.flat(100).map(t=>t.replace($a,n))}function Zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ws=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ha(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new wo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case h.ifc.ShadowDom:return new Ku(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=zs(r.id,r.styles);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zu),h.LFG(Fi),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ha{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Di[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Xi(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Xi(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Di[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Di[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Zu(r)):this.eventManager.addEventListener(e,t,Zu(r))}}function Xi(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wo extends Ha{constructor(e,t,r,s){super(e),this.component=r;const u=zs(s+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function vo(n){return"_ngcontent-%COMP%".replace($a,n)}(s+"-"+r.id),this.hostAttr=function vs(n){return"_nghost-%COMP%".replace($a,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ku extends Ha{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=zs(s.id,s.styles);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ga=(()=>{class n extends xn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yu=["alt","control","meta","shift"],za={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qa=(()=>{class n extends xn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),c="code."),Yu.forEach(D=>{const S=r.indexOf(D);S>-1&&(r.splice(S,1),c+=D+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let s=za[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Yu.forEach(c=>{c!==s&&(0,pc[c])(t)&&(u+=c+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mp=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function gc(){ys.makeCurrent()},multi:!0},{provide:ae,useFactory:function ei(){return(0,h.RDi)(document),document},deps:[]}]),Xu=new h.OlP(""),Eo=[{provide:h.rWj,useClass:class gp{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const g=function(_){c=c||_,u--,0==u&&r(c)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],nh=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Qu(){return new h.qLn},deps:[]},{provide:_s,useClass:Ga,multi:!0,deps:[ae,h.R0b,h.Lbi]},{provide:_s,useClass:qa,multi:!0,deps:[ae]},{provide:ws,useClass:ws,deps:[zu,Fi,h.AFp]},{provide:h.FYo,useExisting:ws},{provide:Ba,useExisting:Fi},{provide:Fi,useClass:Fi,deps:[ae]},{provide:zu,useClass:zu,deps:[_s,h.R0b]},{provide:class Uu{},useClass:hc,deps:[]},[]];let mc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Mr,useExisting:h.AFp},ea]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xu,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...nh,...Eo],imports:[Ma,h.hGG]}),n})(),_c=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Io(){return new _c((0,h.LFG)(ae))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var xr=P(259),dn=P(2122);class bo{constructor(e){return e}}const nl=new h.OlP("angularfire2._apps"),bs={provide:bo,useFactory:function ts(n){return n&&1===n.length?n[0]:new bo((0,xr.Mq)())},deps:[[new h.FiY,nl]]},bc={provide:class tl{constructor(){return(0,xr.C6)()}},deps:[[new h.FiY,nl]]};function rl(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new bo(r)}}let sa=(()=>{class n{constructor(t){(0,xr.KN)("angularfire",dn.q4.full,"core"),(0,xr.KN)("angularfire",dn.q4.full,"app"),(0,xr.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[bs,bc]}),n})();const C=(0,dn.u3)(xr.ZF,!0);var X=P(2011),he=P(8996),Ye=P(9751);const{isArray:ct}=Array,{getPrototypeOf:mt,prototype:Yt,keys:Bt}=Object;function Rr(n){if(1===n.length){const e=n[0];if(ct(e))return{args:e,keys:null};if(function Jn(n){return n&&"object"==typeof n&&mt(n)===Yt}(e)){const t=Bt(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ws=P(8421),Cs=P(7669),Cn=P(5403),dt=P(4004);const{isArray:Ci}=Array;function Ep(n){return(0,dt.U)(e=>function sl(n,e){return Ci(e)?n(...e):n(e)}(n,e))}function ol(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}let oh=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),oa=(()=>{class n extends oh{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Ts=new h.OlP("NgValueAccessor"),C0={provide:Ts,useExisting:(0,h.Gpc)(()=>Xa),multi:!0},ah=new h.OlP("CompositionEventMode");let Xa=(()=>{class n extends oh{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function T0(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ah,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([C0]),h.qOj]}),n})();const Nr=new h.OlP("NgValidators"),To=new h.OlP("NgAsyncValidators");function Ac(n){return null!=n}function Sp(n){return(0,h.QGY)(n)?(0,he.D)(n):n}function ch(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function dh(n,e){return e.map(t=>t(n))}function Ap(n){return n.map(e=>function hh(n){return!n.validate}(e)?e:t=>e.validate(t))}function eu(n){return null!=n?function zr(n){if(!n)return null;const e=n.filter(Ac);return 0==e.length?null:function(t){return ch(dh(t,e))}}(Ap(n)):null}function ul(n){return null!=n?function fh(n){if(!n)return null;const e=n.filter(Ac);return 0==e.length?null:function(t){return function b0(...n){const e=(0,Cs.jO)(n),{args:t,keys:r}=Rr(n),s=new Ye.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let _=c,D=c;for(let S=0;S<c;S++){let N=!1;(0,Ws.Xf)(t[S]).subscribe((0,Cn.x)(u,$=>{N||(N=!0,D--),g[S]=$},()=>_--,void 0,()=>{(!_||!N)&&(D||u.next(r?ol(r,g):g),u.complete())}))}});return e?s.pipe(Ep(e)):s}(dh(t,e).map(Sp)).pipe((0,dt.U)(ch))}}(Ap(n)):null}function Or(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ll(n){return n?Array.isArray(n)?n:[n]:[]}function Mc(n,e){return Array.isArray(n)?n.includes(e):n===e}function Mp(n,e){const t=ll(e);return ll(n).forEach(s=>{Mc(t,s)||t.push(s)}),t}function v(n,e){return ll(e).filter(t=>!Mc(n,t))}class p{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=eu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ul(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class m extends p{get formDirective(){return null}get path(){return null}}class E extends p{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class A{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let De=(()=>{class n extends A{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(E,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Je=(()=>{class n extends A{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(m,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const cl="VALID",mh="INVALID",ru="PENDING",yh="DISABLED";function cy(n){return(_h(n)?n.validators:n)||null}function Op(n,e){return(_h(e)?e.asyncValidators:n)||null}function _h(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class rb{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cl}get invalid(){return this.status===mh}get pending(){return this.status==ru}get disabled(){return this.status===yh}get enabled(){return this.status!==yh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Mp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(v(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(v(e,this._rawAsyncValidators))}hasValidator(e){return Mc(this._rawValidators,e)}hasAsyncValidator(e){return Mc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ru,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yh,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cl||this.status===ru)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yh:cl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ru,this._hasOwnPendingAsyncValidator=!0;const t=Sp(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?yh:this.errors?mh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ru)?ru:this._anyControlsHaveStatus(mh)?mh:cl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_h(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function A0(n){return Array.isArray(n)?eu(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function dl(n){return Array.isArray(n)?ul(n):n||null}(this._rawAsyncValidators)}}class Pc extends rb{constructor(e,t,r){super(cy(t),Op(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function M0(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function dy(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const iu=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>vh}),vh="always";function su(n,e,t=vh){Eh(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function ob(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&N0(n,e)})}(n,e),function ab(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function R0(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&N0(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function hy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Fc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Eh(n,e){const t=function tu(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Or(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function ph(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Or(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Fc(e._rawValidators,s),Fc(e._rawAsyncValidators,s)}function N0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Pp={provide:m,useExisting:(0,h.Gpc)(()=>ua)},fl=(()=>Promise.resolve())();let ua=(()=>{class n extends m{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new Pc({},eu(t),ul(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),su(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fl.then(()=>{const r=this._findContainer(t.path),s=new Pc({});(function O0(n,e){Eh(n,e)})(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function P0(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Nr,10),h.Y36(To,10),h.Y36(iu,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Pp]),h.qOj]}),n})();function py(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gy(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const my=class extends rb{constructor(e=null,t,r){super(cy(t),Op(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_h(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gy(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){py(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){py(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gy(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},DM={provide:E,useExisting:(0,h.Gpc)(()=>bh)},pb=(()=>Promise.resolve())();let bh=(()=>{class n extends E{constructor(t,r,s,u,c,g){super(),this._changeDetectorRef=c,this.callSetDisabledState=g,this.control=new my,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Dh(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Xa?t=u:function vM(n){return Object.getPrototypeOf(n.constructor)===oa}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function fy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){su(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){pb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,s=0!==r&&(0,h.D6c)(r);pb.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function hl(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(m,9),h.Y36(Nr,10),h.Y36(To,10),h.Y36(Ts,10),h.Y36(h.sBO,8),h.Y36(iu,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([DM]),h.qOj,h.TTD]}),n})(),Ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),V0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[V0]}),n})(),ml=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iu,useValue:t.callSetDisabledState??vh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[tw]}),n})();const Lp_firebase={projectId:"learn-firebase-e2173",appId:"1:735091918801:web:a0787f1e17171dd1f302f0",storageBucket:"learn-firebase-e2173.appspot.com",apiKey:"AIzaSyBvcO81GkgfMyMGHkKzOKaDwKsC7kX3XFw",authDomain:"learn-firebase-e2173.firebaseapp.com",messagingSenderId:"735091918801"};function Dt(...n){const e=(0,Cs.yG)(n);return(0,he.D)(n,e)}var au=P(7579);class As extends au.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Up=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var xh=P(4671),bb=P(9672);function Vp(...n){const e=(0,Cs.yG)(n),t=(0,Cs.jO)(n),{args:r,keys:s}=Rr(n);if(0===r.length)return(0,he.D)([],e);const u=new Ye.y(function Cb(n,e,t=xh.y){return r=>{Ny(e,()=>{const{length:s}=n,u=new Array(s);let c=s,g=s;for(let _=0;_<s;_++)Ny(e,()=>{const D=(0,he.D)(n[_],e);let S=!1;D.subscribe((0,Cn.x)(r,N=>{u[_]=N,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>ol(s,c):xh.y));return t?u.pipe(Ep(t)):u}function Ny(n,e,t){n?(0,bb.f)(t,n,e):e()}var Rh=P(8189);function ow(...n){return function sw(){return(0,Rh.J)(1)}()((0,he.D)(n,(0,Cs.yG)(n)))}function aw(n){return new Ye.y(e=>{(0,Ws.Xf)(n()).subscribe(e)})}var Nh=P(9635),Oy=P(576);function Ao(n,e){const t=(0,Oy.m)(n)?n:()=>n,r=s=>s.error(t());return new Ye.y(e?s=>e.schedule(r,0,s):r)}var Ms=P(515),uw=P(727),ti=P(4482);function ky(){return(0,ti.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Cn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lw extends Ye.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ti.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new uw.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Cn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=uw.w0.EMPTY)}return e}refCount(){return ky()(this)}}function Dr(n,e){return(0,ti.e)((t,r)=>{let s=null,u=0,c=!1;const g=()=>c&&!s&&r.complete();t.subscribe((0,Cn.x)(r,_=>{s?.unsubscribe();let D=0;const S=u++;(0,Ws.Xf)(n(_,S)).subscribe(s=(0,Cn.x)(r,N=>r.next(e?e(_,N,S,D++):N),()=>{s=null,g()}))},()=>{c=!0,g()}))})}function jc(n){return n<=0?()=>Ms.E:(0,ti.e)((e,t)=>{let r=0;e.subscribe((0,Cn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Oh(...n){const e=(0,Cs.yG)(n);return(0,ti.e)((t,r)=>{(e?ow(n,t,e):ow(n,t)).subscribe(r)})}function rs(n,e){return(0,ti.e)((t,r)=>{let s=0;t.subscribe((0,Cn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var ni=P(5577);function Bp(n){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function jp(n=kh){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Cn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function kh(){return new Up}function la(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((s,u)=>n(s,u,r)):xh.y,jc(1),t?Bp(e):jp(()=>new Up))}function yl(n,e){return(0,Oy.m)(e)?(0,ni.z)(n,e,1):(0,ni.z)(n,1)}var li=P(8505);function uu(n){return(0,ti.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Cn.x)(t,void 0,void 0,c=>{u=(0,Ws.Xf)(n(c,uu(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Tb(n,e,t,r,s){return(u,c)=>{let g=t,_=e,D=0;u.subscribe((0,Cn.x)(c,S=>{const N=D++;_=g?n(_,S,N):(g=!0,S),r&&c.next(_)},s&&(()=>{g&&c.next(_),c.complete()})))}}function Ph(n,e){return(0,ti.e)(Tb(n,e,arguments.length>=2,!0))}function Py(n){return n<=0?()=>Ms.E:(0,ti.e)((e,t)=>{let r=[];e.subscribe((0,Cn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function _l(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((s,u)=>n(s,u,r)):xh.y,Py(1),t?Bp(e):jp(()=>new Up))}function $p(n){return(0,ti.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",Hp=Symbol("RouteTitle");class cw{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fh(n){return new cw(n)}function dw(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))s[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Mo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Fy(n[s],e[s]))return!1;return!0}function Fy(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function fw(n){return Array.prototype.concat.apply([],n)}function pw(n){return n.length>0?n[n.length-1]:null}function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function da(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,he.D)(Promise.resolve(n)):Dt(n)}const Gp=!1,Ab={exact:function _w(n,e,t){if(!cu(n.segments,e.segments)||!Lh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_w(n.children[r],e.children[r],t))return!1;return!0},subset:vw},gw={exact:function yw(n,e){return Mo(n,e)},subset:function Mb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fy(n[t],e[t]))},ignored:()=>!0};function mw(n,e,t){return Ab[t.paths](n.root,e.root,t.matrixParams)&&gw[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vw(n,e,t){return Gt(n,e,e.segments,t)}function Gt(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!cu(s,t)||e.hasChildren()||!Lh(s,t,r))}if(n.segments.length===t.length){if(!cu(n.segments,t)||!Lh(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!vw(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(cu(n.segments,s)&&Lh(n.segments,s,r)&&n.children[Qt])&&Gt(n.children[Qt],e,u,r)}}function Lh(n,e,t){return e.every((r,s)=>gw[t](n[s].parameters,r.parameters))}class lu{constructor(e=new tn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return Nb.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ri(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uy(this)}}class Uh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fh(this.parameters)),this._parameterMap}toString(){return kb(this)}}function cu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let $c=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Ly},providedIn:"root"}),n})();class Ly{parse(e){const t=new Ew(e);return new lu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hc(e.root,!0)}`,r=function kM(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Ro(t)}=${Ro(s)}`).join("&"):`${Ro(t)}=${Ro(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ob(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Nb=new Ly;function Uy(n){return n.segments.map(e=>kb(e)).join("/")}function Hc(n,e){if(!n.hasChildren())return Uy(n);if(e){const t=n.children[Qt]?Hc(n.children[Qt],!1):"",r=[];return ri(n.children,(s,u)=>{u!==Qt&&r.push(`${u}:${Hc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Rb(n,e){let t=[];return ri(n.children,(r,s)=>{s===Qt&&(t=t.concat(e(r,s)))}),ri(n.children,(r,s)=>{s!==Qt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Qt?[Hc(n.children[Qt],!1)]:[`${s}:${Hc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${Uy(n)}/${t[0]}`:`${Uy(n)}/(${t.join("//")})`}}function Vy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ro(n){return Vy(n).replace(/%3B/gi,";")}function Vh(n){return Vy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Gc(n){return decodeURIComponent(n)}function ww(n){return Gc(n.replace(/\+/g,"%20"))}function kb(n){return`${Vh(n.path)}${function OM(n){return Object.keys(n).map(e=>`;${Vh(e)}=${Vh(n[e])}`).join("")}(n.parameters)}`}const Pb=/^[^\/()?;=#]+/;function Bh(n){const e=n.match(Pb);return e?e[0]:""}const PM=/^[^=?&#]+/,zc=/^[^&#]+/;class Ew{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new tn(e,t)),r}parseSegment(){const e=Bh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,Gp);return this.capture(e),new Uh(Gc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Bh(this.remaining);s&&(r=s,this.capture(r))}e[Gc(t)]=Gc(r)}parseQueryParam(e){const t=function Fb(n){const e=n.match(PM);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Lb(n){const e=n.match(zc);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=ww(t),u=ww(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bh(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,Gp);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Qt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Qt]:new tn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,Gp)}}function qc(n){return n.segments.length>0?new tn([],{[Qt]:n}):n}function zp(n){const e={};for(const r of Object.keys(n.children)){const u=zp(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Iw(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}function vl(n){return n instanceof lu}function Dw(n,e,t,r,s){if(0===t.length)return wl(e.root,e.root,e.root,r,s);const u=function Wp(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Bb(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return ri(u.outlets,(_,D)=>{g[D]="string"==typeof _?_.split("/"):_}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new Bb(t,e,r)}(t);return u.toRoot()?wl(e.root,e.root,new tn([],{}),r,s):function c(_){const D=function Kc(n,e,t,r){if(n.isAbsolute)return new Zc(e.root,!0,0);if(-1===r)return new Zc(t,t===e.root,0);return function jy(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new Zc(r,!1,s-u)}(t,r+(jh(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),S=D.processChildren?Yc(D.segmentGroup,D.index,u.commands):Zp(D.segmentGroup,D.index,u.commands);return wl(e.root,D.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function jh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wc(n){return"object"==typeof n&&null!=n&&n.outlets}function wl(n,e,t,r,s){let c,u={};r&&ri(r,(_,D)=>{u[D]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),c=n===e?t:qp(n,e,t);const g=qc(zp(c));return new lu(g,u,s)}function qp(n,e,t){const r={};return ri(n.children,(s,u)=>{r[u]=s===e?t:qp(s,e,t)}),new tn(n.segments,r)}class Bb{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&jh(r[0]))throw new h.vHH(4003,!1);const s=r.find(Wc);if(s&&s!==pw(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Zp(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return Yc(n,e,t);const r=function $b(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],g=t[r];if(Wc(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!Jc(_,D,c))return u;r+=2}else{if(!Jc(_,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new tn(n.segments.slice(0,r.pathIndex),{});return u.children[Qt]=new tn(n.segments.slice(r.pathIndex),n.children),Yc(u,0,s)}return r.match&&0===s.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?Qc(n,e,t):r.match?Yc(n,0,s):Qc(n,e,t)}function Yc(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function jb(n){return Wc(n[0])?n[0].outlets:{[Qt]:n}}(t),s={};return!r[Qt]&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length?Yc(n.children[Qt],e,t):(ri(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=Zp(n.children[c],e,u))}),ri(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new tn(n.segments,s))}}function Qc(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Wc(u)){const _=Xc(u.outlets);return new tn(r,_)}if(0===s&&jh(t[0])){r.push(new Uh(n.segments[e].path,Kp(t[0]))),s++;continue}const c=Wc(u)?u.outlets[Qt]:`${u}`,g=s<t.length-1?t[s+1]:null;c&&g&&jh(g)?(r.push(new Uh(c,Kp(g))),s+=2):(r.push(new Uh(c,{})),s++)}return new tn(r,{})}function Xc(n){const e={};return ri(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Qc(new tn([],{}),0,t))}),e}function Kp(n){const e={};return ri(n,(t,r)=>e[r]=`${t}`),e}function Jc(n,e,t){return n==t.path&&Mo(e,t.parameters)}const El="imperative";class is{constructor(e,t){this.id=e,this.url=t}}class Yp extends is{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ha extends is{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ed extends is{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qp extends is{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class $y extends is{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hy extends is{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hb extends is{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gb extends is{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bw extends is{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zb extends is{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cw{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tw{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wb{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ss{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sw{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aw{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let xw=(()=>{class n{createUrlTree(t,r,s,u,c,g){return Dw(t||r.root,s,u,c,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Zb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return xw.\u0275fac(e)},providedIn:"root"}),n})();class Rw{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Xp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Xp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Gy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Gy(e,this._root).map(t=>t.value)}}function Xp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Xp(n,t);if(r)return r}return null}function Gy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Gy(n,t);if(r.length)return r.unshift(e),r}return[]}class fa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function du(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Nw extends Rw{constructor(e,t){super(e),this.snapshot=t,zy(this,e)}toString(){return this.snapshot.toString()}}function Ow(n,e){const t=function Kb(n,e){const c=new nd([],{},{},"",{},Qt,e,null,n.root,-1,{});return new Pw("",new fa(c,[]))}(n,e),r=new As([new Uh("",{})]),s=new As({}),u=new As({}),c=new As({}),g=new As(""),_=new td(r,s,c,g,u,Qt,e,t.root);return _.snapshot=t.root,new Nw(new fa(_,[]),t)}class td{constructor(e,t,r,s,u,c,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.title=this.data?.pipe((0,dt.U)(D=>D[Hp]))??Dt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>Fh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>Fh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kw(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function No(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class nd{get title(){return this.data?.[Hp]}constructor(e,t,r,s,u,c,g,_,D,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.routeConfig=_,this._urlSegment=D,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pw extends Rw{constructor(e,t){super(t),this.url=e,zy(this,t)}toString(){return qy(this._root)}}function zy(n,e){e.value._routerState=n,e.children.forEach(t=>zy(n,t))}function qy(n){const e=n.children.length>0?` { ${n.children.map(qy).join(", ")} } `:"";return`${n.value}${e}`}function Wy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mo(e.params,t.params)||n.params.next(t.params),function hw(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Zy(n,e){const t=Mo(n.params,e.params)&&function xb(n,e){return cu(n,e)&&n.every((t,r)=>Mo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Zy(n.parent,e.parent))}function Il(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Qb(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Il(n,r,s);return Il(n,r)})}(n,e,t);return new fa(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Il(n,g)),c}}const r=function Xb(n){return new td(new As(n.url),new As(n.params),new As(n.queryParams),new As(n.fragment),new As(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Il(n,u));return new fa(r,s)}}const rd="ngNavigationCancelingError";function Jp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=vl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=$h(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function $h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[rd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Jb(n){return eg(n)&&vl(n.url)}function eg(n){return n&&n[rd]}class BM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new id,this.attachRef=null}}let id=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new BM,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hh=!1;let tg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(id),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Hh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Hh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Hh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Hh);this._activatedRoute=t;const s=this.location,c=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new Fw(t,g,s.injector);if(r&&function Ky(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(c);this.activated=s.createComponent(D,s.length,_)}else this.activated=s.createComponent(c,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class Fw{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===td?this.route:e===id?this.childContexts:this.parent.get(e,t)}}let Zs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[tg],encapsulation:2}),n})();function Gh(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qy(n){const e=n.children&&n.children.map(Qy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=Zs),t}function Ks(n){return n.outlet||Qt}function Lw(n,e){const t=n.filter(r=>Ks(r)===e);return t.push(...n.filter(r=>Ks(r)!==e)),t}function qh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class iC{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=du(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),ri(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=du(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=du(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=du(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Sw(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Wb(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Wy(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),Wy(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=qh(s.snapshot),_=g?.get(h._Vd)??null;c.attachRef=null,c.route=s,c.resolver=_,c.injector=g,c.outlet&&c.outlet.activateWith(s,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Uw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ig{constructor(e,t){this.component=e,this.route=t}}function sC(n,e,t){const r=n._root;return Wh(r,e?e._root:null,t,[r.value])}function hu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Wh(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=du(e);return n.children.forEach(c=>{(function Xy(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function oC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!cu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cu(n.url,e.url)||!Mo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zy(n,e)||!Mo(n.queryParams,e.queryParams);default:return!Zy(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new Uw(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Wh(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new ig(g.outlet.component,c))}else c&&Zh(e,g,s),s.canActivateChecks.push(new Uw(r)),Wh(n,null,u.component?g?g.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),ri(u,(c,g)=>Zh(c,t.getContext(g),s)),s}function Zh(n,e,t){const r=du(n),s=n.value;ri(r,(u,c)=>{Zh(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ig(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Kh(n){return"function"==typeof n}function sg(n){return n instanceof Up||"EmptyError"===n?.name}const Dl=Symbol("INITIAL_VALUE");function xs(){return Dr(n=>Vp(n.map(e=>e.pipe(jc(1),Oh(Dl)))).pipe((0,dt.U)(e=>{for(const t of e)if(!0!==t){if(t===Dl)return Dl;if(!1===t||t instanceof lu)return t}return!0}),rs(e=>e!==Dl),jc(1)))}function fu(n){return(0,Nh.z)((0,li.b)(e=>{if(vl(e))throw Jp(0,e)}),(0,dt.U)(e=>!0===e))}const Ui={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ug(n,e,t,r,s){const u=pu(n,e,t);return u.matched?function ag(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Dt(s.map(c=>{const g=hu(c,n);return da(function jw(n){return n&&Kh(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(xs(),fu()):Dt(!0)}(r=Gh(e,r),e,t).pipe((0,dt.U)(c=>!0===c?u:{...Ui})):Dt(u)}function pu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Ui}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||dw)(t,n,e);if(!s)return{...Ui};const u={};ri(s.posParams,(g,_)=>{u[_]=g.path});const c=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:c,positionalParamSegments:s.posParams??{}}}function pa(n,e,t,r){if(t.length>0&&function ad(n,e,t){return t.some(r=>ga(n,e,r)&&Ks(r)!==Qt)}(n,t,r)){const u=new tn(e,function od(n,e,t,r){const s={};s[Qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ks(u)!==Qt){const c=new tn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[Ks(u)]=c}return s}(n,e,r,new tn(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function ud(n,e,t){return t.some(r=>ga(n,e,r))}(n,t,r)){const u=new tn(n.segments,function sd(n,e,t,r,s){const u={};for(const c of r)if(ga(n,t,c)&&!s[Ks(c)]){const g=new tn([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[Ks(c)]=g}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new tn(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function ga(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function bl(n,e,t,r){return!!(Ks(n)===r||r!==Qt&&ga(e,t,n))&&("**"===n.path||pu(e,n,t).matched)}function Cl(n,e,t){return 0===e.length&&!n.children[t]}const Qh=!1;class Xh{constructor(e){this.segmentGroup=e||null}}class e_{constructor(e){this.urlTree=e}}function ld(n){return Ao(new Xh(n))}function t_(n){return Ao(new e_(n))}class zw{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=pa(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Qt).pipe((0,dt.U)(u=>this.createUrlTree(zp(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(uu(u=>{if(u instanceof e_)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Xh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Qt).pipe((0,dt.U)(s=>this.createUrlTree(zp(s),e.queryParams,e.fragment))).pipe(uu(s=>{throw s instanceof Xh?this.noMatchError(s):s}))}noMatchError(e){return new h.vHH(4002,Qh)}createUrlTree(e,t,r){const s=qc(e);return new lu(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(u=>new tn([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,he.D)(s).pipe(yl(u=>{const c=r.children[u],g=Lw(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,dt.U)(_=>({segment:_,outlet:u})))}),Ph((u,c)=>(u[c.outlet]=c.segment,u),{}),_l())}expandSegment(e,t,r,s,u,c){return(0,he.D)(r).pipe(yl(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,c).pipe(uu(D=>{if(D instanceof Xh)return Dt(null);throw D}))),la(g=>!!g),uu((g,_)=>{if(sg(g))return Cl(t,s,u)?Dt(new tn([],{})):ld(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,c,g){return bl(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):ld(t):ld(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?t_(u):this.lineralizeSegments(r,u).pipe((0,ni.z)(c=>{const g=new tn(c,{});return this.expandSegment(e,g,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:S}=pu(t,s,u);if(!g)return ld(t);const N=this.applyRedirectCommands(_,s.redirectTo,S);return s.redirectTo.startsWith("/")?t_(N):this.lineralizeSegments(s,N).pipe((0,ni.z)($=>this.expandSegment(e,t,r,$.concat(D),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=Gh(r,e),r.loadChildren?(r._loadedRoutes?Dt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new tn(s,{})))):Dt(new tn(s,{}))):ug(t,r,s,e).pipe(Dr(({matched:c,consumedSegments:g,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,s).pipe((0,ni.z)(S=>{const N=S.injector??e,$=S.routes,{segmentGroup:Q,slicedSegments:ne}=pa(t,g,_,$),Oe=new tn(Q.segments,Q.children);if(0===ne.length&&Oe.hasChildren())return this.expandChildren(N,$,Oe).pipe((0,dt.U)(It=>new tn(g,It)));if(0===$.length&&0===ne.length)return Dt(new tn(g,{}));const ke=Ks(r)===u;return this.expandSegment(N,Oe,$,ne,ke?Qt:u,!0).pipe((0,dt.U)(Ft=>new tn(g.concat(Ft.segments),Ft.children)))})):ld(t)))}getChildConfig(e,t,r){return t.children?Dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function ci(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Dt(!0):Dt(s.map(c=>{const g=hu(c,n);return da(function uC(n){return n&&Kh(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(xs(),fu())}(e,t,r).pipe((0,ni.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,li.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Hw(n){return Ao($h(Qh,3))}())):Dt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Dt(r);if(s.numberOfChildren>1||!s.children[Qt])return Ao(new h.vHH(4e3,Qh));s=s.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new lu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ri(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return ri(t.children,(g,_)=>{c[_]=this.createSegmentGroup(e,g,r,s)}),new tn(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,Qh);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class Ww{}class n_{constructor(e,t,r,s,u,c,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=c,this.urlSerializer=g}recognize(){const e=pa(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe((0,dt.U)(t=>{if(null===t)return null;const r=new nd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new fa(r,t),u=new Pw(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=kw(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,he.D)(Object.keys(r.children)).pipe(yl(s=>{const u=r.children[s],c=Lw(t,s);return this.processSegmentGroup(e,c,u,s)}),Ph((s,u)=>s&&u?(s.push(...u),s):null),function ca(n,e=!1){return(0,ti.e)((t,r)=>{let s=0;t.subscribe((0,Cn.x)(r,u=>{const c=n(u,s++);(c||e)&&r.next(u),!c&&r.complete()}))})}(s=>null!==s),Bp(null),_l(),(0,dt.U)(s=>{if(null===s)return null;const u=Jh(s);return function r_(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,he.D)(t).pipe(yl(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,s,u)),la(c=>!!c),uu(c=>{if(sg(c))return Cl(r,s,u)?Dt([]):Dt(null);throw c}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!bl(t,r,s,u))return Dt(null);let c;if("**"===t.path){const g=s.length>0?pw(s).parameters:{},_=cg(r)+s.length;c=Dt({snapshot:new nd(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s_(t),Ks(t),t.component??t._loadedComponent??null,t,Zw(r),_,o_(t)),consumedSegments:[],remainingSegments:[]})}else c=ug(r,t,s,e).pipe((0,dt.U)(({matched:g,consumedSegments:_,remainingSegments:D,parameters:S})=>{if(!g)return null;const N=cg(r)+_.length;return{snapshot:new nd(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s_(t),Ks(t),t.component??t._loadedComponent??null,t,Zw(r),N,o_(t)),consumedSegments:_,remainingSegments:D}}));return c.pipe(Dr(g=>{if(null===g)return Dt(null);const{snapshot:_,consumedSegments:D,remainingSegments:S}=g;e=t._injector??e;const N=t._loadedInjector??e,$=function yC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:ne}=pa(r,D,S,$.filter(ke=>void 0===ke.redirectTo));if(0===ne.length&&Q.hasChildren())return this.processChildren(N,$,Q).pipe((0,dt.U)(ke=>null===ke?null:[new fa(_,ke)]));if(0===$.length&&0===ne.length)return Dt([new fa(_,[])]);const Oe=Ks(t)===u;return this.processSegment(N,$,Q,ne,Oe?Qt:u).pipe((0,dt.U)(ke=>null===ke?null:[new fa(_,ke)]))}))}}function lg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Jh(n){const e=[],t=new Set;for(const r of n){if(!lg(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Jh(r.children);e.push(new fa(r.value,s))}return e.filter(r=>!t.has(r))}function Zw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cg(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function s_(n){return n.data||{}}function o_(n){return n.resolve||{}}function l_(n){return"string"==typeof n.title||null===n.title}function dg(n){return Dr(e=>{const t=n(e);return t?(0,he.D)(t).pipe((0,dt.U)(()=>e)):Dt(e)})}const cd=new h.OlP("ROUTES");let d_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=da(t.loadComponent()).pipe((0,dt.U)(hg),(0,li.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),$p(()=>{this.componentLoaders.delete(t)})),s=new lw(r,()=>new au.x).pipe(ky());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D,S=!1;Array.isArray(g)?D=g:(_=g.create(t).injector,D=fw(_.get(cd,[],h.XFs.Self|h.XFs.Optional)));return{routes:D.map(Qy),injector:_}}),$p(()=>{this.childrenLoaders.delete(r)})),c=new lw(u,()=>new au.x).pipe(ky());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return da(t()).pipe((0,dt.U)(hg),(0,ni.z)(s=>s instanceof h.YKP||Array.isArray(s)?Dt(s):(0,he.D)(this.compiler.compileModuleAsync(s))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hg(n){return function vC(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ef=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new au.x,this.configLoader=(0,h.f3M)(d_),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)($c),this.rootContexts=(0,h.f3M)(id),this.navigationId=0,this.afterPreactivation=()=>Dt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Tw(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Cw(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new As({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:El,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rs(r=>0!==r.id),(0,dt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Dr(r=>{let s=!1,u=!1;return Dt(r).pipe((0,li.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Dr(c=>{const g=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Qp(c.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),Ms.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return h_(c.source)&&(t.browserUrlTree=c.extractedUrl),Dt(c).pipe(Dr(S=>{const N=this.transitions?.getValue();return this.events.next(new Yp(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Ms.E:Promise.resolve(S)}),function pC(n,e,t,r){return Dr(s=>function Gw(n,e,t,r,s){return new zw(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,dt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,li.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function a_(n,e,t,r,s){return(0,ni.z)(u=>function mC(n,e,t,r,s,u,c="emptyOnly"){return new n_(n,e,t,r,s,c,u).recognize().pipe(Dr(g=>null===g?function gC(n){return new Ye.y(e=>e.error(n))}(new Ww):Dt(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,dt.U)(c=>({...u,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,li.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl($,S)}t.browserUrlTree=S.urlAfterRedirects}const N=new Hy(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:N,source:$,restoredState:Q,extras:ne}=c,Oe=new Yp(S,this.urlSerializer.serialize(N),$,Q);this.events.next(Oe);const ke=Ow(N,this.rootComponentType).snapshot;return Dt(r={...c,targetSnapshot:ke,urlAfterRedirects:N,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Qp(c.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),Ms.E}}),(0,li.b)(c=>{const g=new Hb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(g)}),(0,dt.U)(c=>r={...c,guards:sC(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function GM(n,e){return(0,ni.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Dt({...t,guardsResult:!0}):function og(n,e,t,r){return(0,he.D)(n).pipe((0,ni.z)(s=>function Yh(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Dt(u.map(g=>{const _=qh(e)??s,D=hu(g,_);return da(function Bw(n){return n&&Kh(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(la())})).pipe(xs()):Dt(!0)}(s.component,s.route,t,e,r)),la(s=>!0!==s,!0))}(c,r,s,n).pipe((0,ni.z)(g=>g&&function aC(n){return"boolean"==typeof n}(g)?function dC(n,e,t,r){return(0,he.D)(e).pipe(yl(s=>ow(function Jy(n,e){return null!==n&&e&&e(new qb(n)),Dt(!0)}(s.route.parent,r),function hC(n,e){return null!==n&&e&&e(new ss(n)),Dt(!0)}(s.route,r),function Oo(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function Vw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>aw(()=>Dt(c.guards.map(_=>{const D=qh(c.node)??t,S=hu(_,D);return da(function cC(n){return n&&Kh(n.canActivateChild)}(S)?S.canActivateChild(r,n):D.runInContext(()=>S(r,n))).pipe(la())})).pipe(xs())));return Dt(u).pipe(xs())}(n,s.path,t),function fC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Dt(!0);const s=r.map(u=>aw(()=>{const c=qh(e)??t,g=hu(u,c);return da(function lC(n){return n&&Kh(n.canActivate)}(g)?g.canActivate(e,n):c.runInContext(()=>g(e,n))).pipe(la())}));return Dt(s).pipe(xs())}(n,s.route,t))),la(s=>!0!==s,!0))}(r,u,n,e):Dt(g)),(0,dt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,c=>this.events.next(c)),(0,li.b)(c=>{if(r.guardsResult=c.guardsResult,vl(c.guardsResult))throw Jp(0,c.guardsResult);const g=new Gb(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(g)}),rs(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),dg(c=>{if(c.guards.canActivateChecks.length)return Dt(c).pipe((0,li.b)(g=>{const _=new bw(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Dr(g=>{let _=!1;return Dt(g).pipe(function Yw(n,e){return(0,ni.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Dt(t);let u=0;return(0,he.D)(s).pipe(yl(c=>function Qw(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!l_(s)&&(u[Hp]=s.title),function u_(n,e,t,r){const s=function Xw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Dt({});const u={};return(0,he.D)(s).pipe((0,ni.z)(c=>function _C(n,e,t,r){const s=qh(e)??r,u=hu(n,s);return da(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(la(),(0,li.b)(g=>{u[c]=g}))),Py(1),function Sb(n){return(0,dt.U)(()=>n)}(u),uu(c=>sg(c)?Ms.E:Ao(c)))}(u,n,e,r).pipe((0,dt.U)(c=>(n._resolvedData=c,n.data=kw(n,t).resolve,s&&l_(s)&&(n.data[Hp]=s.title),null)))}(c.route,r,n,e)),(0,li.b)(()=>u++),Py(1),(0,ni.z)(c=>u===s.length?Dt(t):Ms.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,li.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,li.b)(g=>{const _=new zb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),dg(c=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,li.b)(S=>{_.component=S}),(0,dt.U)(()=>{})));for(const S of _.children)D.push(...g(S));return D};return Vp(g(c.targetSnapshot.root)).pipe(Bp(),jc(1))}),dg(()=>this.afterPreactivation()),(0,dt.U)(c=>{const g=function Yb(n,e,t){const r=Il(n,e._root,t?t._root:void 0);return new Nw(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:g}}),(0,li.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new iC(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,li.b)({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new ha(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),$p(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),uu(c=>{if(u=!0,eg(c)){Jb(c)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new ed(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(g),Jb(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||h_(r.source)};t.scheduleNavigation(_,El,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new $y(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return Ms.E}))}))}cancelNavigationTransition(t,r,s){const u=new ed(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function h_(n){return n!==El}let f_=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[Hp]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(eE)},providedIn:"root"}),n})(),eE=(()=>{class n extends f_{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_c))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(rE)},providedIn:"root"}),n})();class nE{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let rE=(()=>{class n extends nE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tl=new h.OlP("",{providedIn:"root",factory:()=>({})});let gu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wC)},providedIn:"root"}),n})(),wC=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function p_(n){throw n}function Sl(n,e,t){return e.parse("/")}const g_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},EC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let di=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Tl,{optional:!0})||{},this.errorHandler=this.options.errorHandler||p_,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Sl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(gu),this.routeReuseStrategy=(0,h.f3M)(tE),this.urlCreationStrategy=(0,h.f3M)(Zb),this.titleStrategy=(0,h.f3M)(f_),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=fw((0,h.f3M)(cd,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(ef),this.urlSerializer=(0,h.f3M)($c),this.location=(0,h.f3M)(Pe),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new lu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ow(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),El,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},c=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,c,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Qy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:c;let S=null;switch(g){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=vl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,El,null,r)}navigate(t,r={skipLocationChange:!1}){return function zM(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...g_}:!1===r?{...EC}:r,vl(t))return mw(this.currentUrlTree,t,s);const u=this.parseUrl(t);return mw(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,c){if(this.disposed)return Promise.resolve(!1);let g,_,D,S;return c?(g=c.resolve,_=c.reject,D=c.promise):D=new Promise((N,$)=>{g=N,_=$}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===s?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class m_{}let aE=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(rs(t=>t instanceof ha),yl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,g=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?s.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,he.D)(s).pipe((0,Rh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Dt(null);const u=s.pipe((0,ni.z)(c=>null===c?Dt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,he.D)([u,c]).pipe((0,Rh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(di),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(m_),h.LFG(d_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y_=new h.OlP("");let uE=(()=>{class n{constructor(t,r,s,u,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ha&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Aw&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Aw(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function mu(n,e){return{\u0275kind:n,\u0275providers:e}}function lE(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(di),s=n.get(v_);1===n.get(cE)&&r.initialNavigation(),n.get(hE,null,h.XFs.Optional)?.setUpPreloading(),n.get(y_,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.unsubscribe())}}const v_=new h.OlP("",{factory:()=>new au.x}),cE=new h.OlP("",{providedIn:"root",factory:()=>1});const hE=new h.OlP("");function TC(n){return mu(0,[{provide:hE,useExisting:aE},{provide:m_,useExisting:n}])}const E_=new h.OlP("ROUTER_FORROOT_GUARD"),AC=[Pe,{provide:$c,useClass:Ly},di,id,{provide:td,useFactory:function __(n){return n.routerState.root},deps:[di]},d_,[]];function MC(){return new h.PXZ("Router",di)}let fE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[AC,[],{provide:cd,multi:!0,useValue:t},{provide:E_,useFactory:RC,deps:[[di,new h.FiY,new h.tp0]]},{provide:Tl,useValue:r||{}},r?.useHash?{provide:ot,useClass:Ie}:{provide:ot,useClass:Se},{provide:y_,useFactory:()=>{const n=(0,h.f3M)(uo),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Tl),r=(0,h.f3M)(ef),s=(0,h.f3M)($c);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uE(s,r,n,e,t)}},r?.preloadingStrategy?TC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:MC},r?.initialNavigation?pE(r):[],[{provide:gE,useFactory:lE},{provide:h.tb,multi:!0,useExisting:gE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:cd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(E_,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Zs]}),n})();function RC(n){return"guarded"}function pE(n){return["disabled"===n.initialNavigation?mu(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(di);return()=>{e.setUpLocationChangeListener()}}},{provide:cE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?mu(2,[{provide:cE,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(fe,Promise.resolve());return()=>t.then(()=>new Promise(s=>{const u=e.get(di),c=e.get(v_);(function r(s){e.get(di).events.pipe(rs(c=>c instanceof ha||c instanceof ed||c instanceof $y),(0,dt.U)(c=>c instanceof ha||c instanceof ed&&(0===c.code||1===c.code)&&null),rs(c=>null!==c),jc(1)).subscribe(()=>{s()})})(()=>{s(!0)}),e.get(ef).afterPreactivation=()=>(s(!0),c.closed?Dt(void 0):c),u.initialNavigation()}))}}]).\u0275providers:[]]}const gE=new h.OlP("");var fg=P(2722),Kt=P(2090),Rs=P(9681),ya=P(1877),_u=P(4859),pg=P(6451),nf=P(5363),yE=P(6063);class _E extends au.x{constructor(e=1/0,t=1/0,r=yE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)g=_;g&&r.splice(0,g+1)}}}var vE=P(3099);function D_(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,vE.B)({connector:()=>new _E(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function b_(n,e){return(0,Oy.m)(e)?Dr(()=>n,e):Dr(()=>n)}var gg=P(9468),ye=P(5861);const C_=new Map,wE={activated:!1,tokenObservers:[]},OC={initialized:!1,enabled:!1};function ii(n){return C_.get(n)||Object.assign({},wE)}function mg(){return OC}class VC{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Kt.BH,yield function BC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Kt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Si=new Kt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function IE(n){if(!ii(n).activated)throw Si.create("use-before-activation",{appName:n.name})}function vg(n,e){return wg.apply(this,arguments)}function wg(){return(wg=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(N){throw Si.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==c.status)throw Si.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(N){throw Si.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+D,issuedAtTimeMillis:S}})).apply(this,arguments)}function CE(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const hd="firebase-app-check-store";let Fo=null;function AE(){return Fo||(Fo=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(Si.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hd,{keyPath:"compositeKey"})}}catch(t){e(Si.create("storage-open",{originalErrorMessage:t?.message}))}}),Fo)}function Eg(){return(Eg=(0,ye.Z)(function*(n,e){const r=(yield AE()).transaction(hd,"readwrite"),u=r.objectStore(hd).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var D;g(Si.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const sf=new ya.Yd("@firebase/app-check");function vu(n,e){return(0,Kt.hl)()?function fd(n,e){return function HC(n,e){return Eg.apply(this,arguments)}(function At(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{sf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function af(){return mg().enabled}function $n(){return xE.apply(this,arguments)}function xE(){return(xE=(0,ye.Z)(function*(){const n=mg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const NE={error:"UNKNOWN_ERROR"};function qC(n){return Kt.US.encodeString(JSON.stringify(n),!1)}function uf(n){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ye.Z)(function*(n,e=!1){const t=n.app;IE(t);const r=ii(t);let u,s=r.token;if(s&&!Lo(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(Lo(_)?s=_:yield vu(t,void 0))}if(!e&&s&&Lo(s))return{token:s.token};let g,c=!1;if(af()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vg(CE(t,yield $n()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield vu(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),s=yield ii(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?sf.warn(_.message):sf.error(_),u=_}return s?u?g=Lo(s)?{token:s.token,internalError:u}:PE(u):(g={token:s.token},r.token=s,yield vu(t,s)):g=PE(u),c&&kE(t,g),g})).apply(this,arguments)}function bg(n,e){const t=ii(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function OE(n){const{app:e}=n,t=ii(e);let r=t.tokenRefresher;r||(r=function WC(n){const{app:e}=n;return new VC((0,ye.Z)(function*(){let r;if(r=ii(e).token?yield uf(n,!0):yield uf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kE(n,e){const t=ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Lo(n){return n.expireTimeMillis-Date.now()>0}function PE(n){return{token:qC(NE),error:n}}class ZC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ii(this.app);for(const t of e)bg(this.app,t.next);return Promise.resolve()}}const gd="app-check-internal";!function tT(){(0,Rs._registerComponent)(new _u.wA("app-check",n=>function KC(n,e){return new ZC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gd).initialize()})),(0,Rs._registerComponent)(new _u.wA(gd,n=>function Cg(n){return{getToken:e=>uf(n,e),addTokenListener:e=>function Dg(n,e,t,r){const{app:s}=n,u=ii(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Lo(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),OE(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>OE(n))}(n,"INTERNAL",e),removeTokenListener:e=>bg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rs.registerVersion)("@firebase/app-check","0.6.3")}();class Ag{constructor(){return(0,dn.vb)("app-check")}}typeof window<"u"&&window,P(9260);const YE=new h.OlP("angularfire2.auth.use-emulator"),QE=new h.OlP("angularfire2.auth.settings"),XE=new h.OlP("angularfire2.auth.tenant-id"),Mg=new h.OlP("angularfire2.auth.langugage-code"),JE=new h.OlP("angularfire2.auth.use-device-language"),F_=new h.OlP("angularfire.auth.persistence"),eI=(n,e,t,r,s,u,c,g)=>(0,X.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),c)for(const[D,S]of Object.entries(c))_.settings[D]=S;return g&&_.setPersistence(g),_},[t,r,s,u,c,g]);let L_=(()=>{class n{constructor(t,r,s,u,c,g,_,D,S,N,$,Q){const ne=new au.x,Oe=Dt(void 0).pipe((0,nf.Q)(c.outsideAngular),Dr(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9568)))),(0,dt.U)(()=>(0,X.on)(t,u,r)),(0,dt.U)(ke=>eI(ke,u,g,D,S,N,_,$)),D_({bufferSize:1,refCount:!1}));if(nc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Dt(null);else{Oe.pipe(la()).subscribe();const Pt=Oe.pipe(Dr(vt=>vt.getRedirectResult().then(Ot=>Ot,()=>null)),dn.iC,D_({bufferSize:1,refCount:!1})),Ft=Oe.pipe(Dr(vt=>new Ye.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>vt.onAuthStateChanged(qt=>Ot.next(qt),qt=>Ot.error(qt),()=>Ot.complete()))})))),It=Oe.pipe(Dr(vt=>new Ye.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>vt.onIdTokenChanged(qt=>Ot.next(qt),qt=>Ot.error(qt),()=>Ot.complete()))}))));this.authState=Pt.pipe(b_(Ft),(0,gg.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular)),this.user=Pt.pipe(b_(It),(0,gg.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dr(vt=>vt?(0,he.D)(vt.getIdToken()):Dt(null))),this.idTokenResult=this.user.pipe(Dr(vt=>vt?(0,he.D)(vt.getIdTokenResult()):Dt(null))),this.credential=(0,pg.T)(Pt,ne,this.authState.pipe(rs(vt=>!vt))).pipe((0,dt.U)(vt=>vt?.user?vt:null),(0,gg.R)(c.outsideAngular),(0,nf.Q)(c.insideAngular))}return(0,X.pX)(this,Oe,u,{spy:{apply:(ke,Pt,Ft)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&Ft.then(It=>ne.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X.Dh),h.LFG(X.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(YE,8),h.LFG(QE,8),h.LFG(XE,8),h.LFG(Mg,8),h.LFG(JE,8),h.LFG(F_,8),h.LFG(Ag,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Uo{constructor(e,t){this.fireBaseAuth=e,this.router=t}Login(e,t){this.fireBaseAuth.signInWithEmailAndPassword(e,t).then(r=>{localStorage.setItem("token","true"),this.router.navigateByUrl(1==r.user?.emailVerified?"/dashboard":"/verify-email")},r=>{alert(r.message),this.router.navigateByUrl("/login")})}register(e,t){this.fireBaseAuth.createUserWithEmailAndPassword(e,t).then(r=>{alert("Registering Success."),this.router.navigateByUrl("/login"),console.log(r),console.log(r.user),this.sendEmailForVerification(r.user)},r=>{alert(r.message),this.router.navigateByUrl("/register")})}logout(){this.fireBaseAuth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigateByUrl("/login")},e=>{alert(e.message)})}forgotPassword(e){this.fireBaseAuth.sendPasswordResetEmail(e).then(()=>{this.router.navigateByUrl("/verify-email")},t=>{alert("Something Went Wrong.")})}sendEmailForVerification(e){e?.sendEmailVerification().then(t=>{this.router.navigateByUrl("/verify-email")},t=>{alert("SomeThing Went Wrong, Not Able To Send Mail To Your Email.")})}signUpWithGoogle(){this.fireBaseAuth.signInWithPopup(new fg.Q).then(e=>{this.router.navigateByUrl("dashboard"),localStorage.setItem("token",JSON.stringify(e.user?.uid))},e=>{})}}Uo.\u0275fac=function(e){return new(e||Uo)(h.LFG(L_),h.LFG(di))},Uo.\u0275prov=h.Yz7({token:Uo,factory:Uo.\u0275fac,providedIn:"root"});var tI=P(4986);function U_(){return(0,ti.e)((n,e)=>{let t,r=!1;n.subscribe((0,Cn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function lT(n,e){return n===e}P(9568);var yt,V_=P(3942),dT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_a={},B_=B_||{},zt=dT||self;function xg(){}function md(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ml(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var hf="closure_uid_"+(1e9*Math.random()>>>0),hT=0;function fT(n,e,t){return n.call.apply(n.bind,arguments)}function j_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fT:j_).apply(null,arguments)}function ff(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function er(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,s,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[s].apply(r,c)}}function va(){this.s=this.s,this.o=this.o}va.prototype.s=!1,va.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function nI(n){Object.prototype.hasOwnProperty.call(n,hf)&&n[hf]||(n[hf]=++hT)}(this)},va.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Rg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ng(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(md(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let c=0;c<u;c++)n[s+c]=r[c]}else n.push(r)}}function fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}fi.prototype.h=function(){this.defaultPrevented=!0};var $_=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{zt.addEventListener("test",xg,e),zt.removeEventListener("test",xg,e)}catch{}return n}();function Og(n){return/^[\s\xa0]*$/.test(n)}var H_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function pf(n,e){return n<e?-1:n>e?1:0}function gf(){var n=zt.navigator;return n&&(n=n.userAgent)?n:""}function Ys(n){return-1!=gf().indexOf(n)}function kg(n){return kg[" "](n),n}kg[" "]=xg;var Pg,n,mT=Ys("Opera"),yd=Ys("Trident")||Ys("MSIE"),iI=Ys("Edge"),G_=iI||yd,z_=Ys("Gecko")&&!(-1!=gf().toLowerCase().indexOf("webkit")&&!Ys("Edge"))&&!(Ys("Trident")||Ys("MSIE"))&&!Ys("Edge"),ix=-1!=gf().toLowerCase().indexOf("webkit")&&!Ys("Edge");function q_(){var n=zt.document;return n?n.documentMode:void 0}e:{var W_="",sI=(n=gf(),z_?/rv:([^\);]+)(\)|;)/.exec(n):iI?/Edge\/([\d\.]+)/.exec(n):yd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ix?/WebKit\/(\S+)/.exec(n):mT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(sI&&(W_=sI?sI[1]:""),yd){var Z_=q_();if(null!=Z_&&Z_>parseFloat(W_)){Pg=String(Z_);break e}}Pg=W_}var yT={};var vT=zt.document&&yd&&(q_()||parseInt(Pg,10))||void 0;function mf(n,e){if(fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(z_){e:{try{kg(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:wT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&mf.X.h.call(this)}}er(mf,fi);var wT={2:"touch",3:"pen",4:"mouse"};mf.prototype.h=function(){mf.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var yf="closure_listenable_"+(1e6*Math.random()|0),ET=0;function IT(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=s,this.key=++ET,this.ba=this.ea=!1}function Lg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function xl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function K_(n){const e={};for(const t in n)e[t]=n[t];return e}const Y_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q_(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Y_.length;u++)t=Y_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function _f(n){this.src=n,this.g={},this.h=0}function Ug(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=gT(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Lg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function X_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return s}return-1}_f.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=X_(n,e,r,s);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new IT(e,this.src,u,!!r,s)).ea=t,n.push(e)),e};var J_="closure_lm_"+(1e6*Math.random()|0),aI={};function uI(n,e,t,r,s){if(r&&r.once)return cI(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)uI(n,e[u],t,r,s);return null}return t=vf(t),n&&n[yf]?n.N(e,t,Ml(r)?!!r.capture:!!r,s):lI(n,e,t,!1,r,s)}function lI(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Ml(s)?!!s.capture:!!s,g=Ns(n);if(g||(n[J_]=g=new _f(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function DT(){const e=ev;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)$_||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(hI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cI(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)cI(n,e[u],t,r,s);return null}return t=vf(t),n&&n[yf]?n.O(e,t,Ml(r)?!!r.capture:!!r,s):lI(n,e,t,!0,r,s)}function dI(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)dI(n,e[u],t,r,s);else r=Ml(r)?!!r.capture:!!r,t=vf(t),n&&n[yf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=X_(u=n.g[e],t,r,s))&&(Lg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ns(n))&&(e=n.g[e.toString()],n=-1,e&&(n=X_(e,t,r,s)),(t=-1<n?e[n]:null)&&Rl(t))}function Rl(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[yf])Ug(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ns(e))?(Ug(t,n),0==t.h&&(t.src=null,e[J_]=null)):Lg(n)}}}function hI(n){return n in aI?aI[n]:aI[n]="on"+n}function ev(n,e){if(n.ba)n=!0;else{e=new mf(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Rl(n),n=t.call(r,e)}return n}function Ns(n){return(n=n[J_])instanceof _f?n:null}var tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(n){return"function"==typeof n?n:(n[tv]||(n[tv]=function(e){return n.handleEvent(e)}),n[tv])}function tr(){va.call(this),this.i=new _f(this),this.P=this,this.I=null}function si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new fi(e,n);else if(e instanceof fi)e.target=e.target||n;else{var s=e;Q_(e=new fi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=Vg(c,r,!0,e)&&s}if(s=Vg(c=e.g=n,r,!0,e)&&s,s=Vg(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Vg(c=e.g=t[u],r,!1,e)&&s}function Vg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var g=c.listener,_=c.ha||c.src;c.ea&&Ug(n.i,c),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}er(tr,va),tr.prototype[yf]=!0,tr.prototype.removeEventListener=function(n,e,t,r){dI(this,n,e,t,r)},tr.prototype.M=function(){if(tr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Lg(t[r]);delete n.g[e],n.h--}}this.I=null},tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nv=zt.JSON.stringify;function Bg(){var n=$g;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wf,fI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new bT,n=>n.reset());class bT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pI(n){zt.setTimeout(()=>{throw n},0)}function rv(n,e){wf||function gI(){var n=zt.Promise.resolve(void 0);wf=function(){n.then(mI)}}(),Ef||(wf(),Ef=!0),$g.add(n,e)}var Ef=!1,$g=new class jg{constructor(){this.h=this.g=null}add(e,t){const r=fI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mI(){for(var n;n=Bg();){try{n.h.call(n.g)}catch(t){pI(t)}var e=fI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ef=!1}function _d(n,e){tr.call(this),this.h=n||1,this.g=e||zt,this.j=hi(this.lb,this),this.l=Date.now()}function If(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function iv(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:zt.setTimeout(n,e||0)}function yI(n){n.g=iv(()=>{n.g=null,n.i&&(n.i=!1,yI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}er(_d,tr),(yt=_d.prototype).ca=!1,yt.R=null,yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),si(this,"tick"),this.ca&&(If(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){_d.X.M.call(this),If(this),delete this.g};class CT extends va{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yI(this)}M(){super.M(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Df(n){va.call(this),this.h=n,this.g={}}er(Df,va);var sv=[];function Hg(n,e,t,r){Array.isArray(t)||(t&&(sv[0]=t.toString()),t=sv);for(var s=0;s<t.length;s++){var u=uI(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ov(n){xl(n.g,function(e,t){this.g.hasOwnProperty(t)&&Rl(e)},n),n.g={}}function Gg(){this.g=!0}function vd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function EI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return nv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Df.prototype.M=function(){Df.X.M.call(this),ov(this)},Df.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gg.prototype.Aa=function(){this.g=!1},Gg.prototype.info=function(){};var Nl={},av=null;function zg(){return av=av||new tr}function pi(n){fi.call(this,Nl.Pa,n)}function Vo(n){const e=zg();si(e,new pi(e))}function II(n,e){fi.call(this,Nl.STAT_EVENT,n),this.stat=e}function Ai(n){const e=zg();si(e,new II(e,n))}function TT(n,e){fi.call(this,Nl.Qa,n),this.size=e}function qg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){n()},e)}Nl.Pa="serverreachability",er(pi,fi),Nl.STAT_EVENT="statevent",er(II,fi),Nl.Qa="timingevent",er(TT,fi);var bf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},uv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ol(){}function Wg(){}Ol.prototype.h=null;var cv,Cf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zg(){fi.call(this,"d")}function lv(){fi.call(this,"c")}function Kg(){}function kl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Df(this),this.O=bI,this.T=new _d(n=G_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new dv}function dv(){this.i=null,this.g="",this.h=!1}er(Zg,fi),er(lv,fi),er(Kg,Ol),Kg.prototype.g=function(){return new XMLHttpRequest},Kg.prototype.i=function(){return{}},cv=new Kg;var bI=45e3,wd={},Ed={};function CI(n,e,t){n.K=1,n.v=Xg(Bo(e)),n.s=t,n.P=!0,hv(n,null)}function hv(n,e){n.F=Date.now(),Tf(n),n.A=Bo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),OT(t.i,"t",r),n.C=0,t=n.l.H,n.h=new dv,n.g=$I(n.l,t?e:null,!n.s),0<n.N&&(n.L=new CT(hi(n.La,n,n.g),n.N)),Hg(n.S,n.g,"readystatechange",n.ib),e=n.H?K_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Vo(),function _I(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var S=D[0];D=D[1];var N=S.split("_");c=2<=N.length&&"type"==N[1]?c+(S+"=")+D+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function TI(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function fv(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=Id(n,t),s==Ed){4==e&&(n.o=4,Ai(14),r=!1),vd(n.j,n.m,null,"[Incomplete Response]");break}if(s==wd){n.o=4,Ai(15),vd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vd(n.j,n.m,s,null),SI(n,s)}TI(n)&&s!=Ed&&s!=wd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Dv(e),e.K=!0,Ai(11))):(vd(n.j,n.m,t,"[Invalid Chunked Response]"),Pl(n),Yg(n))}function Id(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ed:(t=Number(e.substring(t,r)),isNaN(t)?wd:(r+=1)+t>e.length?Ed:(e=e.substr(r,t),n.C=r+t,e))}function Tf(n){n.V=Date.now()+n.O,pv(n,n.O)}function pv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qg(hi(n.gb,n),e)}function Dd(n){n.B&&(zt.clearTimeout(n.B),n.B=null)}function Yg(n){0==n.l.G||n.I||bv(n.l,n)}function Pl(n){Dd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,If(n.T),ov(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function SI(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||em(t.h,n)))if(!n.J&&em(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xs(t),um(t)}cm(t),Ai(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=qg(hi(t.cb,t),6e3));if(1>=xf(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Mi(t,11)}else if((n.J||t.g==n)&&Xs(t),!Og(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const S=D[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const N=D[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=D[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const ne=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var u=r.h;u.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(tm(u,u.h),u.h=null))}if(r.D){const Oe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Oe&&(r.za=Oe,Rn(r.F,r.D,Oe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=BT(r,r.H?r.ka:null,r.V),c.J){kT(r.h,c);var g=c,_=r.J;_&&g.setTimeout(_),g.B&&(Dd(g),Tf(g)),r.g=c}else BI(r);0<t.i.length&&Of(t)}else"stop"!=D[0]&&"close"!=D[0]||Mi(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Mi(t,7):Ev(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Vo()}catch{}}function AI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(md(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function AT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(md(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ST(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(md(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(yt=kl.prototype).setTimeout=function(n){this.O=n},yt.ib=function(n){n=n.target;const e=this.L;e&&3==Qs(n)?e.l():this.La(n)},yt.La=function(n){try{if(n==this.g)e:{const S=Qs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||G_||this.g&&(this.h.h||this.g.fa()||LI(this.g)))){this.I||4!=S||7==e||Vo(),Dd(this);var t=this.g.aa();this.Y=t;t:if(TI(this)){var r=LI(this.g);n="";var s=r.length,u=4==Qs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pl(this),Yg(this);var c="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function vI(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Og(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ai(12),Pl(this),Yg(this);break e}vd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,SI(this,t)}this.P?(fv(this,S,c),G_&&this.i&&3==S&&(Hg(this.S,this.T,"tick",this.hb),this.T.start())):(vd(this.j,this.m,c,null),SI(this,c)),4==S&&Pl(this),this.i&&!this.I&&(4==S?bv(this.l,this):(this.i=!1,Tf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ai(12)):(this.o=0,Ai(13)),Pl(this),Yg(this)}}}catch{}},yt.hb=function(){if(this.g){var n=Qs(this.g),e=this.g.fa();this.C<e.length&&(Dd(this),fv(this,n,e),this.i&&4!=n&&Tf(this))}},yt.cancel=function(){this.I=!0,Pl(this)},yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function wI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Vo(),Ai(17)),Pl(this),this.o=2,Yg(this)):pv(this,this.V-n)};var gv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fl){this.h=void 0!==e?e:n.h,Sf(this,n.j),this.s=n.s,this.g=n.g,Qg(this,n.m),this.l=n.l,e=n.i;var t=new Jg;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),xI(this,t),this.o=n.o}else n&&(t=String(n).match(gv))?(this.h=!!e,Sf(this,t[1]||"",!0),this.s=bd(t[2]||""),this.g=bd(t[3]||"",!0),Qg(this,t[4]),this.l=bd(t[5]||"",!0),xI(this,t[6]||"",!0),this.o=bd(t[7]||"")):(this.h=!!e,this.i=new Jg(null,this.h))}function Bo(n){return new Fl(n)}function Sf(n,e,t){n.j=t?bd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xI(n,e,t){e instanceof Jg?(n.i=e,function ox(n,e){e&&!n.j&&(Ll(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(RT(this,r),OT(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Cd(e,sx)),n.i=new Jg(e,n.h))}function Rn(n,e,t){n.i.set(e,t)}function Xg(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function bd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,RI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function RI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cd(e,mv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cd(e,mv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cd(t,"/"==t.charAt(0)?xT:MT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cd(t,NI)),n.join("")};var mv=/[#\/\?@]/g,MT=/[#\?:]/g,xT=/[#\?]/g,sx=/[#\?@]/g,NI=/#/g;function Jg(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ll(n){n.g||(n.g=new Map,n.h=0,n.i&&function MI(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function RT(n,e){Ll(n),e=Af(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function NT(n,e){return Ll(n),e=Af(n,e),n.g.has(e)}function OT(n,e,t){RT(n,e),0<t.length&&(n.i=null,n.g.set(Af(n,e),Rg(t)),n.h+=t.length)}function Af(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Mf(n){this.l=n||ux,n=zt.PerformanceNavigationTiming?0<(n=zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(zt.g&&zt.g.Ga&&zt.g.Ga()&&zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=Jg.prototype).add=function(n,e){Ll(this),this.i=null,n=Af(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){Ll(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},yt.oa=function(){Ll(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},yt.W=function(n){Ll(this);let e=[];if("string"==typeof n)NT(this,n)&&(e=e.concat(this.g.get(Af(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return Ll(this),this.i=null,NT(this,n=Af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var s=u;""!==c[r]&&(s+="="+encodeURIComponent(String(c[r]))),n.push(s)}}return this.i=n.join("&")};var ux=10;function yv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xf(n){return n.h?1:n.g?n.g.size:0}function em(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function tm(n,e){n.g?n.g.add(e):n.h=e}function kT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rg(n.i)}function rm(){}function PT(){this.g=new rm}function OI(n,e,t){const r=t||"";try{AI(n,function(s,u){let c=s;Ml(s)&&(c=nv(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function _v(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Rf(n){this.l=n.ac||null,this.j=n.jb||!1}function im(n,e){tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Td,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mf.prototype.cancel=function(){if(this.i=nm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},rm.prototype.stringify=function(n){return zt.JSON.stringify(n,void 0)},rm.prototype.parse=function(n){return zt.JSON.parse(n,void 0)},er(Rf,Ol),Rf.prototype.g=function(){return new im(this.l,this.j)},Rf.prototype.i=function(n){return function(){return n}}({}),er(im,tr);var Td=0;function kI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function sm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,om(n)}function om(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=im.prototype).open=function(n,e){if(this.readyState!=Td)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,om(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sm(this)),this.readyState=Td},yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,om(this)),this.g&&(this.readyState=3,om(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sm(this):om(this),3==this.readyState&&kI(this)}},yt.Va=function(n){this.g&&(this.response=this.responseText=n,sm(this))},yt.Ua=function(n){this.g&&(this.response=n,sm(this))},yt.ga=function(){this.g&&sm(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(im.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cx=zt.JSON.parse;function nr(n){tr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PI,this.K=this.L=!1}er(nr,tr);var PI="",FT=/^https?$/i,dx=["POST","PUT"];function vv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wv(n),Vi(n)}function wv(n){n.D||(n.D=!0,si(n,"complete"),si(n,"error"))}function UT(n){if(n.h&&typeof B_<"u"&&(!n.C[1]||4!=Qs(n)||2!=n.aa()))if(n.v&&4==Qs(n))iv(n.Ha,0,n);else if(si(n,"readystatechange"),4==Qs(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(gv)[1]||null;if(!s&&zt.self&&zt.self.location){var u=zt.self.location.protocol;s=u.substr(0,u.length-1)}r=!FT.test(s?s.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var c=2<Qs(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",wv(n)}}finally{Vi(n)}}}function Vi(n,e){if(n.g){FI(n);const t=n.g,r=n.C[0]?xg:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch{}}}function FI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(zt.clearTimeout(n.A),n.A=null)}function Qs(n){return n.g?n.g.readyState:0}function LI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function VT(n){let e="";return xl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Bi(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=VT(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function Nf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function am(n){this.Ca=0,this.i=[],this.j=new Gg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Nf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Nf("baseRetryDelayMs",5e3,n),this.bb=Nf("retryDelaySeedMs",1e4,n),this.$a=Nf("forwardChannelMaxRetries",2,n),this.ta=Nf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Mf(n&&n.concurrentRequestLimit),this.Fa=new PT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ev(n){if(lm(n),3==n.G){var e=n.U++,t=Bo(n.F);Rn(t,"SID",n.I),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),Sd(n,t),(e=new kl(n,n.j,e,void 0)).K=2,e.v=Xg(Bo(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon&&(t=zt.navigator.sendBeacon(e.v.toString(),"")),!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=$I(e.l,null),e.g.da(e.v)),e.F=Date.now(),Tf(e)}jI(n)}function um(n){n.g&&(Dv(n),n.g.cancel(),n.g=null)}function lm(n){um(n),n.u&&(zt.clearTimeout(n.u),n.u=null),Xs(n),n.h.cancel(),n.m&&("number"==typeof n.m&&zt.clearTimeout(n.m),n.m=null)}function Of(n){yv(n.h)||n.m||(n.m=!0,rv(n.Ja,n),n.C=0)}function VI(n,e){var t;t=e?e.m:n.U++;const r=Bo(n.F);Rn(r,"SID",n.I),Rn(r,"RID",t),Rn(r,"AID",n.T),Sd(n,r),n.o&&n.s&&Bi(r,n.o,n.s),t=new kl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Iv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),tm(n.h,t),CI(t,r,e)}function Sd(n,e){n.ia&&xl(n.ia,function(t,r){Rn(e,r,t)}),n.l&&AI({},function(t,r){Rn(e,r,t)})}function Iv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Ra,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=s[_].h;const S=s[_].g;if(D-=u,0>D)u=Math.max(0,s[_].h-100),g=!1;else try{OI(S,c,"req"+D+"_")}catch{r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function BI(n){n.g||n.u||(n.Z=1,rv(n.Ia,n),n.A=0)}function cm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=qg(hi(n.Ia,n),hm(n,n.A)),n.A++,0))}function Dv(n){null!=n.B&&(zt.clearTimeout(n.B),n.B=null)}function dm(n){n.g=new kl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Bo(n.sa);Rn(e,"RID","rpc"),Rn(e,"SID",n.I),Rn(e,"CI",n.L?"0":"1"),Rn(e,"AID",n.T),Rn(e,"TYPE","xmlhttp"),Sd(n,e),n.o&&n.s&&Bi(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Xg(Bo(e)),t.s=null,t.P=!0,hv(t,n)}function Xs(n){null!=n.v&&(zt.clearTimeout(n.v),n.v=null)}function bv(n,e){var t=null;if(n.g==e){Xs(n),Dv(n),n.g=null;var r=2}else{if(!em(n.h,e))return;t=e.D,kT(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;si(r=zg(),new TT(r,t)),Of(n)}else BI(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==r&&function UI(n,e){return!(xf(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=qg(hi(n.Ja,n,e),hm(n,n.C)),n.C++,0)))}(n,e)||2==r&&cm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Mi(n,5);break;case 4:Mi(n,10);break;case 3:Mi(n,6);break;default:Mi(n,2)}}function hm(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Mi(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.kb,n);t||(t=new Fl("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||Sf(t,"https"),Xg(t)),function lx(n,e){const t=new Gg;if(zt.Image){const r=new Image;r.onload=ff(_v,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ff(_v,t,r,"TestLoadImage: error",!1,e),r.onabort=ff(_v,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ff(_v,t,r,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ai(2);n.G=0,n.l&&n.l.va(e),jI(n),lm(n)}function jI(n){if(n.G=0,n.la=[],n.l){const e=nm(n.h);(0!=e.length||0!=n.i.length)&&(Ng(n.la,e),Ng(n.la,n.i),n.h.i.length=0,Rg(n.i),n.i.length=0),n.l.ua()}}function BT(n,e,t){var r=t instanceof Fl?Bo(t):new Fl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Qg(r,r.m);else{var s=zt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Fl(null,void 0);r&&Sf(u,r),e&&(u.g=e),s&&Qg(u,s),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Rn(r,t,e),Rn(r,"VER",n.ma),Sd(n,r),r}function $I(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new nr(t&&n.Da&&!n.ra?new Rf({jb:!0}):n.ra)).Ka(n.H),e}function HI(){}function fm(){if(yd&&!(10<=Number(vT)))throw Error("Environmental error: no available transport.")}function os(n,e){tr.call(this),this.g=new am(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Og(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Og(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ul(this)}function Cv(n){Zg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function jT(){lv.call(this),this.status=1}function Ul(n){this.g=n}(yt=nr.prototype).Ka=function(n){this.L=n},yt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():cv.g(),this.C=function DI(n){return n.h||(n.h=n.i())}(this.u?this.u:cv),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void vv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=zt.FormData&&n instanceof zt.FormData,!(0<=gT(dx,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FI(this),0<this.B&&((this.K=function LT(n){return yd&&function _T(){return function rI(n){var e=yT;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=H_(String(Pg)).split("."),t=H_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=pf(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||pf(0==s[2].length,0==u[2].length)||pf(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=iv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){vv(this,u)}},yt.qa=function(){typeof B_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),Vi(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vi(this,!0)),nr.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?UT(this):this.fb())},yt.fb=function(){UT(this)},yt.aa=function(){try{return 2<Qs(this)?this.g.status:-1}catch{return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cx(e)}},yt.Ea=function(){return this.m},yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=am.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new kl(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=K_(u),Q_(u,this.S)):u=this.S),null!==this.o||this.N||(s.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Iv(this,s,e),Rn(t=Bo(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),Sd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(VT(u)))+"&"+e:this.o&&Bi(t,this.o,u)),tm(this.h,s),this.Ya&&Rn(t,"TYPE","init"),this.O?(Rn(t,"$req",e),Rn(t,"SID","null"),s.Z=!0,CI(s,t,null)):CI(s,t,e),this.G=2}}else 3==this.G&&(n?VI(this,n):0==this.i.length||yv(this.h)||VI(this))},yt.Ia=function(){if(this.u=null,dm(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=qg(hi(this.eb,this),n)}},yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ai(10),um(this),dm(this))},yt.cb=function(){null!=this.v&&(this.v=null,um(this),cm(this),Ai(19))},yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ai(2)):(this.j.info("Failed to ping google.com"),Ai(1))},(yt=HI.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Ra=function(){},fm.prototype.g=function(n,e){return new os(n,e)},er(os,tr),os.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ai(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=BT(n,null,n.V),Of(n)},os.prototype.close=function(){Ev(this.g)},os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Of(e)},os.prototype.M=function(){this.g.l=null,delete this.j,Ev(this.g),delete this.g,os.X.M.call(this)},er(Cv,Zg),er(jT,lv),er(Ul,HI),Ul.prototype.xa=function(){si(this.g,"a")},Ul.prototype.wa=function(n){si(this.g,new Cv(n))},Ul.prototype.va=function(n){si(this.g,new jT)},Ul.prototype.ua=function(){si(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,os.prototype.send=os.prototype.u,os.prototype.open=os.prototype.m,os.prototype.close=os.prototype.close,bf.NO_ERROR=0,bf.TIMEOUT=8,bf.HTTP_ERROR=6,uv.COMPLETE="complete",Wg.EventType=Cf,Cf.OPEN="a",Cf.CLOSE="b",Cf.ERROR="c",Cf.MESSAGE="d",tr.prototype.listen=tr.prototype.N,nr.prototype.listenOnce=nr.prototype.O,nr.prototype.getLastError=nr.prototype.Oa,nr.prototype.getLastErrorCode=nr.prototype.Ea,nr.prototype.getStatus=nr.prototype.aa,nr.prototype.getResponseJson=nr.prototype.Sa,nr.prototype.getResponseText=nr.prototype.fa,nr.prototype.send=nr.prototype.da,nr.prototype.setWithCredentials=nr.prototype.Ka;var $T=_a.createWebChannelTransport=function(){return new fm},GI=_a.getStatEventTarget=function(){return zg()},zI=_a.ErrorCode=bf,Tv=_a.EventType=uv,qI=_a.Event=Nl,Sv=_a.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},WI=_a.FetchXmlHttpFactory=Rf,kf=_a.WebChannel=Wg,ZI=_a.XhrIo=nr;const Pf="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let Vl="9.17.1";const wu=new ya.Yd("@firebase/firestore");function Av(){return wu.logLevel}function Ve(n,...e){if(wu.logLevel<=ya.in.DEBUG){const t=e.map(Mv);wu.debug(`Firestore (${Vl}): ${n}`,...t)}}function br(n,...e){if(wu.logLevel<=ya.in.ERROR){const t=e.map(Mv);wu.error(`Firestore (${Vl}): ${n}`,...t)}}function Eu(n,...e){if(wu.logLevel<=ya.in.WARN){const t=e.map(Mv);wu.warn(`Firestore (${Vl}): ${n}`,...t)}}function Mv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ut(n="Unexpected state"){const e=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function _t(n,e){n||ut()}function et(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Kt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class KI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class HT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GT{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let c=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=c;e.enqueueRetryable((0,ye.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new KI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new fr(e)}}class YI{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(_t(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Bl{constructor(e,t,r,s){this.h=e,this.l=t,this.m=r,this.g=s}getToken(){return Promise.resolve(new YI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?s(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.A=t.token,new xv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=zT(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function wa(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function qT(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Hn(0,0))}static max(){return new Tt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mm{constructor(e,t,r){void 0===t?t=0:t>e.length&&ut(),void 0===r?r=e.length-t:r>e.length-t&&ut(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class on extends mm{construct(e,t,r){return new on(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new on(t)}static emptyPath(){return new on([])}}const WT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends mm{construct(e,t,r){return new rr(e,t,r)}static isValidIdentifier(e){return WT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Fe(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Fe(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Fe(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(c=!c,s++):"."!==g||c?(r+=g,s++):(u(),s++)}if(u(),c)throw new Fe(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(t)}static emptyPath(){return new rr([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(on.fromString(e))}static fromName(e){return new Qe(on.fromString(e).popFirst(5))}static empty(){return new Qe(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===on.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new on(e.slice()))}}class ym{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function _m(n){return n.fields.find(e=>2===e.kind)}function Iu(n){return n.fields.filter(e=>2!==e.kind)}ym.UNKNOWN_ID=-1;class vm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ad{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ad(0,ji.min())}}function wm(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new ji(s,Qe.empty(),e)}function KT(n){return new ji(n.readTime,n.key,-1)}class ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ji(Tt.min(),Qe.empty(),-1)}static max(){return new ji(Tt.max(),Qe.empty(),-1)}}function Ff(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jl(n){return tD.apply(this,arguments)}function tD(){return tD=(0,ye.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==JI)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),tD.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,u=0,c=!1;e.forEach(g=>{++s,g.next(()=>{++u,c&&u===s&&t()},_=>r(_))}),c=!0,u===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const u=e.length,c=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(S=>{c[D]=S,++g,g===u&&r(c)},S=>s(S))}})}static doWhile(e,t){return new ue((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Em{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Im(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=rD(r.target.error);this.P.reject(new Im(e,s))}}static open(e,t,r,s){try{return new Em(t,e.transaction(s,r))}catch(u){throw new Im(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gx(t)}}class Js{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Js.D((0,Kt.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Md(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Kt.hl)())return!1;if(Js.N())return!0;const e=(0,Kt.z$)(),t=Js.D(e),r=0<t&&t<10,s=Js.k(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Im(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;s("VersionError"===g.name?new Fe(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Fe(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Im(e,g))},u.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Em.open(u.db,e,c?"readonly":"readwrite",r),D=s(_).next(S=>(_.V(),S)).catch(S=>(_.abort(S),ue.reject(S))).toPromise();return D.catch(()=>{}),yield _.v,D}catch(_){const D=_,S="FirebaseError"!==D.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",D.message,"Retrying:",S),u.close(),!S)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class px{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Md(this.q.delete())}}class Im extends Fe{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $l(n){return"IndexedDbTransactionError"===n.name}class gx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Md(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Md(this.store.add(e))}get(e){return Md(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Md(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Md(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.H(s,(c,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ue((u,c)=>{s.onerror=g=>{c(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,(u,c,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}tt(e){const t=this.cursor({});return new ue((r,s)=>{t.onerror=u=>{const c=rD(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}H(e,t){const r=[];return new ue((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void s();const _=new px(g),D=t(g.primaryKey,g.value,_);if(D instanceof ue){const S=D.catch(N=>(_.done(),ue.reject(N)));r.push(S)}_.isDone?s():null===_.G?g.continue():g.continue(_.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Md(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=rD(r.target.error);t(s)}})}let nD=!1;function rD(n){const e=Js.D((0,Kt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nD||(nD=!0,setTimeout(()=>{throw r},0)),r}}return n}class mx{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){$l(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield jl(r)}yield t.nt(6e4)}))}}class yx{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let s=t,u=!0;return ue.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,s).next(g=>{s-=g,r.add(c)});u=!1})).next(()=>t-s)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(s,u)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((s,u)=>{const c=KT(u);Ff(c,r)>0&&(r=c)}),new ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Os=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>r.writeSequenceNumber(s))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class _x{constructor(e,t,r,s,u,c,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class Hl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hl&&e.projectId===this.projectId&&e.database===this.database}}function i(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function l(n){return null==n}function d(n){return 0===n&&1/n==-1/0}function f(n){return"number"==typeof n&&Number.isInteger(n)&&!d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class w{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new w(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new w(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}w.EMPTY_BYTE_STRING=new w("");const I=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function T(n){if(_t(!!n),"string"==typeof n){let e=0;const t=I.exec(n);if(_t(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:M(n.seconds),nanos:M(n.nanos)}}function M(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function F(n){return"string"==typeof n?w.fromBase64String(n):w.fromUint8Array(n)}function q(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ee(n){const e=n.mapValue.fields.__previous_value__;return q(e)?ee(e):e}function _e(n){const e=T(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}const Le={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ke={nullValue:"NULL_VALUE"};function st(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?q(n)?4:Ex(n)?9007199254740991:10:ut()}function Et(n,e){if(n===e)return!0;const t=st(n);if(t!==st(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _e(n).isEqual(_e(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=T(r.timestampValue),c=T(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,F(n.bytesValue).isEqual(F(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return M(r.geoPointValue.latitude)===M(s.geoPointValue.latitude)&&M(r.geoPointValue.longitude)===M(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return M(r.integerValue)===M(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=M(r.doubleValue),c=M(s.doubleValue);return u===c?d(u)===d(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return wa(n.arrayValue.values||[],e.arrayValue.values||[],Et);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(i(u)!==i(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!Et(u[g],c[g])))return!1;return!0}(n,e);default:return ut()}var s}function Ne(n,e){return void 0!==(n.values||[]).find(t=>Et(t,e))}function Rt(n,e){if(n===e)return 0;const t=st(n),r=st(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=M(s.integerValue||s.doubleValue),g=M(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return Nn(n.timestampValue,e.timestampValue);case 4:return Nn(_e(n),_e(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=F(s),g=F(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),g=u.split("/");for(let _=0;_<c.length&&_<g.length;_++){const D=jt(c[_],g[_]);if(0!==D)return D}return jt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=jt(M(s.latitude),M(u.latitude));return 0!==c?c:jt(M(s.longitude),M(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],g=u.values||[];for(let _=0;_<c.length&&_<g.length;++_){const D=Rt(c[_],g[_]);if(D)return D}return jt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Le.mapValue&&u===Le.mapValue)return 0;if(s===Le.mapValue)return 1;if(u===Le.mapValue)return-1;const c=s.fields||{},g=Object.keys(c),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let S=0;S<g.length&&S<D.length;++S){const N=jt(g[S],D[S]);if(0!==N)return N;const $=Rt(c[g[S]],_[D[S]]);if(0!==$)return $}return jt(g.length,D.length)}(n.mapValue,e.mapValue);default:throw ut()}}function Nn(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=T(n),r=T(e),s=jt(t.seconds,r.seconds);return 0!==s?s:jt(t.nanos,r.nanos)}function Sn(n){return iD(n)}function iD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=T(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?F(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=iD(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of s)c?c=!1:u+=",",u+=`${g}:${iD(r.fields[g])}`;return u+"}"}(n.mapValue):ut();var e}function Lf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function YT(n){return!!n&&"integerValue"in n}function Nv(n){return!!n&&"arrayValue"in n}function vx(n){return!!n&&"nullValue"in n}function wx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sD(n){return!!n&&"mapValue"in n}function Ov(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return o(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ov(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ov(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ex(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dk(n){return"nullValue"in n?Ke:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lf(Hl.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function bk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lf(Hl.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Le:ut()}function Ix(n,e){const t=Rt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Dx(n,e){const t=Rt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class xd{constructor(e,t){this.position=e,this.inclusive=t}}function bx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(c.referenceValue),t.key):Rt(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Cx(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Et(n.position[t],e.position[t]))return!1;return!0}class Tx{}class un extends Tx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Ck(e,t,r):"array-contains"===t?new Ak(e,r):"in"===t?new Nx(e,r):"not-in"===t?new Mk(e,r):"array-contains-any"===t?new xk(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Tk(e,r):new Sk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rt(t,this.value)):null!==t&&st(this.value)===st(t)&&this.matchesComparison(Rt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ut()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class In extends Tx{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new In(e,t)}matches(e){return Dm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dm(n){return"and"===n.op}function QT(n){return"or"===n.op}function XT(n){return Sx(n)&&Dm(n)}function Sx(n){for(const e of n.filters)if(e instanceof In)return!1;return!0}function JT(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Sn(n.value);if(XT(n))return n.filters.map(e=>JT(e)).join(",");{const e=n.filters.map(t=>JT(t)).join(",");return`${n.op}(${e})`}}function Ax(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&Et(t.value,r.value)):n instanceof In?function(t,r){return r instanceof In&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,c)=>s&&Ax(u,r.filters[c]),!0)}(n,e):void ut();var t,r}function Mx(n,e){const t=n.filters.concat(e);return In.create(t,n.op)}function xx(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${Sn(e.value)}`:n instanceof In?function(e){return e.op.toString()+" {"+e.getFilters().map(xx).join(" ,")+"}"}(n):"Filter";var e}class Ck extends un{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tk extends un{constructor(e,t){super(e,"in",t),this.keys=Rx(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sk extends un{constructor(e,t){super(e,"not-in",t),this.keys=Rx(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rx(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class Ak extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nv(t)&&Ne(t.arrayValue,this.value)}}class Nx extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ne(this.value.arrayValue,t)}}class Mk extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ne(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ne(this.value.arrayValue,t)}}class xk extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ne(this.value.arrayValue,r))}}class bm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Rk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Cr{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oD(this.root,e,this.comparator,!1)}getReverseIterator(){return new oD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oD(this.root,e,this.comparator,!0)}}class oD{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??xi.RED,this.left=s??xi.EMPTY,this.right=u??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new xi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return xi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const e=this.left.check();if(e!==this.right.check())throw ut();return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1,xi.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,e,t,r,s){return this}insert(n,e,t){return new xi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class An{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ox(this.data.getIterator())}getIteratorFrom(e){return new Ox(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof An)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new An(this.comparator);return t.data=e,t}}class Ox{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cm(n){return n.hasNext()?n.getNext():void 0}class ks{constructor(e){this.fields=e,e.sort(rr.comparator)}static empty(){return new ks([])}unionWith(e){let t=new An(rr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ov(t)}setAll(e){let t=rr.emptyPath(),r={},s=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}c?r[g.lastSegment()]=Ov(c):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());sD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Et(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];sD(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){o(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ri(Ov(this.value))}}function kx(n){const e=[];return o(n.fields,(t,r)=>{const s=new rr([t]);if(sD(r)){const u=kx(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new ks(e)}class Gn{constructor(e,t,r,s,u,c,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=c,this.documentState=g}static newInvalidDocument(e){return new Gn(e,0,Tt.min(),Tt.min(),Tt.min(),Ri.empty(),0)}static newFoundDocument(e,t,r,s){return new Gn(e,1,t,Tt.min(),r,s,0)}static newNoDocument(e,t){return new Gn(e,2,t,Tt.min(),Tt.min(),Ri.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Tt.min(),Tt.min(),Ri.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nk{constructor(e,t=null,r=[],s=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=g,this.ft=null}}function eS(n,e=null,t=[],r=[],s=null,u=null,c=null){return new Nk(n,e,t,r,s,u,c)}function Uf(n){const e=et(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>JT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),l(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sn(r)).join(",")),e.ft=t}return e.ft}function kv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Rk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ax(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cx(n.startAt,e.startAt)&&Cx(n.endAt,e.endAt)}function aD(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uD(n,e){return n.filters.filter(t=>t instanceof un&&t.field.isEqual(e))}function Px(n,e,t){let r=Ke,s=!0;for(const u of uD(n,e)){let c=Ke,g=!0;switch(u.op){case"<":case"<=":c=Dk(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=Ke}Ix({value:r,inclusive:s},{value:c,inclusive:g})<0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ix({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Fx(n,e,t){let r=Le,s=!0;for(const u of uD(n,e)){let c=Le,g=!0;switch(u.op){case">=":case">":c=bk(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=Le}Dx({value:r,inclusive:s},{value:c,inclusive:g})>0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Dx({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Gl{constructor(e,t=null,r=[],s=[],u=null,c="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=_,this.dt=null,this._t=null}}function Lx(n,e,t,r,s,u,c,g){return new Gl(n,e,t,r,s,u,c,g)}function Tm(n){return new Gl(n)}function Ux(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function tS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function lD(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function nS(n){return null!==n.collectionGroup}function Vf(n){const e=et(n);if(null===e.dt){e.dt=[];const t=lD(e),r=tS(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new bm(t)),e.dt.push(new bm(rr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new bm(rr.keyField(),u))}}}return e.dt}function as(n){const e=et(n);if(!e._t)if("F"===e.limitType)e._t=eS(e.path,e.collectionGroup,Vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Vf(e))t.push(new bm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new xd(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new xd(e.startAt.position,e.startAt.inclusive):null;e._t=eS(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function rS(n,e){e.getFirstInequalityField(),lD(n);const t=n.filters.concat([e]);return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cD(n,e,t){return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pv(n,e){return kv(as(n),as(e))&&n.limitType===e.limitType}function Vx(n){return`${Uf(as(n))}|lt:${n.limitType}`}function iS(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>xx(r)).join(", ")}]`),l(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sn(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sn(r)).join(",")),`Target(${t})`}(as(n))}; limitType=${n.limitType})`}function Fv(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Qe.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of Vf(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const g=bx(s,u,c);return s.inclusive?g<=0:g<0}(t.startAt,Vf(t),r)||t.endAt&&!function(s,u,c){const g=bx(s,u,c);return s.inclusive?g>=0:g>0}(t.endAt,Vf(t),r)));var t,r}function Bx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jx(n){return(e,t)=>{let r=!1;for(const s of Vf(n)){const u=Ok(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function Ok(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(s,u,c){const g=u.data.field(s),_=c.data.field(s);return null!==g&&null!==_?Rt(g,_):ut()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}function $x(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d(e)?"-0":e}}function Hx(n){return{integerValue:""+n}}function Gx(n,e){return f(e)?Hx(e):$x(n,e)}class dD{constructor(){this._=void 0}}function kk(n,e,t){return n instanceof Sm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Bf?qx(n,e):n instanceof jf?Wx(n,e):function(r,s){const u=zx(r,s),c=Zx(u)+Zx(r.gt);return YT(u)&&YT(r.gt)?Hx(c):$x(r.yt,c)}(n,e)}function Pk(n,e,t){return n instanceof Bf?qx(n,e):n instanceof jf?Wx(n,e):t}function zx(n,e){return n instanceof Am?YT(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Sm extends dD{}class Bf extends dD{constructor(e){super(),this.elements=e}}function qx(n,e){const t=Kx(e);for(const r of n.elements)t.some(s=>Et(s,r))||t.push(r);return{arrayValue:{values:t}}}class jf extends dD{constructor(e){super(),this.elements=e}}function Wx(n,e){let t=Kx(e);for(const r of n.elements)t=t.filter(s=>!Et(s,r));return{arrayValue:{values:t}}}class Am extends dD{constructor(e,t){super(),this.yt=e,this.gt=t}}function Zx(n){return M(n.integerValue||n.doubleValue)}function Kx(n){return Nv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Lv{constructor(e,t){this.field=e,this.transform=t}}class Lk{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class fD{}function Yx(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new xm(n.key,ir.none()):new Mm(n.key,n.data,ir.none());{const t=n.data,r=Ri.empty();let s=new An(rr.comparator);for(let u of e.fields)if(!s.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),s=s.add(u)}return new zl(n.key,r,new ks(s.toArray()),ir.none())}}function Uk(n,e,t){n instanceof Mm?function(r,s,u){const c=r.value.clone(),g=Jx(r.fieldTransforms,s,u.transformResults);c.setAll(g),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof zl?function(r,s,u){if(!hD(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=Jx(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(Xx(r)),g.setAll(c),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Uv(n,e,t,r){return n instanceof Mm?function(s,u,c,g){if(!hD(s.precondition,u))return c;const _=s.value.clone(),D=eR(s.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof zl?function(s,u,c,g){if(!hD(s.precondition,u))return c;const _=eR(s.fieldTransforms,g,u),D=u.data;return D.setAll(Xx(s)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===c?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(c=t,hD(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function Vk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=zx(r.transform,s||null);null!=u&&(null===t&&(t=Ri.empty()),t.set(r.field,u))}return t||null}function Qx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wa(t,r,(s,u)=>function Fk(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bf&&r instanceof Bf||t instanceof jf&&r instanceof jf?wa(t.elements,r.elements,Et):t instanceof Am&&r instanceof Am?Et(t.gt,r.gt):t instanceof Sm&&r instanceof Sm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Mm extends fD{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zl extends fD{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Xx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Jx(n,e,t){const r=new Map;_t(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,g=e.data.field(u.field);r.set(u.field,Pk(c,g,t[s]))}return r}function eR(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,kk(u,c,e))}return r}class xm extends fD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends fD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk{constructor(e){this.count=e}}var Zr,fn;function tR(n){switch(n){default:return ut();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function nR(n){if(void 0===n)return br("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Zr.OK:return ce.OK;case Zr.CANCELLED:return ce.CANCELLED;case Zr.UNKNOWN:return ce.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return ce.INTERNAL;case Zr.UNAVAILABLE:return ce.UNAVAILABLE;case Zr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Zr.NOT_FOUND:return ce.NOT_FOUND;case Zr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Zr.ABORTED:return ce.ABORTED;case Zr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Zr.DATA_LOSS:return ce.DATA_LOSS;default:return ut()}}(fn=Zr||(Zr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Rd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){o(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return a(this.inner)}size(){return this.innerSize}}const jk=new Cr(Qe.comparator);function Ps(){return jk}const rR=new Cr(Qe.comparator);function Vv(...n){let e=rR;for(const t of n)e=e.insert(t.key,t);return e}function iR(n){let e=rR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Du(){return Bv()}function sR(){return Bv()}function Bv(){return new Rd(n=>n.toString(),(n,e)=>n.isEqual(e))}const $k=new Cr(Qe.comparator),Hk=new An(Qe.comparator);function Jt(...n){let e=Hk;for(const t of n)e=e.add(t);return e}const Gk=new An(jt);function pD(){return Gk}class jv{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,$v.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jv(Tt.min(),s,pD(),Ps(),Jt())}}class $v{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $v(r,t,Jt(),Jt(),Jt())}}class gD{constructor(e,t,r,s){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=s}}class oR{constructor(e,t){this.targetId=e,this.Et=t}}class aR{constructor(e,t,r=w.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class uR{constructor(){this.At=0,this.Rt=cR(),this.bt=w.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Jt(),t=Jt(),r=Jt();return this.Rt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:ut()}}),new $v(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=cR()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class zk{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ps(),this.qt=lR(),this.Ut=new An(jt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ut()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,s)=>{this.zt(s)&&t(s)})}Jt(e){const t=e.targetId,r=e.Et.count,s=this.Yt(t);if(s){const u=s.target;if(aD(u))if(0===r){const c=new Qe(u.path);this.Qt(t,c,Gn.newNoDocument(c,Tt.min()))}else _t(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,c)=>{const g=this.Yt(c);if(g){if(u.current&&aD(g.target)){const _=new Qe(g.target.path);null!==this.Lt.get(_)||this.te(c,_)||this.Qt(c,_,Gn.newNoDocument(_,e))}u.St&&(t.set(c,u.Ct()),u.xt())}});let r=Jt();this.qt.forEach((u,c)=>{let g=!0;c.forEachWhile(_=>{const D=this.Yt(_);return!D||2===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,c)=>c.setReadTime(e));const s=new jv(e,t,this.Ut,this.Lt,r);return this.Lt=Ps(),this.qt=lR(),this.Ut=new An(jt),s}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,t)?s.Nt(t,1):s.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new uR,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new An(jt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new uR),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function lR(){return new Cr(Qe.comparator)}function cR(){return new Cr(Qe.comparator)}const qk={asc:"ASCENDING",desc:"DESCENDING"},Wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zk={and:"AND",or:"OR"};class Kk{constructor(e,t){this.databaseId=e,this.wt=t}}function Rm(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dR(n,e){return n.wt?e.toBase64():e.toUint8Array()}function Yk(n,e){return Rm(n,e.toTimestamp())}function kr(n){return _t(!!n),Tt.fromTimestamp(function(e){const t=T(e);return new Hn(t.seconds,t.nanos)}(n))}function oS(n,e){return(t=n,new on(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function hR(n){const e=on.fromString(n);return _t(ER(e)),e}function Hv(n,e){return oS(n.databaseId,e.path)}function bu(n,e){const t=hR(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(pR(t))}function aS(n,e){return oS(n.databaseId,e)}function fR(n){const e=hR(n);return 4===e.length?on.emptyPath():pR(e)}function Gv(n){return new on(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pR(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function gR(n,e,t){return{name:Hv(n,e),fields:t.value.mapValue.fields}}function mR(n,e,t){const r=bu(n,e.name),s=kr(e.updateTime),u=e.createTime?kr(e.createTime):Tt.min(),c=new Ri({mapValue:{fields:e.fields}}),g=Gn.newFoundDocument(r,s,u,c);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function zv(n,e){let t;if(e instanceof Mm)t={update:gR(n,e.key,e.value)};else if(e instanceof xm)t={delete:Hv(n,e.key)};else if(e instanceof zl)t={update:gR(n,e.key,e.data),updateMask:i1(e.fieldMask)};else{if(!(e instanceof sS))return ut();t={verify:Hv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof Sm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Am)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw ut()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Yk(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ut()),t;var s}function uS(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ir.updateTime(kr(s.updateTime)):void 0!==s.exists?ir.exists(s.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let g=null;"setToServerValue"in c?(_t("REQUEST_TIME"===c.setToServerValue),g=new Sm):"appendMissingElements"in c?g=new Bf(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new jf(c.removeAllFromArray.values||[]):"increment"in c?g=new Am(u,c.increment):ut();const _=rr.fromServerFormat(c.fieldPath);return new Lv(_,g)}(n,s)):[];var s;if(e.update){const s=bu(n,e.update.name),u=new Ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ks((e.updateMask.fieldPaths||[]).map(D=>rr.fromServerFormat(D)));return new zl(s,u,c,t,r)}return new Mm(s,u,t,r)}if(e.delete){const s=bu(n,e.delete);return new xm(s,t)}if(e.verify){const s=bu(n,e.verify);return new sS(s,t)}return ut()}function yR(n,e){return{documents:[aS(n,e.path)]}}function lS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=aS(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=aS(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return wR(In.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Nm((S=D).field),direction:t1(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(D=e.limit,n.wt||l(D)?D:{value:D});var D,g,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function _R(n){let e=fR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){_t(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=vR(S);return N instanceof In&&XT(N)?N.getFilters():[N]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new bm(Om((N=S).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(S){let N;return N="object"==typeof S?S.value:S,l(N)?null:N}(t.limit));let _=null;var S;t.startAt&&(_=new xd((S=t.startAt).values||[],!!S.before));let D=null;return t.endAt&&(D=function(S){return new xd(S.values||[],!S.before)}(t.endAt)),Lx(e,s,c,u,g,"F",_,D)}function vR(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Om(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Om(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Om(e.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Om(e.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}(n):void 0!==n.fieldFilter?un.create(Om((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return In.create(e.compositeFilter.filters.map(t=>vR(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ut()}}(e.compositeFilter.op))}(n):ut();var e}function t1(n){return qk[n]}function n1(n){return Wk[n]}function r1(n){return Zk[n]}function Nm(n){return{fieldPath:n.canonicalString()}}function Om(n){return rr.fromServerFormat(n.fieldPath)}function wR(n){return n instanceof un?function(e){if("=="===e.op){if(wx(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NAN"}};if(vx(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wx(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NOT_NAN"}};if(vx(e.value))return{unaryFilter:{field:Nm(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nm(e.field),op:n1(e.op),value:e.value}}}(n):n instanceof In?function(e){const t=e.getFilters().map(r=>wR(r));return 1===t.length?t[0]:{compositeFilter:{op:r1(e.op),filters:t}}}(n):ut()}function i1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ER(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function us(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IR(e)),e=s1(n.get(t),e);return IR(e)}function s1(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function IR(n){return n+"\x01\x01"}function Cu(n){const e=n.length;if(_t(e>=2),2===e)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),on.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&ut(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:ut()}u=c+2}return new on(r)}const DR=["userId","batchId"];function mD(n,e){return[n,us(e)]}function bR(n,e,t){return[n,us(e),t]}const o1={},a1=["prefixPath","collectionGroup","readTime","documentId"],u1=["prefixPath","collectionGroup","documentId"],l1=["collectionGroup","readTime","prefixPath","documentId"],c1=["canonicalId","targetId"],d1=["targetId","path"],h1=["path","targetId"],f1=["collectionId","parent"],p1=["indexId","uid"],g1=["uid","sequenceNumber"],m1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y1=["indexId","uid","orderedDocumentKey"],_1=["userId","collectionPath","documentId"],v1=["userId","collectionPath","largestBatchId"],w1=["userId","collectionGroup","largestBatchId"],CR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E1=[...CR,"documentOverlays"],TR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SR=TR,I1=[...SR,"indexConfiguration","indexState","indexEntries"];class cS extends eD{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function gi(n,e){const t=et(n);return Js.M(t.se,e)}class dS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Uk(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Uv(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Uv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=sR();return this.mutations.forEach(s=>{const u=e.get(s.key),c=u.overlayedDocument;let g=this.applyToLocalView(c,u.mutatedFields);g=t.has(s.key)?null:g;const _=Yx(c,g);null!==_&&r.set(s.key,_),c.isValidDocument()||c.convertToNoDocument(Tt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&wa(this.mutations,e.mutations,(t,r)=>Qx(t,r))&&wa(this.baseMutations,e.baseMutations,(t,r)=>Qx(t,r))}}class hS{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){_t(e.mutations.length===r.length);let s=$k;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new hS(e,t,r,s)}}class fS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nd{constructor(e,t,r,s,u=Tt.min(),c=Tt.min(),g=w.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new Nd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class AR{constructor(e){this.ie=e}}function MR(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Hv(s=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Rm(s,u.version.toTimestamp()),createTime:Rm(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$f(e.version)};else{if(!e.isUnknownDocument())return ut();r.unknownDocument={path:t.path.toArray(),version:$f(e.version)}}var s,u;return r}function yD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $f(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hf(n){const e=new Hn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Gf(n,e){const t=(e.baseMutations||[]).map(u=>uS(n.ie,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>uS(n.ie,u)),s=Hn.fromMillis(e.localWriteTimeMs);return new dS(e.batchId,s,t,r)}function qv(n){const e=Hf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hf(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var s;return void 0!==n.query.documents?(_t(1===(s=n.query).documents.length),r=as(Tm(fR(s.documents[0])))):r=as(_R(n.query)),new Nd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,w.fromBase64String(n.resumeToken))}function xR(n,e){const t=$f(e.snapshotVersion),r=$f(e.lastLimboFreeSnapshotVersion);let s;s=aD(e.target)?yR(n.ie,e.target):lS(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function pS(n){const e=_R({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cD(e,e.limit,"L"):e}function gS(n,e){return new fS(e.largestBatchId,uS(n.ie,e.overlayMutation))}function RR(n,e){const t=e.path.lastSegment();return[n,us(e.path.popLast()),t]}function NR(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:$f(r.readTime),documentKey:us(r.documentKey.path),largestBatchId:r.largestBatchId}}class b1{getBundleMetadata(e,t){return OR(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Hf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return OR(e).put({bundleId:(r=t).id,createTime:$f(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return kR(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:pS(s.bundledQuery),readTime:Hf(s.readTime)};var s})}saveNamedQuery(e,t){return kR(e).put({name:(r=t).name,readTime:$f(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function OR(n){return gi(n,"bundles")}function kR(n){return gi(n,"namedQueries")}class _D{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new _D(e,t.uid||"")}getOverlay(e,t){return Wv(e).get(RR(this.userId,t)).next(r=>r?gS(this.yt,r):null)}getOverlays(e,t){const r=Du();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const g=new fS(t,c);s.push(this.oe(e,g))}),ue.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(us(c.getCollectionPath())));const u=[];return s.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Wv(e).Y("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Du(),u=us(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wv(e).W("collectionPathOverlayIndex",c).next(g=>{for(const _ of g){const D=gS(this.yt,_);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Du();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wv(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,D,S)=>{const N=gS(this.yt,D);u.size()<s||N.largestBatchId===c?(u.set(N.getKey(),N),c=N.largestBatchId):S.done()}).next(()=>u)}oe(e,t){return Wv(e).put(function(r,s,u){const[c,g,_]=RR(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:zv(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function Wv(n){return gi(n,"documentOverlays")}class zf{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(M(e.integerValue));else if("doubleValue"in e){const r=M(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),d(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(F(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?Ex(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ut()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const s of Object.keys(r))this.de(s,t),this.ce(r[s],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const s of r)this.ce(s,t)}me(e,t){this.he(t,37),Qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function C1(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function PR(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=C1(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}zf.Ie=new zf;class T1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=t.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=t.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const t=this.De(e),r=PR(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}xe(e){const t=this.De(e),r=PR(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class S1{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class A1{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Zv{constructor(){this.$e=new T1,this.Be=new S1(this.$e),this.Le=new A1(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class qf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qf(this.indexId,this.documentKey,this.arrayValue,r)}}function Od(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=FR(n.arrayValue,e.arrayValue),0!==t?t:(t=FR(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function FR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class M1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){_t(e.collectionGroup===this.collectionId);const t=_m(e);if(void 0!==t&&!this.We(t))return!1;const r=Iu(e);let s=0,u=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Qe){const c=r[s];if(!this.ze(this.Qe,c)||!this.He(this.Ke[u++],c))return!1;++s}for(;s<r.length;++s)if(u>=this.Ke.length||!this.He(this.Ke[u++],r[s]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function LR(n){var e,t;if(_t(n instanceof un||n instanceof In),n instanceof un){if(n instanceof Nx){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>un.create(n.field,"==",u)))||[];return In.create(s,"or")}return n}const r=n.filters.map(s=>LR(s));return In.create(r,n.op)}function x1(n){if(0===n.getFilters().length)return[];const e=_S(LR(n));return _t(UR(e)),mS(e)||yS(e)?[e]:e.getFilters()}function mS(n){return n instanceof un}function yS(n){return n instanceof In&&XT(n)}function UR(n){return mS(n)||yS(n)||function(e){if(e instanceof In&&QT(e)){for(const t of e.getFilters())if(!mS(t)&&!yS(t))return!1;return!0}return!1}(n)}function _S(n){if(_t(n instanceof un||n instanceof In),n instanceof un)return n;if(1===n.filters.length)return _S(n.filters[0]);const e=n.filters.map(r=>_S(r));let t=In.create(e,n.op);return t=vD(t),UR(t)?t:(_t(t instanceof In),_t(Dm(t)),_t(t.filters.length>1),t.filters.reduce((r,s)=>vS(r,s)))}function vS(n,e){let t;return _t(n instanceof un||n instanceof In),_t(e instanceof un||e instanceof In),t=n instanceof un?e instanceof un?In.create([n,e],"and"):VR(n,e):e instanceof un?VR(e,n):function(r,s){if(_t(r.filters.length>0&&s.filters.length>0),Dm(r)&&Dm(s))return Mx(r,s.getFilters());const u=QT(r)?r:s,c=QT(r)?s:r,g=u.filters.map(_=>vS(_,c));return In.create(g,"or")}(n,e),vD(t)}function VR(n,e){if(Dm(e))return Mx(e,n.getFilters());{const t=e.filters.map(r=>vS(n,r));return In.create(t,"or")}}function vD(n){if(_t(n instanceof un||n instanceof In),n instanceof un)return n;const e=n.getFilters();if(1===e.length)return vD(e[0]);if(Sx(n))return n;const t=e.map(s=>vD(s)),r=[];return t.forEach(s=>{s instanceof un?r.push(s):s instanceof In&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:In.create(r,n.op)}class R1{constructor(){this.Je=new wS}addToCollectionParentIndex(e,t){return this.Je.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(ji.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class wS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new An(on.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new An(on.comparator)).toArray()}}const wD=new Uint8Array(0);class N1{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new wS,this.Xe=new Rd(r=>Uf(r),(r,s)=>kv(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:us(s)};return BR(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[qT(t),""],!1,!0);return BR(e).W(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Cu(c.parent))}return r})}addFieldIndex(e,t){const r=ED(e),s={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var c;delete s.indexId;const u=r.add(s);if(t.indexState){const c=Yv(e);return u.next(g=>{c.put(NR(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=ED(e),s=Yv(e),u=Kv(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kv(e);let s=!0;const u=new Map;return ue.forEach(this.Ze(t),c=>this.tn(e,c).next(g=>{s&&(s=!!g),u.set(c,g)})).next(()=>{if(s){let c=Jt();const g=[];return ue.forEach(u,(_,D)=>{var S;Ve("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${Uf(t)}`);const N=function(It,vt){const Ot=_m(vt);if(void 0===Ot)return null;for(const qt of uD(It,Ot.fieldPath))switch(qt.op){case"array-contains-any":return qt.value.arrayValue.values||[];case"array-contains":return[qt.value]}return null}(D,_),$=function(It,vt){const Ot=new Map;for(const qt of Iu(vt))for(const gr of uD(It,qt.fieldPath))switch(gr.op){case"==":case"in":Ot.set(qt.fieldPath.canonicalString(),gr.value);break;case"not-in":case"!=":return Ot.set(qt.fieldPath.canonicalString(),gr.value),Array.from(Ot.values())}return null}(D,_),Q=function(It,vt){const Ot=[];let qt=!0;for(const gr of Iu(vt)){const Ia=0===gr.kind?Px(It,gr.fieldPath,It.startAt):Fx(It,gr.fieldPath,It.startAt);Ot.push(Ia.value),qt&&(qt=Ia.inclusive)}return new xd(Ot,qt)}(D,_),ne=function(It,vt){const Ot=[];let qt=!0;for(const gr of Iu(vt)){const Ia=0===gr.kind?Fx(It,gr.fieldPath,It.endAt):Px(It,gr.fieldPath,It.endAt);Ot.push(Ia.value),qt&&(qt=Ia.inclusive)}return new xd(Ot,qt)}(D,_),Oe=this.en(_,D,Q),ke=this.en(_,D,ne),Pt=this.nn(_,D,$),Ft=this.sn(_.indexId,N,Oe,Q.inclusive,ke,ne.inclusive,Pt);return ue.forEach(Ft,It=>r.J(It,t.limit).next(vt=>{vt.forEach(Ot=>{const qt=Qe.fromSegments(Ot.documentKey);c.has(qt)||(c=c.add(qt),g.push(qt))})}))}).next(()=>g)}return ue.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:x1(In.create(e.filters,"and")).map(r=>eS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,s,u,c,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),S=[];for(let N=0;N<_;++N){const $=t?this.rn(t[N/D]):wD,Q=this.on(e,$,r[N%D],s),ne=this.un(e,$,u[N%D],c),Oe=g.map(ke=>this.on(e,$,ke,!0));S.push(...this.createRange(Q,ne,Oe))}return S}on(e,t,r,s){const u=new qf(e,Qe.empty(),t,r);return s?u:u.Ue()}un(e,t,r,s){const u=new qf(e,Qe.empty(),t,r);return s?u.Ue():u}tn(e,t){const r=new M1(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const g of u)r.je(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;const s=this.Ze(t);return ue.forEach(s,u=>this.tn(e,u).next(c=>{c?0!==r&&c.fields.length<function(g){let _=new An(rr.comparator),D=!1;for(const S of g.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:_=_.add(N.field));for(const S of g.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}cn(e,t){const r=new Zv;for(const s of Iu(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.qe(s.kind);zf.Ie.ue(u,c)}return r.Fe()}rn(e){const t=new Zv;return zf.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new Zv;return zf.Ie.ue(Lf(this.databaseId,t),r.qe(function(s){const u=Iu(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let s=[];s.push(new Zv);let u=0;for(const c of Iu(e)){const g=r[u++];for(const _ of s)if(this.hn(t,c.fieldPath)&&Nv(g))s=this.ln(s,c,g);else{const D=_.qe(c.kind);zf.Ie.ue(g,D)}}return this.fn(s)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of s){const _=new Zv;_.seed(g.Fe()),zf.Ie.ue(c,_.qe(t.kind)),u.push(_)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof un&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ED(e),s=Yv(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return ue.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{c.push(function(D,S){const N=S?new Ad(S.sequenceNumber,new ji(Hf(S.readTime),new Qe(Cu(S.documentKey)),S.largestBatchId)):Ad.empty(),$=D.fields.map(([Q,ne])=>new vm(rr.fromServerFormat(Q),ne));return new ym(D.indexId,D.collectionGroup,$,N)}(g,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:jt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=ED(e),u=Yv(e);return this.dn(e).next(c=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(NR(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?ue.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),ue.forEach(g,_=>this._n(e,s,_).next(D=>{const S=this.wn(u,_);return D.isEqual(S)?ue.resolve():this.mn(e,u,_,D,S)}))))})}gn(e,t,r,s){return Kv(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,s){return Kv(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const s=Kv(e);let u=new An(Od);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(c,g)=>{u=u.add(new qf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new An(Od);const s=this.cn(t,e);if(null==s)return r;const u=_m(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Nv(c))for(const g of c.arrayValue.values||[])r=r.add(new qf(t.indexId,e.key,this.rn(g),s))}else r=r.add(new qf(t.indexId,e.key,wD,s));return r}mn(e,t,r,s,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,_,D,S,N){const $=g.getIterator(),Q=_.getIterator();let ne=Cm($),Oe=Cm(Q);for(;ne||Oe;){let ke=!1,Pt=!1;if(ne&&Oe){const Ft=D(ne,Oe);Ft<0?Pt=!0:Ft>0&&(ke=!0)}else null!=ne?Pt=!0:ke=!0;ke?(S(Oe),Oe=Cm(Q)):Pt?(N(ne),ne=Cm($)):(ne=Cm($),Oe=Cm(Q))}}(s,u,Od,g=>{c.push(this.gn(e,t,r,g))},g=>{c.push(this.yn(e,t,r,g))}),ue.waitFor(c)}dn(e){let t=1;return Yv(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Od(c,g)).filter((c,g,_)=>!g||0!==Od(c,_[g-1]));const s=[];s.push(e);for(const c of r){const g=Od(c,e),_=Od(c,t);if(0===g)s[0]=e.Ue();else if(g>0&&_<0)s.push(c),s.push(c.Ue());else if(_>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2){if(this.pn(s[c],s[c+1]))return[];u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,wD,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,wD,[]]))}return u}pn(e,t){return Od(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jR)}getMinOffset(e,t){return ue.mapArray(this.Ze(t),r=>this.tn(e,r).next(s=>s||ut())).next(jR)}}function BR(n){return gi(n,"collectionParents")}function Kv(n){return gi(n,"indexEntries")}function ED(n){return gi(n,"indexConfiguration")}function Yv(n){return gi(n,"indexState")}function jR(n){_t(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Ff(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new ji(e.readTime,e.documentKey,t)}const $R={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fs(e,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HR(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:c},(S,N,$)=>(g++,$.delete()));u.push(_.next(()=>{_t(1===g)}));const D=[];for(const S of t.mutations){const N=bR(e,S.key.path,t.batchId);u.push(s.delete(N)),D.push(S.key)}return ue.waitFor(u).next(()=>D)}function ID(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ut();e=n.noDocument}return JSON.stringify(e).length}Fs.DEFAULT_COLLECTION_PERCENTILE=10,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fs.DEFAULT=new Fs(41943040,Fs.DEFAULT_COLLECTION_PERCENTILE,Fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fs.DISABLED=new Fs(-1,0,0);class DD{constructor(e,t,r,s){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,t,r,s){_t(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new DD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).Z({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=km(e),c=kd(e);return c.add({}).next(g=>{_t("number"==typeof g);const _=new dS(g,t,r,s),D=function($,Q,ne){const Oe=ne.baseMutations.map(Pt=>zv($.ie,Pt)),ke=ne.mutations.map(Pt=>zv($.ie,Pt));return{userId:Q,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:Oe,mutations:ke}}(this.yt,this.userId,_),S=[];let N=new An(($,Q)=>jt($.canonicalString(),Q.canonicalString()));for(const $ of s){const Q=bR(this.userId,$.key.path,g);N=N.add($.key.path.popLast()),S.push(c.put(D)),S.push(u.put(Q,o1))}return N.forEach($=>{S.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),ue.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return kd(e).get(t).next(r=>r?(_t(r.userId===this.userId),Gf(this.yt,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return kd(e).Z({index:"userMutationsIndex",range:s},(c,g,_)=>{g.userId===this.userId&&(_t(g.batchId>=r),u=Gf(this.yt,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kd(e).W("userMutationsIndex",t).next(r=>r.map(s=>Gf(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mD(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return km(e).Z({range:s},(c,g,_)=>{const[D,S,N]=c,$=Cu(S);if(D===this.userId&&t.path.isEqual($))return kd(e).get(N).next(Q=>{if(!Q)throw ut();_t(Q.userId===this.userId),u.push(Gf(this.yt,Q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(jt);const s=[];return t.forEach(u=>{const c=mD(this.userId,u.path),g=IDBKeyRange.lowerBound(c),_=km(e).Z({range:g},(D,S,N)=>{const[$,Q,ne]=D,Oe=Cu(Q);$===this.userId&&u.path.isEqual(Oe)?r=r.add(ne):N.done()});s.push(_)}),ue.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=mD(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new An(jt);return km(e).Z({range:c},(_,D,S)=>{const[N,$,Q]=_,ne=Cu($);N===this.userId&&r.isPrefixOf(ne)?ne.length===s&&(g=g.add(Q)):S.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],s=[];return t.forEach(u=>{s.push(kd(e).get(u).next(c=>{if(null===c)throw ut();_t(c.userId===this.userId),r.push(Gf(this.yt,c))}))}),ue.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return HR(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return km(e).Z({range:r},(u,c,g)=>{if(u[0]===this.userId){const _=Cu(u[1]);s.push(_)}else g.done()}).next(()=>{_t(0===s.length)})})}containsKey(e,t){return GR(e,this.userId,t)}Rn(e){return zR(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function GR(n,e,t){const r=mD(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return km(n).Z({range:u,X:!0},(g,_,D)=>{const[S,N,$]=g;S===e&&N===s&&(c=!0),D.done()}).next(()=>c)}function kd(n){return gi(n,"mutations")}function km(n){return gi(n,"documentMutations")}function zR(n){return gi(n,"mutationQueues")}class Wf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Wf(0)}static vn(){return new Wf(-1)}}class O1{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Wf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Tt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Pm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(_t(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Pm(e).Z((c,g)=>{const _=qv(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Pm(e).Z((r,s)=>{const u=qv(s);t(u)})}Vn(e){return qR(e).get("targetGlobalKey").next(t=>(_t(null!==t),t))}Sn(e,t){return qR(e).put("targetGlobalKey",t)}Dn(e,t){return Pm(e).put(xR(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Uf(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Pm(e).Z({range:s,index:"queryTargetsIndex"},(c,g,_)=>{const D=qv(g);kv(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Pd(e);return t.forEach(c=>{const g=us(c.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,c))}),ue.waitFor(s)}removeMatchingKeys(e,t,r){const s=Pd(e);return ue.forEach(t,u=>{const c=us(u.path);return ue.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Pd(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Pd(e);let u=Jt();return s.Z({range:r,X:!0},(c,g,_)=>{const D=Cu(c[1]),S=new Qe(D);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=us(t.path),s=IDBKeyRange.bound([r],[qT(r)],!1,!0);let u=0;return Pd(e).Z({index:"documentTargetsIndex",X:!0,range:s},([c,g],_,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}ne(e,t){return Pm(e).get(t).next(r=>r?qv(r):null)}}function Pm(n){return gi(n,"targets")}function qR(n){return gi(n,"targetGlobal")}function Pd(n){return gi(n,"targetDocuments")}function WR([n,e],[t,r]){const s=jt(n,t);return 0===s?jt(e,r):s}class k1{constructor(e){this.xn=e,this.buffer=new An(WR),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();WR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){$l(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield jl(r)}yield t.Fn(3e5)}))}}class F1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Os.at);const r=new k1(t);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve($R)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$R):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,s,u,c,g,_,D;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,c=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),Av()<=ya.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${s} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(D-_)+`ms\nTotal Duration: ${D-S}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class L1{constructor(e,t){this.db=e,this.garbageCollector=new F1(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,s)=>t(s))}addReference(e,t,r){return bD(e,r)}removeReference(e,t,r){return bD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bD(e,t)}Gn(e,t){return function(r,s){let u=!1;return zR(r).tt(c=>GR(r,c,s).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Kn(e,(c,g)=>{if(g<=t){const _=this.Gn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),Pd(e).delete([0,us(c.path)])))});s.push(_)}}).next(()=>ue.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bD(e,t)}Kn(e,t){const r=Pd(e);let s,u=Os.at;return r.Z({index:"documentTargetsIndex"},([c,g],{path:_,sequenceNumber:D})=>{0===c?(u!==Os.at&&t(new Qe(Cu(s)),u),u=D,s=_):u=Os.at}).next(()=>{u!==Os.at&&t(new Qe(Cu(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bD(n,e){return Pd(n).put((r=n.currentSequenceNumber,{targetId:0,path:us(e.path),sequenceNumber:r}));var r}class ZR{constructor(){this.changes=new Rd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class U1{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zf(e).put(r)}removeEntry(e,t,r){return Zf(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],yD(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return Zf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qv(t))},(s,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return Zf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qv(t))},(s,u)=>{r={document:this.jn(t,u),size:ID(u)}}).next(()=>r)}getEntries(e,t){let r=Ps();return this.zn(e,t,(s,u)=>{const c=this.jn(s,u);r=r.insert(s,c)}).next(()=>r)}Hn(e,t){let r=Ps(),s=new Cr(Qe.comparator);return this.zn(e,t,(u,c)=>{const g=this.jn(u,c);r=r.insert(u,g),s=s.insert(u,ID(c))}).next(()=>({documents:r,Jn:s}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let s=new An(XR);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(Qv(s.first()),Qv(s.last())),c=s.getIterator();let g=c.getNext();return Zf(e).Z({index:"documentKeyIndex",range:u},(_,D,S)=>{const N=Qe.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&XR(g,N)<0;)r(g,null),g=c.getNext();g&&g.isEqual(N)&&(r(g,D),g=c.hasNext()?c.getNext():null),g?S.j(Qv(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),yD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zf(e).W(IDBKeyRange.bound(c,g,!0)).next(_=>{let D=Ps();for(const S of _){const N=this.jn(Qe.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);N.isFoundDocument()&&(Fv(t,N)||s.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,s){let u=Ps();const c=QR(t,r),g=QR(t,ji.max());return Zf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(_,D,S)=>{const N=this.jn(Qe.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new V1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return YR(e).get("remoteDocumentGlobalKey").next(t=>(_t(!!t),t))}Qn(e,t){return YR(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function D1(n,e){let t;if(e.document)t=mR(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),s=Hf(e.noDocument.readTime);t=Gn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ut();{const r=Qe.fromSegments(e.unknownDocument.path),s=Hf(e.unknownDocument.version);t=Gn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Hn(r[0],r[1]);return Tt.fromTimestamp(s)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return Gn.newInvalidDocument(e)}}function KR(n){return new U1(n)}class V1 extends ZR{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Rd(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new An((u,c)=>jt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const _=MR(this.Yn.yt,c);s=s.add(u.path.popLast());const D=ID(_);r+=D-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=MR(this.Yn.yt,c.convertToNoDocument(Tt.min()));t.push(this.Yn.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:s})=>(s.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function YR(n){return gi(n,"remoteDocumentGlobal")}function Zf(n){return gi(n,"remoteDocumentsV14")}function Qv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QR(n,e){const t=e.documentKey.path.toArray();return[n,yD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XR(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=jt(t[u],r[u]),s)return s;return s=jt(t.length,r.length),s||(s=jt(t[t.length-2],r[r.length-2]),s||jt(t[t.length-1],r[r.length-1]))}class B1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&Uv(r.mutation,s,ks.empty(),Hn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const s=Du();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let c=Vv();return u.forEach((g,_)=>{c=c.insert(g,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Du();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((c,g)=>{t.set(c,g)})})}computeViews(e,t,r,s){let u=Ps();const c=Bv(),g=Bv();return t.forEach((_,D)=>{const S=r.get(D.key);s.has(D.key)&&(void 0===S||S.mutation instanceof zl)?u=u.insert(D.key,D):void 0!==S?(c.set(D.key,S.mutation.getFieldMask()),Uv(S.mutation,D,S.mutation.getFieldMask(),Hn.now())):c.set(D.key,ks.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,S)=>c.set(D,S)),t.forEach((D,S)=>{var N;return g.set(D,new B1(S,null!==(N=c.get(D))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Bv();let s=new Cr((c,g)=>c-g),u=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const g of c)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let S=r.get(_)||ks.empty();S=g.applyToLocalView(D,S),r.set(_,S);const N=(s.get(g.batchId)||Jt()).add(_);s=s.insert(g.batchId,N)})}).next(()=>{const c=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,S=_.value,N=sR();S.forEach($=>{if(!u.has($)){const Q=Yx(t.get($),r.get($));null!==Q&&N.set($,Q),u=u.add($)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):nS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const c=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ue.resolve(Du());let g=-1,_=u;return c.next(D=>ue.forEach(D,(S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(S)?ue.resolve():this.remoteDocumentCache.getEntry(e,S).next($=>{_=_.insert(S,$)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,Jt())).next(S=>({batchId:g,changes:iR(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let s=Vv();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Vv();return this.indexManager.getCollectionParents(e,s).next(c=>ue.forEach(c,g=>{const _=(D=t,S=g.child(s),new Gl(S,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,Gn.newInvalidDocument(D)))});let c=Vv();return u.forEach((g,_)=>{const D=s.get(g);void 0!==D&&Uv(D.mutation,_,ks.empty(),Hn.now()),Fv(t,_)&&(c=c.insert(g,_))}),c})}}class j1{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:pS(r.bundledQuery),readTime:kr(r.readTime)}),ue.resolve();var r}}class $1{constructor(){this.overlays=new Cr(Qe.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Du();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.oe(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.es.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=Du(),u=t.length+1,c=new Qe(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Cr((D,S)=>D-S);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let S=u.get(D.largestBatchId);null===S&&(S=Du(),u=u.insert(D.largestBatchId,S)),S.set(D.getKey(),D)}}const g=Du(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,S)=>g.set(D,S)),!(g.size()>=s)););return ue.resolve(g)}oe(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const c=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new fS(t,r));let u=this.es.get(t);void 0===u&&(u=Jt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class ES{constructor(){this.ns=new An(mi.ss),this.rs=new An(mi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new mi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new mi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Qe(new on([])),r=new mi(t,e),s=new mi(t,e+1),u=[];return this.rs.forEachInRange([r,s],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qe(new on([])),r=new mi(t,e),s=new mi(t,e+1);let u=Jt();return this.rs.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new mi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class mi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qe.comparator(e.key,t.key)||jt(e._s,t._s)}static os(e,t){return jt(e._s,t._s)||Qe.comparator(e.key,t.key)}}class H1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new An(mi.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.ws;this.ws++;const c=new dS(u,t,r,s);this.mutationQueue.push(c);for(const g of s)this.gs=this.gs.add(new mi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),u=s<0?0:s;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new mi(t,0),s=new mi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,s],c=>{const g=this.ys(c._s);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new An(jt);return t.forEach(s=>{const u=new mi(s,0),c=new mi(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],g=>{r=r.add(g._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const c=new mi(new Qe(u),0);let g=new An(jt);return this.gs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(g=g.add(_._s)),!0)},c),ue.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const s=this.ys(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){_t(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,s=>{const u=new mi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new mi(t,0),s=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class G1{constructor(e){this.Es=e,this.docs=new Cr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Ps();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Gn.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Ps();const c=t.path,g=new Qe(c.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:S}}=_.getNext();if(!c.isPrefixOf(D.path))break;D.path.length>c.length+1||Ff(KT(S),r)<=0||(s.has(S.key)||Fv(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,r,s){ut()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new z1(this)}getSize(e){return ue.resolve(this.size)}}class z1 extends ZR{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class q1{constructor(e){this.persistence=e,this.Rs=new Rd(t=>Uf(t),kv),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new ES,this.targetCount=0,this.vs=Wf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Wf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Rs.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),ue.waitFor(u).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class eN{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Os(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new q1(this),this.indexManager=new R1,this.remoteDocumentCache=new G1(r=>this.referenceDelegate.xs(r)),this.yt=new AR(t),this.Ns=new j1(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new H1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const s=new W1(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(u=>this.referenceDelegate.Os(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class W1 extends eD{constructor(e){super(),this.currentSequenceNumber=e}}class CD{constructor(e){this.persistence=e,this.Fs=new ES,this.$s=null}static Bs(e){return new CD(e)}get Ls(){if(this.$s)return this.$s;throw ut()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const s=Qe.fromPath(r);return this.qs(e,s).next(u=>{u||t.removeEntry(s,Tt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Z1{constructor(e){this.yt=e}$(e,t,r,s){const u=new Em("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DR,{unique:!0}),g.createObjectStore("documentMutations"),tN(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=ue.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),tN(e)),c=c.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(g,_){return _.store("mutations").W().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DR,{unique:!0});const S=_.store("mutations"),N=D.map($=>S.put($));return ue.waitFor(N)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Us(u))),r<6&&s>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&s>=7&&(c=c.next(()=>this.Gs(u))),r<8&&s>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.js(u))),r<11&&s>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:_1});_.createIndex("collectionPathOverlayIndex",v1,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",w1,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:a1});_.createIndex("documentKeyIndex",u1),_.createIndex("collectionGroupIndex",l1)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&s>=15&&(c=c.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:p1}).createIndex("sequenceNumberIndex",g1,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:m1}).createIndex("documentKeyIndex",y1,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,s)=>{t+=ID(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(s=>ue.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(g=>ue.forEach(g,_=>{_t(_.userId===u.userId);const D=Gf(this.yt,_);return HR(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Z((c,g)=>{const _=new on(c),D=[0,us(_)];u.push(t.get(D).next(S=>S?ue.resolve():t.put({targetId:0,path:us(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:f1});const r=t.store("collectionParents"),s=new wS,u=c=>{if(s.add(c)){const g=c.lastSegment(),_=c.popLast();return r.put({collectionId:g,parent:us(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,g)=>{const _=new on(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,g,_],D)=>{const S=Cu(g);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,s)=>{const u=qv(s),c=xR(this.yt,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),s=[];return r.Z((u,c)=>{const g=t.store("remoteDocumentsV14"),_=(D=c,D.document?new Qe(on.fromString(D.document.name).popFirst(5)):D.noDocument?Qe.fromSegments(D.noDocument.path):D.unknownDocument?Qe.fromSegments(D.unknownDocument.path):ut()).path.toArray();var D;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(g.put(S))}).next(()=>ue.waitFor(s))}zs(e,t){const r=t.store("mutations"),s=KR(this.yt),u=new eN(CD.Bs,this.yt.ie);return r.W().next(c=>{const g=new Map;return c.forEach(_=>{var D;let S=null!==(D=g.get(_.userId))&&void 0!==D?D:Jt();Gf(this.yt,_).keys().forEach(N=>S=S.add(N)),g.set(_.userId,S)}),ue.forEach(g,(_,D)=>{const S=new fr(D),N=_D.re(this.yt,S),$=u.getIndexManager(S),Q=DD.re(S,this.yt,$,u.referenceDelegate);return new JR(s,Q,N,$).recalculateAndSaveOverlaysForDocumentKeys(new cS(t,Os.at),_).next()})})}}function tN(n){n.createObjectStore("targetDocuments",{keyPath:d1}).createIndex("documentTargetsIndex",h1,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",c1,{unique:!0}),n.createObjectStore("targetGlobal")}const IS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DS{constructor(e,t,r,s,u,c,g,_,D,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=g,this.Js=D,this.Ys=S,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!DS.C())throw new Fe(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new L1(this,s),this.ii=t+"main",this.yt=new AR(_),this.ri=new Js(this.ii,this.Xs,new Z1(this.yt)),this.Cs=new O1(this.referenceDelegate,this.yt),this.remoteDocumentCache=KR(this.yt),this.Ns=new b1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(ce.FAILED_PRECONDITION,IS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Os(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>TD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if($l(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Xv(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return TD(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=gi(r,"clientMetadata");return s.W().next(u=>{const c=e.Ii(u,18e5),g=u.filter(_=>-1===c.indexOf(_));return ue.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Xv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(ce.FAILED_PRECONDITION,IS);return!1}}return!(!this.networkEnabled||!this.inForeground)||TD(e).W().next(r=>void 0===this.Ii(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new cS(t,Os.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>TD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return DD.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N1(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return _D.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?I1:14===c?SR:13===c?TR:12===c?E1:11===c?CR:void ut();var c;let g;return this.ri.runTransaction(e,s,u,_=>(g=new cS(_,this.Ss?this.Ss.next():Os.at),"readwrite-primary"===t?this.fi(g).next(D=>!!D||this.di(g)).next(D=>{if(!D)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(ce.FAILED_PRECONDITION,JI);return r(g)}).next(D=>this.wi(g).next(()=>D)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return Xv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(ce.FAILED_PRECONDITION,IS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xv(e).put("owner",t)}static C(){return Js.C()}_i(e){const t=Xv(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Kt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xv(n){return gi(n,"owner")}function TD(n){return gi(n,"clientMetadata")}function bS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class CS{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=s}static Ci(e,t){let r=Jt(),s=Jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new CS(e,t.fromCache,r,s)}}class nN{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.ki(e,t).next(u=>u||this.Oi(e,t,s,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(Ux(t))return ue.resolve(null);let r=as(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=cD(t,null,"F"),r=as(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Jt(...u);return this.Ni.getDocuments(e,c).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.Fi(t,g);return this.$i(t,D,c,_.readTime)?this.ki(e,cD(t,null,"F")):this.Bi(e,D,t,_)}))})))}Oi(e,t,r,s){return Ux(t)||s.isEqual(Tt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,s)?this.Mi(e,t):(Av()<=ya.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),iS(t)),this.Bi(e,c,t,wm(s,-1)))})}Fi(e,t){let r=new An(jx(e));return t.forEach((s,u)=>{Fv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Mi(e,t){return Av()<=ya.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",iS(t)),this.Ni.getDocumentsMatchingQuery(e,t,ji.min())}Bi(e,t,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class K1{constructor(e,t,r,s){this.persistence=e,this.Li=t,this.yt=s,this.qi=new Cr(jt),this.Ui=new Rd(u=>Uf(u),kv),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function rN(n,e,t,r){return new K1(n,e,t,r)}function iN(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,ye.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let _=Jt();for(const D of s){c.push(D.batchId);for(const S of D.mutations)_=_.add(S.key)}for(const D of u){g.push(D.batchId);for(const S of D.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(D=>({ji:D,removedBatchIds:c,addedBatchIds:g}))})})}),TS.apply(this,arguments)}function Y1(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,g,_,D){const S=_.batch,N=S.keys();let $=ue.resolve();return N.forEach(Q=>{$=$.next(()=>D.getEntry(g,Q)).next(ne=>{const Oe=_.docVersions.get(Q);_t(null!==Oe),ne.version.compareTo(Oe)<0&&(S.applyToRemoteDocument(ne,_),ne.isValidDocument()&&(ne.setReadTime(_.commitVersion),D.addEntry(ne)))})}),$.next(()=>c.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let g=Jt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(g=g.add(c.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function sN(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Q1(n,e){const t=et(n),r=e.snapshotVersion;let s=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.qi;const g=[];e.targetChanges.forEach((S,N)=>{const $=s.get(N);if(!$)return;g.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,N)));let Q=$.withSequenceNumber(u.currentSequenceNumber);var ne,Oe,ke;e.targetMismatches.has(N)?Q=Q.withResumeToken(w.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):S.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(S.resumeToken,r)),s=s.insert(N,Q),Oe=Q,ke=S,(0===(ne=$).resumeToken.approximateByteSize()||Oe.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,Q))});let _=Ps(),D=Jt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(oN(u,c,e.documentUpdates).next(S=>{_=S.Wi,D=S.zi})),!r.isEqual(Tt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return ue.waitFor(g).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.qi=s,u))}function oN(n,e,t){let r=Jt(),s=Jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Ps();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(Tt.min())?(e.removeEntry(g,_.readTime),c=c.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),c=c.insert(g,_)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{Wi:c,zi:s}})}function X1(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fm(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Cs.getTargetData(r,e).next(u=>u?(s=u,ue.resolve(s)):t.Cs.allocateTargetId(r).next(c=>(s=new Nd(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.qi.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Lm(n,e,t){return SS.apply(this,arguments)}function SS(){return SS=(0,ye.Z)(function*(n,e,t){const r=et(n),s=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!$l(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}),SS.apply(this,arguments)}function SD(n,e,t){const r=et(n);let s=Tt.min(),u=Jt();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,_,D){const S=et(g),N=S.Ui.get(D);return void 0!==N?ue.resolve(S.qi.get(N)):S.Cs.getTargetData(_,D)}(r,c,as(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?s:Tt.min(),t?u:Jt())).next(g=>(lN(r,Bx(e),g),{documents:g,Hi:u})))}function aN(n,e){const t=et(n),r=et(t.Cs),s=t.qi.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(c=>c?c.target:null))}function uN(n,e){const t=et(n),r=t.Ki.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,wm(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(lN(t,e,s),s))}function lN(n,e,t){let r=n.Ki.get(e)||Tt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function AS(){return AS=(0,ye.Z)(function*(n,e,t,r){const s=et(n);let u=Jt(),c=Ps();for(const D of t){const S=e.Ji(D.metadata.name);D.document&&(u=u.add(S));const N=e.Yi(D);N.setReadTime(e.Xi(D.metadata.readTime)),c=c.insert(S,N)}const g=s.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Fm(s,(D=r,as(Tm(on.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>oN(D,g,c).next(S=>(g.apply(D),S)).next(S=>s.Cs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>s.Cs.addMatchingKeys(D,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,S.Wi,S.zi)).next(()=>S.Wi)))}),AS.apply(this,arguments)}function eP(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,ye.Z)(function*(n,e,t=Jt()){const r=yield Fm(n,as(pS(e.bundledQuery))),s=et(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(w.EMPTY_BYTE_STRING,c);return s.qi=s.qi.insert(g.targetId,g),s.Cs.updateTargetData(u,g).next(()=>s.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ns.saveNamedQuery(u,e))})}),MS.apply(this,arguments)}function cN(n,e){return`firestore_clients_${n}_${e}`}function dN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function xS(n,e){return`firestore_targets_${n}_${e}`}class AD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Zi(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Fe(s.error.code,s.error.message))),c?new AD(e,t,s.state,u):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Fe(r.error.code,r.error.message))),u?new Jv(e,r.state,s):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class MD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=pD();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=f(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new MD(e,u):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class RS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new RS(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class NS{constructor(){this.activeTargetIds=pD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OS{constructor(e,t,r,s,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Cr(jt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=cN(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new NS),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const u=e.getItem(cN(e.persistenceKey,s));if(u){const c=MD.Zi(s,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const s=e.yr(r);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(xS(this.persistenceKey,e));if(r){const s=Jv.Zi(e,r);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Vr(s,null)}{const s=t.Sr(r.key,r.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const s=t.Dr(r.key,r.newValue);if(s)return t.Cr(s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Nr(r.key,r.newValue);if(s)return t.kr(s)}}else if(r.key===t.wr){if(null!==r.newValue){const s=t.yr(r.newValue);if(s)return t.pr(s)}}else if(r.key===t.hr){const s=function(u){let c=Os.at;if(null!=u)try{const g=JSON.parse(u);_t("number"==typeof g),c=g}catch(g){br("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);s!==Os.at&&t.sequenceNumberHandler(s)}else if(r.key===t.mr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const s=new AD(this.currentUser,e,t,r),u=dN(this.persistenceKey,this.currentUser,e);this.setItem(u,s.tr())}Er(e){const t=dN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const s=xS(this.persistenceKey,e),u=new Jv(e,t,r);this.setItem(s,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return MD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),s=Number(r[1]);return AD.Zi(new fr(void 0!==r[2]?r[2]:null),s,t)}Nr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Jv.Zi(s,t)}yr(e){return RS.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),u=this.Ir(r),c=[],g=[];return u.forEach(_=>{s.has(_)||c.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(c,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=pD();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class hN{constructor(){this.Lr=new NS,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new NS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tP{Ur(e){}shutdown(){}}class fN{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class iP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,s,u){const c=this.ho(e,t);Ve("RestConnection","Sending: ",c,r);const g={};return this.lo(g,s,u),this.fo(e,c,g,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw Eu("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,s,u,c){return this.ao(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.oo}/v1/${t}:${nP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,c)=>{const g=new ZI;g.setWithCredentials(!0),g.listenOnce(Tv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zI.NO_ERROR:const D=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(D)),u(D);break;case zI.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Fe(ce.DEADLINE_EXCEEDED,"Request time out"));break;case zI.HTTP_ERROR:const S=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const $=N?.error;if($&&$.status&&$.message){const Q=function(ne){const Oe=ne.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Oe)>=0?Oe:ce.UNKNOWN}($.status);c(new Fe(Q,$.message))}else c(new Fe(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Fe(ce.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(s);g.send(t,"POST",_,r,15)})}wo(e,t,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=$T(),c=GI(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new WI({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=s.join("");Ve("Connection","Creating WebChannel: "+_,g);const D=u.createWebChannel(_,g);let S=!1,N=!1;const $=new rP({Hr:ne=>{N?Ve("Connection","Not sending because WebChannel is closed:",ne):(S||(Ve("Connection","Opening WebChannel transport."),D.open(),S=!0),Ve("Connection","WebChannel sending:",ne),D.send(ne))},Jr:()=>D.close()}),Q=(ne,Oe,ke)=>{ne.listen(Oe,Pt=>{try{ke(Pt)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return Q(D,kf.EventType.OPEN,()=>{N||Ve("Connection","WebChannel transport opened.")}),Q(D,kf.EventType.CLOSE,()=>{N||(N=!0,Ve("Connection","WebChannel transport closed"),$.io())}),Q(D,kf.EventType.ERROR,ne=>{N||(N=!0,Eu("Connection","WebChannel transport errored:",ne),$.io(new Fe(ce.UNAVAILABLE,"The operation could not be completed")))}),Q(D,kf.EventType.MESSAGE,ne=>{var Oe;if(!N){const ke=ne.data[0];_t(!!ke);const Ft=ke.error||(null===(Oe=ke[0])||void 0===Oe?void 0:Oe.error);if(Ft){Ve("Connection","WebChannel received error:",Ft);const It=Ft.status;let vt=function(qt){const gr=Zr[qt];if(void 0!==gr)return nR(gr)}(It),Ot=Ft.message;void 0===vt&&(vt=ce.INTERNAL,Ot="Unknown error status: "+It+" with message "+Ft.message),N=!0,$.io(new Fe(vt,Ot)),D.close()}else Ve("Connection","WebChannel received:",ke),$.ro(ke)}}),Q(c,qI.STAT_EVENT,ne=>{ne.stat===Sv.PROXY?Ve("Connection","Detected buffering proxy"):ne.stat===Sv.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function pN(){return typeof window<"u"?window:null}function xD(){return typeof document<"u"?document:null}function e0(n){return new Kk(n,!0)}class kS{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class gN{constructor(e,t,r,s,u,c,g,_){this.Hs=e,this.vo=r,this.Vo=s,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new kS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===t&&this.Go(r,s)},r=>{e(()=>{const s=new Fe(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sP extends gN{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Xk(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ut(),s=e.targetChange.targetIds||[],u=function(_,D){return _.wt?(_t(void 0===D||"string"==typeof D),w.fromBase64String(D||"")):(_t(void 0===D||D instanceof Uint8Array),w.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(_){const D=void 0===_.code?ce.UNKNOWN:nR(_.code);return new Fe(D,_.message||"")}(c);t=new aR(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=bu(n,r.document.name),u=kr(r.document.updateTime),c=r.document.createTime?kr(r.document.createTime):Tt.min(),g=new Ri({mapValue:{fields:r.document.fields}}),_=Gn.newFoundDocument(s,u,c,g);t=new gD(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=bu(n,r.document),u=r.readTime?kr(r.readTime):Tt.min(),c=Gn.newNoDocument(s,u);t=new gD([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=bu(n,r.document);t=new gD([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return ut();{const r=e.filter,u=new Bk(r.count||0);t=new oR(r.targetId,u)}}var _;return t}(this.yt,e),r=function(s){if(!("targetChange"in s))return Tt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?kr(u.readTime):Tt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Gv(this.yt),t.addTarget=function(s,u){let c;const g=u.target;return c=aD(g)?{documents:yR(s,g)}:{query:lS(s,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=dR(s,u.resumeToken):u.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Rm(s,u.snapshotVersion.toTimestamp())),c}(this.yt,e);const r=function e1(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Gv(this.yt),t.removeTarget=e,this.Bo(t)}}class oP extends gN{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Jk(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,s){let u=kr(r.updateTime?r.updateTime:s);return u.isEqual(Tt.min())&&(u=kr(s)),new Lk(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Zo(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Gv(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>zv(this.yt,r))};this.Bo(t)}}class aP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new Fe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.ao(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Fe(ce.UNKNOWN,s.toString())})}_o(e,t,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class lP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(br(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class cP{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,ye.Z)(function*(){var _;ql(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ye.Z)(function*(D){const S=et(D);S._u.add(4),yield Um(S),S.gu.set("Unknown"),S._u.delete(4),yield t0(S)}),function(D){return _.apply(this,arguments)})(c))}))}),this.gu=new lP(r,s)}}function t0(n){return FS.apply(this,arguments)}function FS(){return FS=(0,ye.Z)(function*(n){if(ql(n))for(const e of n.wu)yield e(!0)}),FS.apply(this,arguments)}function Um(n){return LS.apply(this,arguments)}function LS(){return LS=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),LS.apply(this,arguments)}function RD(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),BS(t)?VS(t):Bm(t).ko()&&US(t,e))}function n0(n,e){const t=et(n),r=Bm(t);t.du.delete(e),r.ko()&&mN(t,e),0===t.du.size&&(r.ko()?r.Fo():ql(t)&&t.gu.set("Unknown"))}function US(n,e){n.yu.Ot(e.targetId),Bm(n).zo(e)}function mN(n,e){n.yu.Ot(e),Bm(n).Ho(e)}function VS(n){n.yu=new zk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Bm(n).start(),n.gu.uu()}function BS(n){return ql(n)&&!Bm(n).No()&&n.du.size>0}function ql(n){return 0===et(n)._u.size}function yN(n){n.yu=void 0}function dP(n){return jS.apply(this,arguments)}function jS(){return jS=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{US(n,e)})}),jS.apply(this,arguments)}function hP(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,ye.Z)(function*(n,e){yN(n),BS(n)?(n.gu.hu(e),VS(n)):n.gu.set("Unknown")}),$S.apply(this,arguments)}function fP(n,e,t){return HS.apply(this,arguments)}function HS(){return HS=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof aR&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const c=u.cause;for(const g of u.targetIds)s.du.has(g)&&(yield s.remoteSyncer.rejectListen(g,c),s.du.delete(g),s.yu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ND(n,r)}else if(e instanceof gD?n.yu.Kt(e):e instanceof oR?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Tt.min()))try{const r=yield sN(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.yu.Zt(u);return c.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=s.du.get(_);D&&s.du.set(_,D.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const _=s.du.get(g);if(!_)return;s.du.set(g,_.withResumeToken(w.EMPTY_BYTE_STRING,_.snapshotVersion)),mN(s,g);const D=new Nd(_.target,g,1,_.sequenceNumber);US(s,D)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield ND(n,r)}var r}),HS.apply(this,arguments)}function ND(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e,t){if(!$l(e))throw e;n._u.add(1),yield Um(n),n.gu.set("Offline"),t||(t=()=>sN(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield t0(n)}))}),GS.apply(this,arguments)}function _N(n,e){return e().catch(t=>ND(n,t,e))}function Vm(n){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n){const e=et(n),t=Fd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;pP(e);)try{const s=yield X1(e.localStore,r);if(null===s){0===e.fu.length&&t.Fo();break}r=s.batchId,gP(e,s)}catch(s){yield ND(e,s)}vN(e)&&wN(e)}),zS.apply(this,arguments)}function pP(n){return ql(n)&&n.fu.length<10}function gP(n,e){n.fu.push(e);const t=Fd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function vN(n){return ql(n)&&!Fd(n).No()&&n.fu.length>0}function wN(n){Fd(n).start()}function mP(n){return qS.apply(this,arguments)}function qS(){return qS=(0,ye.Z)(function*(n){Fd(n).eu()}),qS.apply(this,arguments)}function yP(n){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n){const e=Fd(n);for(const t of n.fu)e.Xo(t.mutations)}),WS.apply(this,arguments)}function _P(n,e,t){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),s=hS.from(r,e,t);yield _N(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Vm(n)}),ZS.apply(this,arguments)}function vP(n,e){return KS.apply(this,arguments)}function KS(){return KS=(0,ye.Z)(function*(n,e){var t;e&&Fd(n).Yo&&(yield(t=(0,ye.Z)(function*(r,s){if(tR(u=s.code)&&u!==ce.ABORTED){const c=r.fu.shift();Fd(r).Mo(),yield _N(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield Vm(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),vN(n)&&wN(n)}),KS.apply(this,arguments)}function EN(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,ye.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=ql(t);t._u.add(3),yield Um(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield t0(t)}),YS.apply(this,arguments)}function QS(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,ye.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield t0(t)):e||(t._u.add(2),yield Um(t),t.gu.set("Unknown"))}),XS.apply(this,arguments)}function Bm(n){return n.pu||(n.pu=function(e,t,r){const s=et(e);return s.su(),new sP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:dP.bind(null,n),Zr:hP.bind(null,n),Wo:fP.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),BS(n)?VS(n):n.gu.set("Unknown")):(yield n.pu.stop(),yN(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Fd(n){return n.Iu||(n.Iu=function(e,t,r){const s=et(e);return s.su(),new oP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(n.datastore,n.asyncQueue,{Yr:mP.bind(null,n),Zr:vP.bind(null,n),tu:yP.bind(null,n),Zo:_P.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield Vm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class JS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,g=new JS(e,t,c,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jm(n,e){if(br("AsyncQueue",`${e}: ${n}`),$l(n))return new Fe(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class $m{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Vv(),this.sortedSet=new Cr(this.comparator)}static emptySet(e){return new $m(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $m)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new $m;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class IN{constructor(){this.Tu=new Cr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ut():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hm{constructor(e,t,r,s,u,c,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const c=[];return t.forEach(g=>{c.push({type:0,doc:g})}),new Hm(e,t,$m.emptySet(t),c,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class wP{constructor(){this.Au=void 0,this.listeners=[]}}class EP{constructor(){this.queries=new Rd(e=>Vx(e),Pv),this.onlineState="Unknown",this.Ru=new Set}}function eA(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n,e){const t=et(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new wP),s)try{u.Au=yield t.onListen(r)}catch(c){const g=jm(c,`Initialization of query '${iS(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&iA(t)}),tA.apply(this,arguments)}function nA(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n,e){const t=et(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),rA.apply(this,arguments)}function IP(n,e){const t=et(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const g of c.listeners)g.Pu(s)&&(r=!0);c.Au=s}}r&&iA(t)}function DP(n,e,t){const r=et(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function iA(n){n.Ru.forEach(e=>{e.next()})}class sA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Hm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class bP{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class DN{constructor(e){this.yt=e}Ji(e){return bu(this.yt,e)}Yi(e){return e.metadata.exists?mR(this.yt,e.document,!1):Gn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class CP{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bN(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=on.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new DN(this.yt);for(const s of e)if(s.metadata.queries){const u=r.Ji(s.metadata.name);for(const c of s.metadata.queries){const g=(t.get(c)||Jt()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function J1(n,e,t,r){return AS.apply(this,arguments)}(e.localStore,new DN(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const s of e.queries)yield eP(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function bN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class CN{constructor(e){this.key=e}}class TN{constructor(e){this.key=e}}class SN{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=jx(e),this.Qu=new $m(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new IN,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,N)=>{const $=s.get(S),Q=Fv(this.query,N)?N:null,ne=!!$&&this.mutatedKeys.has($.key),Oe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let ke=!1;$&&Q?$.data.isEqual(Q.data)?ne!==Oe&&(r.track({type:3,doc:Q}),ke=!0):this.Hu($,Q)||(r.track({type:2,doc:Q}),ke=!0,(_&&this.Gu(Q,_)>0||D&&this.Gu(Q,D)<0)&&(g=!0)):!$&&Q?(r.track({type:0,doc:Q}),ke=!0):$&&!Q&&(r.track({type:1,doc:$}),ke=!0,(_||D)&&(g=!0)),ke&&(Q?(c=c.add(Q),u=Oe?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,S)=>function(N,$){const Q=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return Q(N)-Q($)}(D.type,S.type)||this.Gu(D.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.Uu;return this.Uu=g,0!==u.length||_?{snapshot:new Hm(this.query,e.Qu,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new IN,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new TN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new CN(r))}),t}tc(e){this.qu=e.Hi,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Hm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class TP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SP{constructor(e){this.key=e,this.nc=!1}}class AP{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Rd(g=>Vx(g),Pv),this.rc=new Map,this.oc=new Set,this.uc=new Cr(Qe.comparator),this.cc=new Map,this.ac=new ES,this.hc={},this.lc=new Map,this.fc=Wf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function MP(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e){const t=MA(n);let r,s;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ec();else{const c=yield Fm(t.localStore,as(e));t.isPrimaryClient&&RD(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield aA(t,e,r,"current"===g,c.resumeToken)}return s}),oA.apply(this,arguments)}function aA(n,e,t,r,s){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e,t,r,s){n._c=(N,$,Q)=>{return(ne=(0,ye.Z)(function*(Oe,ke,Pt,Ft){let It=ke.view.Wu(Pt);It.$i&&(It=yield SD(Oe.localStore,ke.query,!1).then(({documents:qt})=>ke.view.Wu(qt,It)));const vt=Ft&&Ft.targetChanges.get(ke.targetId),Ot=ke.view.applyChanges(It,Oe.isPrimaryClient,vt);return _A(Oe,ke.targetId,Ot.Xu),Ot.snapshot}),function(Oe,ke,Pt,Ft){return ne.apply(this,arguments)})(n,N,$,Q);var ne};const u=yield SD(n.localStore,e,!0),c=new SN(e,u.Hi),g=c.Wu(u.documents),_=$v.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=c.applyChanges(g,n.isPrimaryClient,_);_A(n,t,D.Xu);const S=new TP(e,t,c);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),uA.apply(this,arguments)}function xP(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),s=t.rc.get(r.targetId);if(s.length>1)return t.rc.set(r.targetId,s.filter(u=>!Pv(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Lm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),n0(t.remoteStore,r.targetId),Gm(t,r.targetId)}).catch(jl))):(Gm(t,r.targetId),yield Lm(t.localStore,r.targetId,!0))}),lA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n,e,t){const r=xA(n);try{const s=yield function(u,c){const g=et(u),_=Hn.now(),D=c.reduce(($,Q)=>$.add(Q.key),Jt());let S,N;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Q=Ps(),ne=Jt();return g.Gi.getEntries($,D).next(Oe=>{Q=Oe,Q.forEach((ke,Pt)=>{Pt.isValidDocument()||(ne=ne.add(ke))})}).next(()=>g.localDocuments.getOverlayedDocuments($,Q)).next(Oe=>{S=Oe;const ke=[];for(const Pt of c){const Ft=Vk(Pt,S.get(Pt.key).overlayedDocument);null!=Ft&&ke.push(new zl(Pt.key,Ft,kx(Ft.value.mapValue),ir.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,ke,c)}).next(Oe=>{N=Oe;const ke=Oe.applyToLocalDocumentSet(S,ne);return g.documentOverlayCache.saveOverlays($,Oe.batchId,ke)})}).then(()=>({batchId:N.batchId,changes:iR(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,g){let _=u.hc[u.currentUser.toKey()];_||(_=new Cr(jt)),_=_.insert(c,g),u.hc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield Wl(r,s.changes),yield Vm(r.remoteStore)}catch(s){const u=jm(s,"Failed to persist write");t.reject(u)}}),cA.apply(this,arguments)}function AN(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e){const t=et(n);try{const r=yield Q1(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.cc.get(u);c&&(_t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.nc=!0:s.modifiedDocuments.size>0?_t(c.nc):s.removedDocuments.size>0&&(_t(c.nc),c.nc=!1))}),yield Wl(t,r,e)}catch(r){yield jl(r)}}),dA.apply(this,arguments)}function MN(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ic.forEach((u,c)=>{const g=c.view.bu(e);g.snapshot&&s.push(g.snapshot)}),function(u,c){const g=et(u);g.onlineState=c;let _=!1;g.queries.forEach((D,S)=>{for(const N of S.listeners)N.bu(c)&&(_=!0)}),_&&iA(g)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NP(n,e,t){return hA.apply(this,arguments)}function hA(){return hA=(0,ye.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.cc.get(e),u=s&&s.key;if(u){let c=new Cr(Qe.comparator);c=c.insert(u,Gn.newNoDocument(u,Tt.min()));const g=Jt().add(u),_=new jv(Tt.min(),new Map,new An(jt),c,g);yield AN(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),vA(r)}else yield Lm(r.localStore,e,!1).then(()=>Gm(r,e,t)).catch(jl)}),hA.apply(this,arguments)}function OP(n,e){return fA.apply(this,arguments)}function fA(){return fA=(0,ye.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const s=yield Y1(t.localStore,e);yA(t,r,null),mA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wl(t,s)}catch(s){yield jl(s)}}),fA.apply(this,arguments)}function kP(n,e,t){return pA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e,t){const r=et(n);try{const s=yield function(u,c){const g=et(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,c).next(S=>(_t(null!==S),D=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,c)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);yA(r,e,t),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wl(r,s)}catch(s){yield jl(s)}}),pA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n,e){const t=et(n);ql(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=et(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.lc.get(r)||[];s.push(e),t.lc.set(r,s)}catch(r){const s=jm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),gA.apply(this,arguments)}function mA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function yA(n,e,t){const r=et(n);let s=r.hc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function Gm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||xN(n,r)})}function xN(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(n0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),vA(n))}function _A(n,e,t){for(const r of t)r instanceof CN?(n.ac.addReference(r.key,e),FP(n,r)):r instanceof TN?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||xN(n,r.key)):ut()}function FP(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),vA(n))}function vA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Qe(on.fromString(e)),r=n.fc.next();n.cc.set(r,new SP(t)),n.uc=n.uc.insert(t,r),RD(n.remoteStore,new Nd(as(Tm(t.path)),r,2,Os.at))}}function Wl(n,e,t){return wA.apply(this,arguments)}function wA(){return wA=(0,ye.Z)(function*(n,e,t){const r=et(n),s=[],u=[],c=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{c.push(r._c(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const S=CS.Ci(_.targetId,D);u.push(S)}}))}),yield Promise.all(c),r.sc.Wo(s),yield(g=(0,ye.Z)(function*(_,D){const S=et(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ue.forEach(D,$=>ue.forEach($.Si,Q=>S.persistence.referenceDelegate.addReference(N,$.targetId,Q)).next(()=>ue.forEach($.Di,Q=>S.persistence.referenceDelegate.removeReference(N,$.targetId,Q)))))}catch(N){if(!$l(N))throw N;Ve("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const $=N.targetId;if(!N.fromCache){const Q=S.qi.get($),Oe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);S.qi=S.qi.insert($,Oe)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),wA.apply(this,arguments)}function LP(n,e){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield iN(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(c=>{c.forEach(g=>{g.reject(new Fe(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wl(t,r.ji)}var s}),EA.apply(this,arguments)}function UP(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return Jt().add(r.key);{let s=Jt();const u=t.rc.get(e);if(!u)return s;for(const c of u){const g=t.ic.get(c);s=s.unionWith(g.view.ju)}return s}}function VP(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,ye.Z)(function*(n,e){const t=et(n),r=yield SD(t.localStore,e.query,!0),s=e.view.tc(r);return t.isPrimaryClient&&_A(t,e.targetId,s.Xu),s}),IA.apply(this,arguments)}function BP(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,ye.Z)(function*(n,e){const t=et(n);return uN(t.localStore,e).then(r=>Wl(t,r))}),DA.apply(this,arguments)}function jP(n,e,t,r){return bA.apply(this,arguments)}function bA(){return bA=(0,ye.Z)(function*(n,e,t,r){const s=et(n),u=yield function(c,g){const _=et(c),D=et(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>D.Tn(S,g).next(N=>N?_.localDocuments.getDocuments(S,N):ue.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield Vm(s.remoteStore):"acknowledged"===t||"rejected"===t?(yA(s,e,r||null),mA(s,e),g=e,et(et(s.localStore).mutationQueue).An(g)):ut(),yield Wl(s,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),bA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e){const t=et(n);if(MA(t),xA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield RN(t,r.toArray());t.dc=!0,yield QS(t.remoteStore,!0);for(const u of s)RD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let s=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(Gm(t,c),Lm(t.localStore,c,!0))),n0(t.remoteStore,c)}),yield s,yield RN(t,r),function(u){const c=et(u);c.cc.forEach((g,_)=>{n0(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new Cr(Qe.comparator)}(t),t.dc=!1,yield QS(t.remoteStore,!1)}}),CA.apply(this,arguments)}function RN(n,e,t){return TA.apply(this,arguments)}function TA(){return TA=(0,ye.Z)(function*(n,e,t){const r=et(n),s=[],u=[];for(const c of e){let g;const _=r.rc.get(c);if(_&&0!==_.length){g=yield Fm(r.localStore,as(_[0]));for(const D of _){const S=r.ic.get(D),N=yield VP(r,S);N.snapshot&&u.push(N.snapshot)}}else{const D=yield aN(r.localStore,c);g=yield Fm(r.localStore,D),yield aA(r,NN(D),c,!1,g.resumeToken)}s.push(g)}return r.sc.Wo(u),s}),TA.apply(this,arguments)}function NN(n){return Lx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function HP(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function GP(n,e,t,r){return SA.apply(this,arguments)}function SA(){return SA=(0,ye.Z)(function*(n,e,t,r){const s=et(n);if(s.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=s.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield uN(s.localStore,Bx(u[0])),g=jv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,w.EMPTY_BYTE_STRING);yield Wl(s,c,g);break}case"rejected":yield Lm(s.localStore,e,!0),Gm(s,e,r);break;default:ut()}}),SA.apply(this,arguments)}function zP(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e,t){const r=MA(n);if(r.dc){for(const s of e){if(r.rc.has(s)){Ve("SyncEngine","Adding an already active target "+s);continue}const u=yield aN(r.localStore,s),c=yield Fm(r.localStore,u);yield aA(r,NN(u),c.targetId,!1,c.resumeToken),RD(r.remoteStore,c)}for(const s of t)r.rc.has(s)&&(yield Lm(r.localStore,s,!1).then(()=>{n0(r.remoteStore,s),Gm(r,s)}).catch(jl))}}),AA.apply(this,arguments)}function MA(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NP.bind(null,e),e.sc.Wo=IP.bind(null,e.eventManager),e.sc.wc=DP.bind(null,e.eventManager),e}function xA(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kP.bind(null,e),e}class ON{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.yt=e0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return rN(this.persistence,new nN,e.initialUser,this.yt)}yc(e){return new eN(CD.Bs,this.yt)}gc(e){return new hN}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kN extends ON{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield xA(r.Ac.syncEngine),yield Vm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rN(this.persistence,new nN,e.initialUser,this.yt)}Tc(e,t){return new P1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new yx(t,this.persistence);return new mx(e.asyncQueue,r)}yc(e){const t=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fs.withCacheSize(this.cacheSizeBytes):Fs.DEFAULT;return new DS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,pN(),xD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hN}}class WP extends kN{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Ac.syncEngine;r.sharedClientState instanceof OS&&(r.sharedClientState.syncEngine={Fr:jP.bind(null,s),$r:GP.bind(null,s),Br:zP.bind(null,s),vi:HP.bind(null,s),Mr:BP.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ye.Z)(function*(c){yield function $P(n,e){return CA.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=pN();if(!OS.C(t))throw new Fe(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new OS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class RA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>MN(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=LP.bind(null,r.syncEngine),yield QS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new EP}createDatastore(e){const t=e0(e.databaseInfo.databaseId),r=new iP(e.databaseInfo);return new aP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>MN(this.syncEngine,g,0),c=fN.C()?new fN:new tP,new cP(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,g,_,D){const S=new AP(r,s,u,c,g,_);return D&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=et(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Um(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function NA(n,e,t){if(!t)throw new Fe(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PN(n,e,t,r){if(!0===e&&!0===r)throw new Fe(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FN(n){if(!Qe.isDocumentKey(n))throw new Fe(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LN(n){if(Qe.isDocumentKey(n))throw new Fe(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ut()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OD(n);throw new Fe(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function UN(n,e){if(e<=0)throw new Fe(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const VN=new Map;class BN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,PN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pm;switch(t.type){case"gapi":return new Bl(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=VN.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),VN.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class Ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ni(this.firestore,e,this._query)}}class Tu extends Ni{constructor(e,t,r){super(e,t,Tm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Qe(e))}withConverter(e){return new Tu(this.firestore,e,this._path)}}function $N(n,e,...t){if(n=(0,Kt.m9)(n),NA("collection","path",e),n instanceof r0){const r=on.fromString(e,...t);return LN(r),new Tu(n,null,r)}{if(!(n instanceof zn||n instanceof Tu))throw new Fe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return LN(r),new Tu(n.firestore,null,r)}}function kD(n,e,...t){if(n=(0,Kt.m9)(n),1===arguments.length&&(e=gm.R()),NA("doc","path",e),n instanceof r0){const r=on.fromString(e,...t);return FN(r),new zn(n,null,new Qe(r))}{if(!(n instanceof zn||n instanceof Tu))throw new Fe(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(on.fromString(e,...t));return FN(r),new zn(n.firestore,n instanceof Tu?n.converter:null,new Qe(r))}}function HN(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),(n instanceof zn||n instanceof Tu)&&(e instanceof zn||e instanceof Tu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OA(n,e){return n=(0,Kt.m9)(n),e=(0,Kt.m9)(e),n instanceof Ni&&e instanceof Ni&&n.firestore===e.firestore&&Pv(n._query,e._query)&&n.converter===e.converter}function GN(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class PD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class KP{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),s=Number(r);isNaN(s)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(s);return new bP(JSON.parse(u),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class XP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,c){const g=et(u),_=Gv(g.yt)+"/documents",D={documents:c.map(Q=>Hv(g.yt,Q))},S=yield g._o("BatchGetDocuments",_,D,c.length),N=new Map;S.forEach(Q=>{const ne=function Qk(n,e){return"found"in e?function(t,r){_t(!!r.found);const s=bu(t,r.found.name),u=kr(r.found.updateTime),c=r.found.createTime?kr(r.found.createTime):Tt.min(),g=new Ri({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(s,u,c,g)}(n,e):"missing"in e?function(t,r){_t(!!r.missing),_t(!!r.readTime);const s=bu(t,r.missing),u=kr(r.readTime);return Gn.newNoDocument(s,u)}(n,e):ut()}(g.yt,Q);N.set(ne.key.toString(),ne)});const $=[];return c.forEach(Q=>{const ne=N.get(Q.toString());_t(!!ne),$.push(ne)}),$}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Qe.fromPath(s);e.mutations.push(new sS(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const c=et(s),g=Gv(c.yt)+"/documents",_={writes:u.map(D=>zv(c.yt,D))};yield c.ao("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ut();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Fe(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class JP{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.kc=r.maxAttempts,this.xo=new kS(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new XP(e.datastore),r=e.Mc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Fc(u)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!l(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!tR(t)}return!1}}class eF{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=fr.UNAUTHENTICATED,this.clientId=gm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ye.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=jm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function zN(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield iN(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kA.apply(this,arguments)}function qN(n,e){return PA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield FA(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>EN(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>EN(e.remoteStore,u)),n.onlineComponents=e}),PA.apply(this,arguments)}function FA(n){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield zN(n,new ON)),n.offlineComponents}),LA.apply(this,arguments)}function FD(n){return UA.apply(this,arguments)}function UA(){return UA=(0,ye.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield qN(n,new RA)),n.onlineComponents}),UA.apply(this,arguments)}function WN(n){return FA(n).then(e=>e.persistence)}function LD(n){return FA(n).then(e=>e.localStore)}function VA(n){return FD(n).then(e=>e.remoteStore)}function BA(n){return FD(n).then(e=>e.syncEngine)}function zm(n){return jA.apply(this,arguments)}function jA(){return jA=(0,ye.Z)(function*(n){const e=yield FD(n),t=e.eventManager;return t.onListen=MP.bind(null,e.syncEngine),t.onUnlisten=xP.bind(null,e.syncEngine),t}),jA.apply(this,arguments)}function KN(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,g,_){const D=new PD({next:N=>{u.enqueueAndForget(()=>nA(s,S));const $=N.docs.has(c);!$&&N.fromCache?_.reject(new Fe(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&g&&"server"===g.source?_.reject(new Fe(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new sA(Tm(c.path),D,{includeMetadataChanges:!0,Nu:!0});return eA(s,S)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}function YN(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,c,g,_){const D=new PD({next:N=>{u.enqueueAndForget(()=>nA(s,S)),N.fromCache&&"server"===g.source?_.reject(new Fe(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),S=new sA(c,D,{includeMetadataChanges:!0,Nu:!0});return eA(s,S)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}class uF{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new kS(this,"async_queue_retry"),this.Wc=()=>{const t=xD();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=xD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=xD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Wr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!$l(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,br("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=JS.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(s),s}zc(){this.Kc&&ut()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function $A(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class lF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class qn extends r0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new uF,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||QN(this),this._firestoreClient.terminate()}}function Pr(n){return n._firestoreClient||QN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function QN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _x(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new eF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XN(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield zN(n,t),yield qN(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;Eu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function JN(n){if(n._initialized||n._terminated)throw new Fe(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Su{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Su(w.fromBase64String(e))}catch(t){throw new Fe(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Su(w.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kf{constructor(e){this._methodName=e}}class UD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const vF=/^__.*__$/;class wF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mm(e,this.data,t,this.fieldTransforms)}}class eO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class VD{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new VD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $D(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(tO(this.sa)&&vF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class EF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||e0(e)}da(e,t,r,s=!1){return new VD({sa:e,methodName:t,fa:r,path:rr.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Yf(n){const e=n._freezeSettings(),t=e0(n._databaseId);return new EF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BD(n,e,t,r,s,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,s);qA("Data must be an object, but it was:",c,r);const g=iO(r,c);let _,D;if(u.merge)_=new ks(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const $=WA(e,N,t);if(!c.contains($))throw new Fe(ce.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);oO(S,$)||S.push($)}_=new ks(S),D=c.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,D=c.fieldTransforms;return new wF(new Ri(g),_,D)}class s0 extends Kf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function nO(n,e,t){return new VD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class HA extends Kf{_toFieldTransform(e){return new Lv(e.path,new Sm)}isEqual(e){return e instanceof HA}}class IF extends Kf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nO(this,e,!0),r=this._a.map(u=>Qf(u,t)),s=new Bf(r);return new Lv(e.path,s)}isEqual(e){return this===e}}class DF extends Kf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=nO(this,e,!0),r=this._a.map(u=>Qf(u,t)),s=new jf(r);return new Lv(e.path,s)}isEqual(e){return this===e}}class bF extends Kf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Am(e.yt,Gx(e.yt,this.wa));return new Lv(e.path,t)}isEqual(e){return this===e}}function GA(n,e,t,r){const s=n.da(1,e,t);qA("Data must be an object, but it was:",s,r);const u=[],c=Ri.empty();o(r,(_,D)=>{const S=jD(e,_,t);D=(0,Kt.m9)(D);const N=s.ca(S);if(D instanceof s0)u.push(S);else{const $=Qf(D,N);null!=$&&(u.push(S),c.set(S,$))}});const g=new ks(u);return new eO(c,g,s.fieldTransforms)}function zA(n,e,t,r,s,u){const c=n.da(1,e,t),g=[WA(e,r,t)],_=[s];if(u.length%2!=0)throw new Fe(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(WA(e,u[$])),_.push(u[$+1]);const D=[],S=Ri.empty();for(let $=g.length-1;$>=0;--$)if(!oO(D,g[$])){const Q=g[$];let ne=_[$];ne=(0,Kt.m9)(ne);const Oe=c.ca(Q);if(ne instanceof s0)D.push(Q);else{const ke=Qf(ne,Oe);null!=ke&&(D.push(Q),S.set(Q,ke))}}const N=new ks(D);return new eO(S,N,c.fieldTransforms)}function rO(n,e,t,r=!1){return Qf(t,n.da(r?4:3,e))}function Qf(n,e){if(sO(n=(0,Kt.m9)(n)))return qA("Unsupported field value:",e,n),iO(n,e);if(n instanceof Kf)return function(t,r){if(!tO(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let g=Qf(c,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Kt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gx(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Hn.fromDate(t);return{timestampValue:Rm(r.yt,s)}}if(t instanceof Hn){const s=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rm(r.yt,s)}}if(t instanceof UD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Su)return{bytesValue:dR(r.yt,t._byteString)};if(t instanceof zn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oS(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${OD(t)}`)}(n,e)}function iO(n,e){const t={};return a(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):o(n,(r,s)=>{const u=Qf(s,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function sO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof UD||n instanceof Su||n instanceof zn||n instanceof Kf)}function qA(n,e,t){if(!sO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function WA(n,e,t){if((e=(0,Kt.m9)(e))instanceof Zl)return e._internalPath;if("string"==typeof e)return jD(n,e);throw $D("Field path arguments must be of type string or ",n,!1,void 0,t)}const CF=new RegExp("[~\\*/\\[\\]]");function jD(n,e,t){if(e.search(CF)>=0)throw $D(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zl(...e.split("."))._internalPath}catch{throw $D(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $D(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${s}`),_+=")"),new Fe(ce.INVALID_ARGUMENT,g+n+_)}function oO(n,e){return n.some(t=>t.isEqual(e))}class o0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TF extends o0{data(){return super.data()}}function HD(n,e){return"string"==typeof e?jD(n,e):e instanceof Zl?e._internalPath:e._delegate._internalPath}function aO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ZA{}class a0 extends ZA{}function Ld(n,e,...t){let r=[];e instanceof ZA&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof qm).length,c=s.filter(g=>g instanceof u0).length;if(u>1||u>0&&c>0)throw new Fe(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class u0 extends a0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new u0(e,t,r)}_apply(e){const t=this._parse(e);return dO(e._query,t),new Ni(e.firestore,e.converter,rS(e._query,t))}_parse(e){const t=Yf(e.firestore);return function(s,u,c,g,_,D,S){let N;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Fe(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){cO(S,D);const $=[];for(const Q of S)$.push(lO(g,s,Q));N={arrayValue:{values:$}}}else N=lO(g,s,S)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||cO(S,D),N=rO(c,"where",S,"in"===D||"not-in"===D);return un.create(_,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class qm extends ZA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:In.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const c=s.getFlattenedFilters();for(const g of c)dO(u,g),u=rS(u,g)}(e._query,t),new Ni(e.firestore,e.converter,rS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class KA extends a0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new KA(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new bm(s,u);return function(g,_){if(null===tS(g)){const D=lD(g);null!==D&&hO(0,D,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new Ni(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Gl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class GD extends a0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new GD(e,t,r)}_apply(e){return new Ni(e.firestore,e.converter,cD(e._query,this._limit,this._limitType))}}class zD extends a0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new zD(e,t,r)}_apply(e){const t=uO(e,this.type,this._docOrFields,this._inclusive);return new Ni(e.firestore,e.converter,(s=t,new Gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class qD extends a0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new qD(e,t,r)}_apply(e){const t=uO(e,this.type,this._docOrFields,this._inclusive);return new Ni(e.firestore,e.converter,(s=t,new Gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function uO(n,e,t,r){if(t[0]=(0,Kt.m9)(t[0]),t[0]instanceof o0)return function(s,u,c,g,_){if(!g)throw new Fe(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const D=[];for(const S of Vf(s))if(S.field.isKeyField())D.push(Lf(u,g.key));else{const N=g.data.field(S.field);if(q(N))throw new Fe(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=S.field.canonicalString();throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}D.push(N)}return new xd(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Yf(n.firestore);return function(u,c,g,_,D,S){const N=u.explicitOrderBy;if(D.length>N.length)throw new Fe(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Q=0;Q<D.length;Q++){const ne=D[Q];if(N[Q].field.isKeyField()){if("string"!=typeof ne)throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ne}`);if(!nS(u)&&-1!==ne.indexOf("/"))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ne}' contains a slash.`);const Oe=u.path.child(on.fromString(ne));if(!Qe.isDocumentKey(Oe))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Oe}' is not because it contains an odd number of segments.`);const ke=new Qe(Oe);$.push(Lf(c,ke))}else{const Oe=rO(g,_,ne);$.push(Oe)}}return new xd($,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function lO(n,e,t){if("string"==typeof(t=(0,Kt.m9)(t))){if(""===t)throw new Fe(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nS(e)&&-1!==t.indexOf("/"))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(on.fromString(t));if(!Qe.isDocumentKey(r))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lf(n,new Qe(r))}if(t instanceof zn)return Lf(n,t._key);throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OD(t)}.`)}function cO(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dO(n,e){if(e.isInequality()){const r=lD(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=tS(n);null!==u&&hO(0,s,u)}const t=function(r,s){for(const u of r)for(const c of u.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hO(n,e,t){if(!t.isEqual(e))throw new Fe(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class YA{convertValue(e,t="none"){switch(st(e)){case 0:return null;case 1:return e.booleanValue;case 2:return M(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ut()}}convertObject(e,t){const r={};return o(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new UD(M(e.latitude),M(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ee(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_e(e));default:return null}}convertTimestamp(e){const t=T(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=on.fromString(e);_t(ER(r));const s=new Hl(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return s.isEqual(t)||br(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function WD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class PF extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class Xf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kl extends o0{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new l0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class l0 extends Kl{data(e={}){return super.data(e)}}class Ud{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Xf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new l0(this._firestore,this._userDataWriter,r.key,r,new Xf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new l0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const g=new l0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),D=u.indexOf(c.doc.key)),{type:FF(c.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function pO(n,e){return n instanceof Kl&&e instanceof Kl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ud&&e instanceof Ud&&n._firestore===e._firestore&&OA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vd extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Su(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function gO(n,e,t){n=ln(n,zn);const r=ln(n.firestore,qn),s=WD(n.converter,e,t);return Wm(r,[BD(Yf(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,ir.none())])}function mO(n,e,t,...r){n=ln(n,zn);const s=ln(n.firestore,qn),u=Yf(s);let c;return c="string"==typeof(e=(0,Kt.m9)(e))||e instanceof Zl?zA(u,"updateDoc",n._key,e,t,r):GA(u,"updateDoc",n._key,e),Wm(s,[c.toMutation(n._key,ir.exists(!0))])}function yO(n,...e){var t,r,s;n=(0,Kt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||$A(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if($A(e[c])){const N=e[c];e[c]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[c+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[c+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let _,D,S;if(n instanceof zn)D=ln(n.firestore,qn),S=Tm(n._key.path),_={next:N=>{e[c]&&e[c](QA(D,n,N))},error:e[c+1],complete:e[c+2]};else{const N=ln(n,Ni);D=ln(N.firestore,qn),S=N._query;const $=new Vd(D);_={next:Q=>{e[c]&&e[c](new Ud(D,$,N,Q))},error:e[c+1],complete:e[c+2]},aO(n._query)}return function(N,$,Q,ne){const Oe=new PD(ne),ke=new sA($,Oe,Q);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return eA(yield zm(N),ke)})),()=>{Oe.bc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return nA(yield zm(N),ke)}))}}(Pr(D),S,g,_)}function Wm(n,e){return function(t,r){const s=new Wr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function RP(n,e,t){return cA.apply(this,arguments)}(yield BA(t),r,s)})),s.promise}(Pr(n),e)}function QA(n,e,t){const r=t.docs.get(e._key),s=new Vd(n);return new Kl(n,s,e._key,r,new Xf(t.hasPendingWrites,t.fromCache),e.converter)}const qF={maxAttempts:5};class _O{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yf(e)}set(e,t,r){this._verifyNotCommitted();const s=Bd(e,this._firestore),u=WD(s.converter,t,r),c=BD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,ir.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Bd(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Zl?zA(this._dataReader,"WriteBatch.update",u._key,t,r,s):GA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Bd(e,this._firestore);return this._mutations=this._mutations.concat(new xm(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bd(n,e){if((n=(0,Kt.m9)(n)).firestore!==e)throw new Fe(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class WF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yf(e)}get(e){const t=Bd(e,this._firestore),r=new PF(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return ut();const u=s[0];if(u.isFoundDocument())return new o0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new o0(this._firestore,r,t._key,null,t.converter);throw ut()})}set(e,t,r){const s=Bd(e,this._firestore),u=WD(s.converter,t,r),c=BD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=Bd(e,this._firestore);let c;return c="string"==typeof(t=(0,Kt.m9)(t))||t instanceof Zl?zA(this._dataReader,"Transaction.update",u._key,t,r,s):GA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Bd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Bd(e,this._firestore),r=new Vd(this._firestore);return super.get(e).then(s=>new Kl(this._firestore,r,t._key,s._document,new Xf(!1,!1),t.converter))}}function XA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function wO(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function EO(){if(!function y(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vl=Rs.SDK_VERSION,(0,Rs._registerComponent)(new _u.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),c=new qn(new GT(t.getProvider("auth-internal")),new Rv(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Fe(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hl(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(Pf,"3.8.3",n),(0,Rs.registerVersion)(Pf,"3.8.3","esm2017")}();class c0{constructor(e){this._delegate=e}static fromBase64String(e){return EO(),new c0(Su.fromBase64String(e))}static fromUint8Array(e){return wO(),new c0(Su.fromUint8Array(e))}toBase64(){return EO(),this._delegate.toBase64()}toUint8Array(){return wO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JA(n){return function nL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rL{enableIndexedDbPersistence(e,t){return function dF(n,e){JN(n=ln(n,qn));const t=Pr(n),r=n._freezeSettings(),s=new RA;return XN(t,s,new kN(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hF(n){JN(n=ln(n,qn));const e=Pr(n),t=n._freezeSettings(),r=new RA;return XN(e,r,new WP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fF(n){if(n._initialized&&!n._terminated)throw new Fe(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Js.C())return Promise.resolve();const s=r+"main";yield Js.delete(s)}),function(r){return t.apply(this,arguments)})(bS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Eu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function jN(n,e,t,r={}){var s;const u=(n=ln(n,r0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Eu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=fr.MOCK_USER;else{c=(0,Kt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Fe(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new fr(_)}n._authCredentials=new HT(new KI(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function gF(n){return function tF(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield WN(n),t=yield VA(n);return e.setNetworkEnabled(!0),function(r){const s=et(r);return s._u.delete(0),t0(s)}(t)}))}(Pr(n=ln(n,qn)))}(this._delegate)}disableNetwork(){return function mF(n){return function nF(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield WN(n),t=yield VA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=et(s);u._u.add(0),yield Um(u),u.gu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Pr(n=ln(n,qn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,PN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pF(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function PP(n,e){return gA.apply(this,arguments)}(yield BA(e),t)})),t.promise}(Pr(n=ln(n,qn)))}(this._delegate)}onSnapshotsInSync(e){return function zF(n,e){return function sF(n,e){const t=new PD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zm(n),s=t,et(r).Ru.add(s),void s.next();var r,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield zm(n),s=t,void et(r).Ru.delete(s);var r,s}))}}(Pr(n=ln(n,qn)),$A(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Zm(this,$N(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new jo(this,kD(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new cs(this,function ZP(n,e){if(n=ln(n,r0),NA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ni(n,null,(t=e,new Gl(on.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ZF(n,e,t){n=ln(n,qn);const r=Object.assign(Object.assign({},qF),t);return function(s){if(s.maxAttempts<1)throw new Fe(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,c){const g=new Wr;return s.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const _=yield function ZN(n){return FD(n).then(e=>e.datastore)}(s);new JP(s.asyncQueue,_,c,u,g).run()})),g.promise}(Pr(n),s=>e(new WF(n,s)),r)}(this._delegate,t=>e(new DO(this,t)))}batch(){return Pr(this._delegate),new bO(new _O(this._delegate,e=>Wm(this._delegate,e)))}loadBundle(e){return function yF(n,e){const t=Pr(n=ln(n,qn)),r=new lF;return function oF(n,e,t,r){const s=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return GN(_,D);if(_ instanceof ArrayBuffer)return GN(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new KP(_,c);var _}(t,e0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function qP(n,e,t){const r=et(n);var s;(s=(0,ye.Z)(function*(u,c,g){try{const _=yield c.getMetadata();if(yield function($,Q){const ne=et($),Oe=kr(Q.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",ke=>ne.Ns.getBundleMetadata(ke,Q.id)).then(ke=>!!ke&&ke.createTime.compareTo(Oe)>=0)}(u.localStore,_))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(bN(_));const D=new CP(_,u.localStore,c.yt);let S=yield c.mc();for(;S;){const $=yield D.Fu(S);$&&g._updateProgress($),S=yield c.mc()}const N=yield D.complete();return yield Wl(u,N.Lu,void 0),yield function($,Q){const ne=et($);return ne.persistence.runTransaction("Save bundle","readwrite",Oe=>ne.Ns.saveBundleMetadata(Oe,Q))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(_){return Eu("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,c,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield BA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _F(n,e){return function aF(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=et(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ns.getNamedQuery(u,r))}(yield LD(n),e)}))}(Pr(n=ln(n,qn)),e).then(t=>t?new Ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new cs(this,t):null)}}class ZD extends YA{constructor(e){super(),this.firestore=e}convertBytes(e){return new c0(new Su(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return jo.forKey(t,this.firestore,null)}}class DO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}get(e){const t=ep(e);return this._delegate.get(t).then(r=>new d0(this._firestore,new Kl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ep(e);return r?(XA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ep(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ep(e);return this._delegate.delete(t),this}}class bO{constructor(e){this._delegate=e}set(e,t,r){const s=ep(e);return r?(XA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ep(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ep(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new l0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new h0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Jf(e,new ZD(e),t),s.set(t,u)),u}}Jf.INSTANCES=new WeakMap;class jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new jo(t,new zn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new jo(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Zm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Zm(this.firestore,$N(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Kt.m9)(e))instanceof zn&&HN(this._delegate,e)}set(e,t){t=XA("DocumentReference.set",t);try{return t?gO(this._delegate,e,t):gO(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?mO(this._delegate,e):mO(this._delegate,e,t,...r)}catch(s){throw ls(s,"updateDoc()","DocumentReference.update()")}}delete(){return function HF(n){return Wm(ln(n.firestore,qn),[new xm(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=CO(e),r=TO(e,s=>new d0(this.firestore,new Kl(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return yO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function UF(n){n=ln(n,zn);const e=ln(n.firestore,qn),t=Pr(e),r=new Vd(e);return function rF(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const g=yield function(_,D){const S=et(_);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,D))}(s,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Fe(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=jm(g,`Failed to get document '${u} from cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield LD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Kl(e,r,n._key,s,new Xf(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function VF(n){n=ln(n,zn);const e=ln(n.firestore,qn);return KN(Pr(e),n._key,{source:"server"}).then(t=>QA(e,n,t))}(this._delegate):function LF(n){n=ln(n,zn);const e=ln(n.firestore,qn);return KN(Pr(e),n._key).then(t=>QA(e,n,t))}(this._delegate),t.then(r=>new d0(this.firestore,new Kl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new jo(this.firestore,this._delegate.withConverter(e?Jf.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function CO(n){for(const e of n)if("object"==typeof e&&!JA(e))return e;return{}}function TO(n,e){var t,r;let s;return s=JA(n[0])?n[0]:JA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class d0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return pO(this._delegate,e._delegate)}}class h0 extends d0{data(e){const t=this._delegate.data(e);return function fx(n,e){n||ut()}(void 0!==t),t}}class cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ZD(e)}where(e,t,r){try{return new cs(this.firestore,Ld(this._delegate,function SF(n,e,t){const r=e,s=HD("where",n);return u0._create(s,r,t)}(e,t,r)))}catch(s){throw ls(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new cs(this.firestore,Ld(this._delegate,function AF(n,e="asc"){const t=e,r=HD("orderBy",n);return KA._create(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new cs(this.firestore,Ld(this._delegate,function MF(n){return UN("limit",n),GD._create("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new cs(this.firestore,Ld(this._delegate,function xF(n){return UN("limitToLast",n),GD._create("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new cs(this.firestore,Ld(this._delegate,function RF(...n){return zD._create("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new cs(this.firestore,Ld(this._delegate,function NF(...n){return zD._create("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new cs(this.firestore,Ld(this._delegate,function OF(...n){return qD._create("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new cs(this.firestore,Ld(this._delegate,function kF(...n){return qD._create("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return OA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function jF(n){n=ln(n,Ni);const e=ln(n.firestore,qn),t=Pr(e),r=new Vd(e);return function iF(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,c){try{const g=yield SD(s,u,!0),_=new SN(u,g.Hi),D=_.Wu(g.documents),S=_.applyChanges(D,!1);c.resolve(S.snapshot)}catch(g){const _=jm(g,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(s,u,c){return r.apply(this,arguments)})(yield LD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ud(e,r,n,s))}(this._delegate):"server"===e?.source?function $F(n){n=ln(n,Ni);const e=ln(n.firestore,qn),t=Pr(e),r=new Vd(e);return YN(t,n._query,{source:"server"}).then(s=>new Ud(e,r,n,s))}(this._delegate):function BF(n){n=ln(n,Ni);const e=ln(n.firestore,qn),t=Pr(e),r=new Vd(e);return aO(n._query),YN(t,n._query).then(s=>new Ud(e,r,n,s))}(this._delegate),t.then(r=>new eM(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CO(e),r=TO(e,s=>new eM(this.firestore,new Ud(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return yO(this._delegate,t,r)}withConverter(e){return new cs(this.firestore,this._delegate.withConverter(e?Jf.getInstance(this.firestore,e):null))}}class sL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new h0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class eM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new cs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new h0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new h0(this._firestore,r))})}isEqual(e){return pO(this._delegate,e._delegate)}}class Zm extends cs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new jo(this.firestore,e):null}doc(e){try{return new jo(this.firestore,void 0===e?kD(this._delegate):kD(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function GF(n,e){const t=ln(n.firestore,qn),r=kD(n),s=WD(n.converter,e);return Wm(t,[BD(Yf(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new jo(this.firestore,t))}isEqual(e){return HN(this._delegate,e._delegate)}withConverter(e){return new Zm(this.firestore,this._delegate.withConverter(e?Jf.getInstance(this.firestore,e):null))}}function ep(n){return ln(n,zn)}class tM{constructor(...e){this._delegate=new Zl(...e)}static documentId(){return new tM(rr.keyField().canonicalString())}isEqual(e){return(e=(0,Kt.m9)(e))instanceof Zl&&this._delegate._internalPath.isEqual(e._internalPath)}}class tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function YF(){return new HA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tp(e)}static delete(){const e=function KF(){return new s0("deleteField")}();return e._methodName="FieldValue.delete",new tp(e)}static arrayUnion(...e){const t=function QF(...n){return new IF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tp(t)}static arrayRemove(...e){const t=function XF(...n){return new DF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tp(t)}static increment(e){const t=function JF(n){return new bF("increment",n)}(e);return t._methodName="FieldValue.increment",new tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oL={Firestore:IO,GeoPoint:UD,Timestamp:Hn,Blob:c0,Transaction:DO,WriteBatch:bO,DocumentReference:jo,DocumentSnapshot:d0,Query:cs,QueryDocumentSnapshot:h0,QuerySnapshot:eM,CollectionReference:Zm,FieldPath:tM,FieldValue:tp,setLogLevel:function iL(n){!function hx(n){wu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function SO(n,e){return function lL(n,e=tI.z){return new Ye.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function nM(n,e){return SO(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function KD(n,e){return nM(n,e).pipe(Oh(void 0),U_(),(0,dt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const _=s.find(S=>S.doc.ref.isEqual(c.ref)),D=t?.payload.docs.find(S=>S.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function AO(n,e,t){return KD(n,t).pipe(Ph((r,s)=>function dL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return rM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function uT(n,e=xh.y){return n=n??lT,(0,ti.e)((t,r)=>{let s,u=!0;t.subscribe((0,Cn.x)(r,c=>{const g=e(c);(u||!n(s,g))&&(u=!1,s=g,r.next(c))}))})}(),(0,dt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function rM(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function MO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uL(n){(function aL(n,e){n.INTERNAL.registerComponent(new _u.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},oL)))})(n,(e,t)=>new IO(e,t,new rL)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(V_.Z);class xO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=KD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Oh(void 0),U_(),rs(([r,s])=>s.length>0||!r),(0,dt.U)(([r,s])=>s),dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MO(e);return AO(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return nM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dn.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(dn.iC)}add(e){return this.ref.add(e)}doc(e){return new RO(this.ref.doc(e),this.afs)}}class RO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=NO(r,t);return new xO(s,u,this.afs)}snapshotChanges(){return function cL(n,e){return SO(n,e).pipe(Oh(void 0),U_(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,he.D)(this.ref.get(e)).pipe(dn.iC)}}class fL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?KD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),rs(t=>t.length>0),dn.iC):KD(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=MO(e);return AO(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return nM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),dn.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(dn.iC)}}const pL=new h.OlP("angularfire2.enableFirestorePersistence"),gL=new h.OlP("angularfire2.firestore.persistenceSettings"),mL=new h.OlP("angularfire2.firestore.settings"),yL=new h.OlP("angularfire2.firestore.use-emulator");function NO(n,e=(t=>t)){return{query:e(n),ref:n}}let OO=(()=>{class n{constructor(t,r,s,u,c,g,_,D,S,N,$,Q,ne,Oe,ke,Pt,Ft){this.schedulers=_;const It=(0,X.on)(t,g,r),vt=S;N&&eI(It,g,$,ne,Oe,ke,Q,Pt),[this.firestore,this.persistenceEnabled$]=(0,X.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const Ot=g.runOutsideAngular(()=>It.firestore());if(u&&Ot.settings(u),vt&&Ot.useEmulator(...vt),s&&!nc(c)){const qt=()=>{try{return(0,he.D)(Ot.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(gr){return typeof console<"u"&&console.warn(gr),Dt(!1)}};return[Ot,g.runOutsideAngular(qt)]}return[Ot,Dt(!1)]},[u,vt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=NO(s,r),g=this.schedulers.ngZone.run(()=>u);return new xO(g,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new fL(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new RO(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X.Dh),h.LFG(X.xv,8),h.LFG(pL,8),h.LFG(mL,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(gL,8),h.LFG(yL,8),h.LFG(L_,8),h.LFG(YE,8),h.LFG(QE,8),h.LFG(XE,8),h.LFG(Mg,8),h.LFG(JE,8),h.LFG(F_,8),h.LFG(Ag,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class np{constructor(e){this.InsAngFireStore=e}addStudent(e){return console.log("data addStudent Work"),e.id=this.InsAngFireStore.createId(),this.InsAngFireStore.collection("/Students").add(e)}getAllStudent(){return console.log(this.InsAngFireStore.collection("Students")),console.log(this.InsAngFireStore.collection("Students").snapshotChanges()),this.InsAngFireStore.collection("Students").snapshotChanges()}deleteStudent(e){return console.log(e.id),this.InsAngFireStore.doc(`/Students/${e.id}`).delete()}updateStudent(e){this.deleteStudent(e),this.addStudent(e)}}function _L(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td",26),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td")(10,"button",27),h.NdJ("click",function(){const u=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.deleteStudent(u))}),h._uU(11,"Delete"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.FirstName),h.xp6(2),h.Oqu(t.LastName),h.xp6(2),h.Oqu(t.Email),h.xp6(2),h.Oqu(t.Mobile)}}np.\u0275fac=function(e){return new(e||np)(h.LFG(OO))},np.\u0275prov=h.Yz7({token:np,factory:np.\u0275fac,providedIn:"root"});class f0{constructor(e,t){this.auth=e,this.data=t,this.studentsList=[],this.id="",this.FirstName="",this.LastName="",this.Email="",this.Mobile="",this.studentObject={id:"",FirstName:"",LastName:"",Email:"",Mobile:""}}ngOnInit(){this.getAllStudent()}getAllStudent(){console.log("work"),this.data.getAllStudent().subscribe({next:e=>{console.log("work"),console.log(e),this.studentsList=e.map(t=>{console.log(t),console.log(t.payload),console.log(t.payload.doc),console.log(t.payload.doc.data()),console.log(t.payload.doc.id);const r=t.payload.doc.data();return console.log(r.id),r.id=t.payload.doc.id,console.log(r),console.log(r.id),r})},error:e=>{alert(e.message)}})}resetForm(){this.id="",this.FirstName="",this.LastName="",this.Email="",this.Mobile=""}addStudent(){if(console.log("AddStudent Method Work"),""==this.FirstName||""==this.LastName||""==this.Email||""==this.Mobile)return console.log(this.FirstName,this.LastName,this.Email,this.Mobile),void alert("Fill All The Input Fields.");console.log("AddStudent Method Work 2"),this.studentObject.id="",this.studentObject.FirstName=this.FirstName,this.studentObject.LastName=this.LastName,this.studentObject.Email=this.Email,this.studentObject.Mobile=this.Mobile,this.data.addStudent(this.studentObject),this.resetForm()}updateStudent(){}deleteStudent(e){window.confirm(`Are You Sure That You Are Want To Delete ${e.FirstName} ${e.LastName}?`)&&this.data.deleteStudent(e)}}f0.\u0275fac=function(e){return new(e||f0)(h.Y36(Uo),h.Y36(np))},f0.\u0275cmp=h.Xpm({type:f0,selectors:[["app-dashboard"]],decls:49,vars:5,consts:[[1,"container-fluid","container-lg","text-center"],[1,"row"],[1,"col-lg-4","col-md-8","mb-3"],[1,"card","text-center","mt-5"],[1,"mt-3","text-warning"],[1,"card-body"],[1,"form-floating","mb-3"],["type","text","id","firstName","placeholder","Ahmed","name","firstName",1,"form-control",3,"ngModel","ngModelChange"],["for","firstName",1,"text-muted"],["type","text","id","lastName","placeholder","******","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName",1,"text-muted"],["type","email","id","email","placeholder","name@example.com","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email",1,"text-muted"],["type","mobile","id","mobile","placeholder","0600000000","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile",1,"text-muted"],["type","submit",1,"btn","btn-outline-success",3,"click"],[1,"col-lg-8","col"],[1,"text-primary","my-2","mx-1"],[1,"card"],[1,"card-body","overflow-x-auto","table-holder"],[1,"table"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["href","upload-files"],[1,"btn","btn-outline-danger","my-3"],[1,"text-nowrap"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),h._uU(5,"Add Student"),h.qZA(),h.TgZ(6,"div",5)(7,"form")(8,"div",6)(9,"input",7),h.NdJ("ngModelChange",function(s){return t.FirstName=s}),h.qZA(),h.TgZ(10,"label",8),h._uU(11,"First Name"),h.qZA()(),h.TgZ(12,"div",6)(13,"input",9),h.NdJ("ngModelChange",function(s){return t.LastName=s}),h.qZA(),h.TgZ(14,"label",10),h._uU(15,"Last Name"),h.qZA()(),h.TgZ(16,"div",6)(17,"input",11),h.NdJ("ngModelChange",function(s){return t.Email=s}),h.qZA(),h.TgZ(18,"label",12),h._uU(19,"Email Address"),h.qZA()(),h.TgZ(20,"div",6)(21,"input",13),h.NdJ("ngModelChange",function(s){return t.Mobile=s}),h.qZA(),h.TgZ(22,"label",14),h._uU(23,"Mobile"),h.qZA()(),h.TgZ(24,"button",15),h.NdJ("click",function(){return t.addStudent()}),h._uU(25,"Add Student"),h.qZA()()()()(),h.TgZ(26,"div",16)(27,"h3",17),h._uU(28,"Student List"),h.qZA(),h.TgZ(29,"div",18)(30,"div",19)(31,"table",20)(32,"thead")(33,"tr")(34,"th",21),h._uU(35,"First name"),h.qZA(),h.TgZ(36,"th",21),h._uU(37,"Last Name"),h.qZA(),h.TgZ(38,"th",21),h._uU(39,"Email"),h.qZA(),h.TgZ(40,"th",21),h._uU(41,"Mobile"),h.qZA(),h.TgZ(42,"th",21),h._uU(43,"Action"),h.qZA()()(),h.TgZ(44,"tbody",22),h.YNc(45,_L,12,4,"tr",23),h.qZA()()()()(),h.TgZ(46,"a",24)(47,"button",25),h._uU(48," Upload Files "),h.qZA()()()()),2&e&&(h.xp6(9),h.Q6J("ngModel",t.FirstName),h.xp6(4),h.Q6J("ngModel",t.LastName),h.xp6(4),h.Q6J("ngModel",t.Email),h.xp6(4),h.Q6J("ngModel",t.Mobile),h.xp6(24),h.Q6J("ngForOf",t.studentsList))},dependencies:[ki,Ch,Xa,De,Je,bh,ua],styles:["td[_ngcontent-%COMP%]{line-height:35.5px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f0f0f0}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#000;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#0075ff}"]});class vL{constructor(e){this.id="",this.name="",this.size=0,this.url="",this.file=e}}const kO="firebasestorage.googleapis.com",PO="storageBucket";class pr extends Kt.ZR{constructor(e,t,r=0){super(iM(e),`Firebase Storage: ${t} (${iM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ln=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ln||(Ln={})),Ln))();function iM(n){return"storage/"+n}function sM(){return new pr(Ln.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function FO(){return new pr(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LO(){return new pr(Ln.CANCELED,"User canceled the upload/download.")}function UO(){return new pr(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Km(n){return new pr(Ln.INVALID_ARGUMENT,n)}function VO(){return new pr(Ln.APP_DELETED,"The Firebase app was deleted.")}function BO(n){return new pr(Ln.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function p0(n,e){return new pr(Ln.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function g0(n){throw new pr(Ln.INTERNAL_ERROR,"Internal error: "+n)}class $i{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$i.makeFromUrl(e,t)}catch{return new $i(e,"")}if(""===r.path)return r;throw function xL(n){return new pr(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)",g=new RegExp("^gs://"+s+"(/(.*))?$","i");function D(vt){vt.path_=decodeURIComponent(vt.path)}const N=t.replace(/[.]/g,"\\."),It=[{regex:g,indices:{bucket:1,path:3},postModify:function u(vt){"/"===vt.path.charAt(vt.path.length-1)&&(vt.path_=vt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${N}/v[A-Za-z0-9_]+/b/${s}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:D},{regex:new RegExp(`^https?://${t===kO?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${s}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:D}];for(let vt=0;vt<It.length;vt++){const Ot=It[vt],qt=Ot.regex.exec(e);if(qt){let Ia=qt[Ot.indices.path];Ia||(Ia=""),r=new $i(qt[Ot.indices.bucket],Ia),Ot.postModify(r);break}}if(null==r)throw function ML(n){return new pr(Ln.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class PL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function YD(n){return"string"==typeof n||n instanceof String}function jO(n){return oM()&&n instanceof Blob}function oM(){return typeof Blob<"u"&&!(0,Kt.UG)()}function aM(n,e,t,r){if(r<e)throw Km(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Km(`Invalid value for '${n}'. Expected ${t} or less.`)}function Yl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $O(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var jd=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(jd||(jd={})),jd))();function HO(n,e){const t=n>=500&&n<600,s=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||s||u}class jL{constructor(e,t,r,s,u,c,g,_,D,S,N,$=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=g,this.errorCallback_=_,this.timeout_=D,this.progressCallback_=S,this.connectionFactory_=N,this.retry=$,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Q,ne)=>{this.resolve_=Q,this.reject_=ne,this.start_()})}start_(){const t=(r,s)=>{const u=this.resolve_,c=this.reject_,g=s.connection;if(s.wasSuccessCode)try{const _=this.callback_(g,g.getResponse());!function UL(n){return void 0!==n}(_)?u():u(_)}catch(_){c(_)}else if(null!==g){const _=sM();_.serverResponse=g.getErrorText(),c(this.errorCallback_?this.errorCallback_(g,_):_)}else c(s.canceled?this.appDelete_?VO():LO():FO())};this.canceled_?t(0,new QD(!1,null,!0)):this.backoffId_=function FL(n,e,t){let r=1,s=null,u=null,c=!1,g=0;function _(){return 2===g}let D=!1;function S(...ke){D||(D=!0,e.apply(null,ke))}function N(ke){s=setTimeout(()=>{s=null,n(Q,_())},ke)}function $(){u&&clearTimeout(u)}function Q(ke,...Pt){if(D)return void $();if(ke)return $(),void S.call(null,ke,...Pt);if(_()||c)return $(),void S.call(null,ke,...Pt);let It;r<64&&(r*=2),1===g?(g=2,It=0):It=1e3*(r+Math.random()),N(It)}let ne=!1;function Oe(ke){ne||(ne=!0,$(),!D&&(null!==s?(ke||(g=2),clearTimeout(s),N(0)):ke||(g=1)))}return N(0),u=setTimeout(()=>{c=!0,Oe(!0)},t),Oe}((r,s)=>{if(s)return void r(!1,new QD(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=g=>{null!==this.progressCallback_&&this.progressCallback_(g.loaded,g.lengthComputable?g.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const g=u.getErrorCode()===jd.NO_ERROR,_=u.getStatus();if(!g||HO(_,this.additionalRetryCodes_)&&this.retry){const S=u.getErrorCode()===jd.ABORT;return void r(!1,new QD(!1,null,S))}const D=-1!==this.successCodes_.indexOf(_);r(!0,new QD(D,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function LL(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class QD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ZL(...n){const e=function WL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(oM())return new Blob(n);throw new pr(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const eo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uM{constructor(e,t){this.data=e,this.contentType=t||null}}function lM(n,e){switch(n){case eo.RAW:return new uM(GO(e));case eo.BASE64:case eo.BASE64URL:return new uM(zO(n,e));case eo.DATA_URL:return new uM(function XL(n){const e=new qO(n);return e.base64?zO(eo.BASE64,e.rest):function QL(n){let e;try{e=decodeURIComponent(n)}catch{throw p0(eo.DATA_URL,"Malformed data URL.")}return GO(e)}(e.rest)}(e),function JL(n){return new qO(n).contentType}(e))}throw sM()}function GO(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zO(n,e){switch(n){case eo.BASE64:{const s=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(s||u)throw p0(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case eo.BASE64URL:{const s=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(s||u)throw p0(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function YL(n){if(typeof atob>"u")throw function kL(n){return new pr(Ln.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(s){throw s.message.includes("polyfill")?s:p0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class qO{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw p0(eo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function eU(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Au{constructor(e,t){let r=0,s="";jO(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(jO(this.data_)){const s=function KL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===s?null:new Au(s)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Au(r,!0)}}static getBlob(...e){if(oM()){const t=e.map(r=>r instanceof Au?r.data_:r);return new Au(ZL.apply(null,t))}{const t=e.map(c=>YD(c)?lM(eo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const s=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let g=0;g<c.length;g++)s[u++]=c[g]}),new Au(s,!0)}}uploadData(){return this.data_}}function cM(n){let e;try{e=JSON.parse(n)}catch{return null}return function BL(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function WO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function rU(n,e){return e}class ds{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||rU}}let XD=null;function m0(){if(XD)return XD;const n=[];n.push(new ds("bucket")),n.push(new ds("generation")),n.push(new ds("metageneration")),n.push(new ds("name","fullPath",!0));const t=new ds("name");t.xform=function e(u,c){return function iU(n){return!YD(n)||n.length<2?n:WO(n)}(c)},n.push(t);const s=new ds("size");return s.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(s),n.push(new ds("timeCreated")),n.push(new ds("updated")),n.push(new ds("md5Hash",null,!0)),n.push(new ds("cacheControl",null,!0)),n.push(new ds("contentDisposition",null,!0)),n.push(new ds("contentEncoding",null,!0)),n.push(new ds("contentLanguage",null,!0)),n.push(new ds("contentType",null,!0)),n.push(new ds("metadata","customMetadata",!0)),XD=n,XD}function ZO(n,e,t){const r=cM(e);return null===r?null:function oU(n,e,t){const r={type:"file"},s=t.length;for(let u=0;u<s;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function sU(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new $i(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function dM(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const u=e[s];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const KO="prefixes";class Mu{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xu(n){if(!n)throw sM()}function JD(n,e){return function t(r,s){const u=ZO(n,s,e);return xu(null!==u),u}}function Ym(n){return function e(t,r){let s;return s=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function SL(){return new pr(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function TL(){return new pr(Ln.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function CL(n){return new pr(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function AL(n){return new pr(Ln.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}function y0(n){const e=Ym(n);return function t(r,s){let u=e(r,s);return 404===r.getStatus()&&(u=function bL(n){return new pr(Ln.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=s.serverResponse,u}}function QO(n,e,t){const s=Yl(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new Mu(s,"GET",JD(n,t),c);return g.errorHandler=y0(e),g}function hU(n,e,t,r,s){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),s&&(u.maxResults=s);const g=Yl(e.bucketOnlyServerUrl(),n.host,n._protocol),D=n.maxOperationRetryTime,S=new Mu(g,"GET",function cU(n,e){return function t(r,s){const u=function lU(n,e,t){const r=cM(t);return null===r?null:function uU(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[KO])for(const s of t[KO]){const u=s.replace(/\/$/,""),c=n._makeStorageReference(new $i(e,u));r.prefixes.push(c)}if(t.items)for(const s of t.items){const u=n._makeStorageReference(new $i(e,s.name));r.items.push(u)}return r}(n,e,r)}(n,e,s);return xu(null!==u),u}}(n,e.bucket),D);return S.urlParams=u,S.errorHandler=Ym(e),S}function JO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function mU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class eb{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function hM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{xu(!1)}return xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const wU={STATE_CHANGED:"state_changed"},hs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fM(n){switch(n){case"running":case"pausing":case"canceling":return hs.RUNNING;case"paused":return hs.PAUSED;case"success":return hs.SUCCESS;case"canceled":return hs.CANCELED;default:return hs.ERROR}}class EU{constructor(e,t,r){if(function VL(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Qm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class IU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw g0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const u in s)s.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,s[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw g0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw g0("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw g0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw g0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class DU extends IU{initXhr(){this.xhr_.responseType="text"}}function Ea(){return new DU}class rk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=m0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ln.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(HO(s.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();s=FO()}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ln.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,u)=>{this._resolve=s,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function yU(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c=JO(e,r,s),g={name:c.fullPath},_=Yl(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},N=dM(c,t),ne=new Mu(_,"POST",function Q(Oe){let ke;hM(Oe);try{ke=Oe.getResponseHeader("X-Goog-Upload-URL")}catch{xu(!1)}return xu(YD(ke)),ke},n.maxUploadRetryTime);return ne.urlParams=g,ne.headers=S,ne.body=N,ne.errorHandler=Ym(e),ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ea,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=function _U(n,e,t,r){const _=new Mu(t,"POST",function u(D){const S=hM(D,["active","final"]);let N=null;try{N=D.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xu(!1)}N||xu(!1);const $=Number(N);return xu(!isNaN($)),new eb($,r.size(),"final"===S)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Ym(e),_}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(s,Ea,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new eb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,u)=>{let c;try{c=function vU(n,e,t,r,s,u,c,g){const _=new eb(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function NL(){return new pr(Ln.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const D=_.total-_.current;let S=D;s>0&&(S=Math.min(S,s));const N=_.current;let Q="";Q=0===S?"finalize":D===S?"upload, finalize":"upload";const ne={"X-Goog-Upload-Command":Q,"X-Goog-Upload-Offset":`${_.current}`},Oe=r.slice(N,N+S);if(null===Oe)throw UO();const It=new Mu(t,"POST",function ke(vt,Ot){const qt=hM(vt,["active","final"]),gr=_.current+S,Ia=r.size();let mM;return mM="final"===qt?JD(e,u)(vt,Ot):null,new eb(gr,Ia,"final"===qt,mM)},e.maxUploadRetryTime);return It.headers=ne,It.body=Oe.uploadData(),It.progressCallback=g||null,It.errorHandler=Ym(n),It}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const g=this._ref.storage._makeRequest(c,Ea,s,u,!1);this._request=g,g.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=QO(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ea,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function ek(n,e,t,r,s){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function g(){let It="";for(let vt=0;vt<2;vt++)It+=Math.random().toString().slice(2);return It}();c["Content-Type"]="multipart/related; boundary="+_;const D=JO(e,r,s),S=dM(D,t),Q=Au.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+_+"\r\nContent-Type: "+D.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===Q)throw UO();const ne={name:D.fullPath},Oe=Yl(u,n.host,n._protocol),Pt=n.maxUploadRetryTime,Ft=new Mu(Oe,"POST",JD(n,t),Pt);return Ft.urlParams=ne,Ft.headers=c,Ft.body=Q.uploadData(),Ft.errorHandler=Ym(e),Ft}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ea,e,t);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=LO(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=fM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const u=new EU(t||void 0,r||void 0,s||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(fM(this._state)){case hs.SUCCESS:Qm(this._resolve.bind(null,this.snapshot))();break;case hs.CANCELED:case hs.ERROR:Qm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(fM(this._state)){case hs.RUNNING:case hs.PAUSED:e.next&&Qm(e.next.bind(e,this.snapshot))();break;case hs.SUCCESS:e.complete&&Qm(e.complete.bind(e))();break;default:e.error&&Qm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class rp{constructor(e,t){this._service=e,this._location=t instanceof $i?t:$i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rp(e,t)}get root(){const e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WO(this._location.path)}get storage(){return this._service}get parent(){const e=function tU(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $i(this._location.bucket,e);return new rp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw BO(e)}}function sk(n,e,t){return pM.apply(this,arguments)}function pM(){return pM=(0,ye.Z)(function*(n,e,t){const s=yield ok(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),null!=s.nextPageToken&&(yield sk(n,e,s.nextPageToken))}),pM.apply(this,arguments)}function ok(n,e){null!=e&&"number"==typeof e.maxResults&&aM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=hU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ea)}function PU(n){n._throwIfRoot("getDownloadURL");const e=function fU(n,e,t){const s=Yl(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,g=new Mu(s,"GET",function dU(n,e){return function t(r,s){const u=ZO(n,s,e);return xu(null!==u),function aU(n,e,t,r){const s=cM(e);if(null===s||!YD(s.downloadTokens))return null;const u=s.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(D=>{const N=n.fullPath;return Yl("/b/"+c(n.bucket)+"/o/"+c(N),t,r)+$O({alt:"media",token:D})})[0]}(u,s,n.host,n._protocol)}}(n,t),c);return g.errorHandler=y0(e),g}(n.storage,n._location,m0());return n.storage.makeRequestWithTokens(e,Ea).then(t=>{if(null===t)throw function OL(){return new pr(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function ak(n,e){const t=function nU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new $i(n._location.bucket,t);return new rp(n.storage,r)}function uk(n,e){if(n instanceof gM){const t=n;if(null==t._bucket)throw function RL(){return new pr(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+PO+"' property when initializing the app?")}();const r=new rp(t,t._bucket);return null!=e?uk(r,e):r}return void 0!==e?ak(n,e):n}function VU(n,e){if(e&&function LU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gM)return function UU(n,e){return new rp(n,e)}(n,e);throw Km("To use ref(service, url), the first argument must be a Storage instance.")}return uk(n,e)}function lk(n,e){const t=e?.[PO];return null==t?null:$i.makeFromBucketSpec(t,n)}class gM{constructor(e,t,r,s,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=u,this._bucket=null,this._host=kO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?$i.makeFromBucketSpec(s,this._host):lk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$i.makeFromBucketSpec(this._url,e):lk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rp(this,e)}_makeRequest(e,t,r,s,u=!0){if(this._deleted)return new PL(VO());{const c=function qL(n,e,t,r,s,u,c=!0){const g=$O(n.urlParams),_=n.url+g,D=Object.assign({},n.headers);return function GL(n,e){e&&(n["X-Firebase-GMPID"]=e)}(D,e),function $L(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(D,t),function HL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(D,u),function zL(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(D,r),new jL(_,n.method,D,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c)}(e,this._appId,r,s,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[s,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,s,u).getPromise()})()}}const ck="@firebase/storage";function fk(n,e){return VU(n=(0,Kt.m9)(n),e)}function KU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new gM(t,r,s,e,Rs.SDK_VERSION)}!function YU(){(0,Rs._registerComponent)(new _u.wA("storage",KU,"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(ck,"0.11.1",""),(0,Rs.registerVersion)(ck,"0.11.1","esm2017")}();class tb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class gk{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new tb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new tb(r,this,this._ref))},t)}on(e,t,r,s){let u;return t&&(u="function"==typeof t?c=>t(new tb(c,this,this._ref)):{next:t.next?c=>t.next(new tb(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,s||void 0)}}class mk{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ql(e,this._service))}get items(){return this._delegate.items.map(e=>new Ql(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ql{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function ZU(n,e){return ak(n,e)}(this._delegate,e);return new Ql(t,this.storage)}get root(){return new Ql(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ql(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new gk(function jU(n,e,t){return function xU(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rk(n,new Au(e),t)}(n=(0,Kt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=eo.RAW,r){this._throwIfRoot("putString");const s=lM(t,e),u=Object.assign({},r);return null==u.contentType&&null!=s.contentType&&(u.contentType=s.contentType),new gk(new rk(this._delegate,new Au(s.data,!0),u),this)}listAll(){return function zU(n){return function NU(n){const e={prefixes:[],items:[]};return sk(n,e).then(()=>e)}(n=(0,Kt.m9)(n))}(this._delegate).then(e=>new mk(e,this.storage))}list(e){return function GU(n,e){return ok(n=(0,Kt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new mk(t,this.storage))}getMetadata(){return function $U(n){return function OU(n){n._throwIfRoot("getMetadata");const e=QO(n.storage,n._location,m0());return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,Kt.m9)(n))}(this._delegate)}updateMetadata(e){return function HU(n,e){return function kU(n,e){n._throwIfRoot("updateMetadata");const t=function pU(n,e,t,r){const u=Yl(e.fullServerUrl(),n.host,n._protocol),g=dM(t,r),D=n.maxOperationRetryTime,S=new Mu(u,"PATCH",JD(n,r),D);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=g,S.errorHandler=y0(e),S}(n.storage,n._location,e,m0());return n.storage.makeRequestWithTokens(t,Ea)}(n=(0,Kt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function qU(n){return PU(n=(0,Kt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function WU(n){return function FU(n){n._throwIfRoot("deleteObject");const e=function gU(n,e){const r=Yl(e.fullServerUrl(),n.host,n._protocol),g=new Mu(r,"DELETE",function c(_,D){},n.maxOperationRetryTime);return g.successCodes=[200,204],g.errorHandler=y0(e),g}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,Kt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw BO(e)}}class yk{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(_k(e))throw Km("ref() expected a child path but got a URL, use refFromURL instead.");return new Ql(fk(this._delegate,e),this)}refFromURL(e){if(!_k(e))throw Km("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$i.makeFromUrl(e,this._delegate.host)}catch{throw Km("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ql(fk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function pk(n,e,t,r={}){!function BU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken="string"==typeof s?s:(0,Kt.Sg)(s,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function _k(n){return/^[A-Za-z]+:\/\//.test(n)}function eV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new yk(t,r)}function vk(n){const e=function nV(n){return new Ye.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function wL(n,e=tI.z){return(0,ti.e)((t,r)=>{let s=null,u=null,c=null;const g=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function _(){const D=c+n,S=e.now();if(S<D)return s=this.schedule(void 0,D-S),void r.add(s);g()}t.subscribe((0,Cn.x)(r,D=>{u=D,c=e.now(),s||(s=e.schedule(_,n),r.add(s))},()=>{g(),r.complete()},void 0,()=>{u=s=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,dt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function nb(n){return{getDownloadURL:()=>Dt(void 0).pipe(dn.fc,Dr(()=>n.getDownloadURL()),dn.iC),getMetadata:()=>Dt(void 0).pipe(dn.fc,Dr(()=>n.getMetadata()),dn.iC),delete:()=>(0,he.D)(n.delete()),child:e=>nb(n.child(e)),updateMetadata:e=>(0,he.D)(n.updateMetadata(e)),put:(e,t)=>vk(n.put(e,t)),putString:(e,t,r)=>vk(n.putString(e,t,r)),list:e=>(0,he.D)(n.list(e)),listAll:()=>(0,he.D)(n.listAll())}}!function tV(n){const e={TaskState:hs,TaskEvent:wU,StringFormat:eo,Storage:yk,Reference:Ql};n.INTERNAL.registerComponent(new _u.wA("storage-compat",eV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.1")}(V_.Z);const rV=new h.OlP("angularfire2.storageBucket"),iV=new h.OlP("angularfire2.storage.maxUploadRetryTime"),sV=new h.OlP("angularfire2.storage.maxOperationRetryTime"),oV=new h.OlP("angularfire2.storage.use-emulator");let wk=(()=>{class n{constructor(t,r,s,u,c,g,_,D,S,N){const $=(0,X.on)(t,c,r);this.storage=(0,X.cc)(`${$.name}.storage.${s}`,"AngularFireStorage",$.name,()=>{const Q=c.runOutsideAngular(()=>$.storage(s||void 0)),ne=S;return ne&&Q.useEmulator(...ne),_&&Q.setMaxUploadRetryTime(_),D&&Q.setMaxOperationRetryTime(D),Q},[_,D])}ref(t){return nb(this.storage.ref(t))}refFromURL(t){return nb(this.storage.refFromURL(t))}upload(t,r,s){return nb(this.storage.ref(t)).put(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(X.Dh),h.LFG(X.xv,8),h.LFG(rV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(iV,8),h.LFG(sV,8),h.LFG(oV,8),h.LFG(Ag,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Xm{constructor(e,t){this.storeFire=e,this.storageFile=t,this.existObjs=[],this.stopFun=!1}saveMetaDtaOfFile(e){const t={name:e.name,url:e.url,size:e.size,id:""};this.existObjs.map(r=>{t.name==r.name&&t.size==r.size&&(this.stopFun=!0,alert("This File Already Added."))}),this.stopFun||(t.id=this.storeFire.createId(),this.storeFire.collection("/Uploads").add(t))}getAllFiles(){return this.storeFire.collection("/Uploads").snapshotChanges()}deleteFile(e){this.storeFire.collection("/Uploads").doc(e.id).delete(),this.storageFile.ref(`/Uploads/${e.name}`).delete()}getObjs(){this.storeFire.collection("/Uploads").snapshotChanges().subscribe({next:e=>{this.existObjs=[],e.map(t=>{let r=t.payload.doc.data(),s={size:r.size,name:r.name};this.existObjs.includes(s)||this.existObjs.push(s)})}})}}function aV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"th"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td",18)(6,"a",19),h._uU(7,"Download"),h.qZA(),h.TgZ(8,"a",20),h.NdJ("click",function(){const u=h.CHM(t).$implicit,c=h.oxw();return h.KtG(c.deleteFile(u))}),h._uU(9,"Delete"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.hij(" ",t.name," "),h.xp6(2),h.hij(" ",t.size," "),h.xp6(2),h.s9C("href",t.url,h.LSH)}}Xm.\u0275fac=function(e){return new(e||Xm)(h.LFG(OO),h.LFG(wk))},Xm.\u0275prov=h.Yz7({token:Xm,factory:Xm.\u0275fac,providedIn:"root"});const uV=function(n){return{width:n}};class _0{constructor(e,t){this.fileService=e,this.fireStorage=t,this.percentage=0,this.listOfFiles=[],this.urlsArray=[]}selectFile(e){this.selectedFiles=0!=e.target.files.length&&e.target.files}ngOnInit(){this.getAllFiles(),this.fileService.getObjs()}uploadFile(){this.currentFileUpload=new vL(this.selectedFiles[0]);const t=this.fireStorage.ref(`/Uploads/${this.currentFileUpload.file.name}`);t.put(this.selectedFiles[0]).snapshotChanges().pipe($p(()=>{t.getDownloadURL().subscribe({next:s=>{this.currentFileUpload.url=s,this.currentFileUpload.size=this.currentFileUpload.file.size,this.currentFileUpload.name=this.currentFileUpload.file.name,this.fileService.saveMetaDtaOfFile(this.currentFileUpload),this.ngOnInit()}})})).subscribe({next:s=>{this.percentage=Math.trunc(100*s.bytesTransferred/s.totalBytes)},error:s=>{console.log("Error Occurred")}})}getAllFiles(){this.fileService.getAllFiles().subscribe({next:e=>{this.listOfFiles=e.map(t=>{const r=t.payload.doc.data();return r.id=t.payload.doc.id,r})},error:e=>{console.log("Error Occurred While Fetching File Meta Data.")}})}deleteFile(e){window.confirm("Are You Sure That You Want To Delete This File"+e.name+"?")&&(this.fileService.deleteFile(e),this.ngOnInit())}downloadTest(e){console.log(e)}}_0.\u0275fac=function(e){return new(e||_0)(h.Y36(Xm),h.Y36(wk))},_0.\u0275cmp=h.Xpm({type:_0,selectors:[["app-file-upload"]],decls:28,vars:7,consts:[[1,"container-fluid","container-lg","text-center"],[1,"row"],[1,"col-md-4","mt-5","col-sm-8"],[1,"card"],[1,"card-body","border-0","shadow","overflow-x-auto"],[1,"text-center"],[1,"mb-3"],["type","file","id","formFile",1,"form-control","text-nowrap","mb-2","text-truncate",3,"change"],["type","button",1,"btn","btn-outline-warning",3,"disabled","click"],[1,"progress","mt-2"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info",3,"ngStyle"],[1,"col-md-8","overflow-x-auto"],[1,"my-3"],[1,"text-primary"],[1,"table"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"text-nowrap"],["type","button","download","",1,"btn","btn-outline-info",3,"href"],["type","button",1,"btn","btn-outline-danger","ms-2",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),h.NdJ("change",function(s){return t.selectFile(s)}),h.qZA()(),h.TgZ(8,"button",8),h.NdJ("click",function(){return t.uploadFile()}),h._uU(9,"Upload"),h.qZA()(),h.TgZ(10,"div",9)(11,"div",10),h._uU(12),h.qZA()()()()(),h.TgZ(13,"div",11)(14,"div",12)(15,"h4",13),h._uU(16,"File List"),h.qZA()(),h.TgZ(17,"table",14)(18,"thead")(19,"tr")(20,"th",15),h._uU(21,"File Name"),h.qZA(),h.TgZ(22,"th",15),h._uU(23,"File Size"),h.qZA(),h.TgZ(24,"th",15),h._uU(25,"Action"),h.qZA()()(),h.TgZ(26,"tbody",16),h.YNc(27,aV,10,3,"tr",17),h.qZA()()()()()),2&e&&(h.xp6(8),h.Q6J("disabled",!t.selectedFiles),h.xp6(3),h.Q6J("ngStyle",h.VKq(5,uV,t.percentage+"%")),h.uIk("aria-valuenow",t.percentage),h.xp6(1),h.hij(" ",t.percentage,"% "),h.xp6(15),h.Q6J("ngForOf",t.listOfFiles))},dependencies:[ki,Br],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#f0f0f0}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#000;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#0075ff}"]});class v0{constructor(e){this.auth=e,this.email=""}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}}v0.\u0275fac=function(e){return new(e||v0)(h.Y36(Uo))},v0.\u0275cmp=h.Xpm({type:v0,selectors:[["app-forgot-password"]],decls:23,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),h._uU(9,"Forgot Password"),h.qZA()(),h.TgZ(10,"div",6)(11,"label",8),h._uU(12,"Email"),h.qZA(),h.TgZ(13,"input",9),h.NdJ("ngModelChange",function(s){return t.email=s}),h.qZA()(),h.TgZ(14,"button",10),h.NdJ("click",function(){return t.forgotPassword()}),h._uU(15,"Send Link"),h.qZA(),h.TgZ(16,"div",11)(17,"div",12)(18,"a",13),h._uU(19,"Back To Login "),h.TgZ(20,"span",14),h._uU(21,"Login"),h.qZA()()()()()()()(),h._UZ(22,"div",2),h.qZA()()),2&e&&(h.xp6(13),h.Q6J("ngModel",t.email))},dependencies:[Ch,Xa,De,Je,bh,ua]});class w0{constructor(e){this.auth=e,this.email="",this.password=""}ngAfterViewInit(){this.email="",this.password=""}login(){""==this.email||""==this.password?alert("Please Enter Your Info Correctly."):(this.auth.Login(this.email,this.password),this.email="",this.password="")}signUpWithGoogle(){this.auth.signUpWithGoogle()}}w0.\u0275fac=function(e){return new(e||w0)(h.Y36(Uo))},w0.\u0275cmp=h.Xpm({type:w0,selectors:[["app-login"]],decls:36,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-lg","col-md-3","col-sm-2"],[1,"col-lg","col-md-6","col-sm-8"],[1,"card","shadow"],[1,"card-body"],[1,"mb-2"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","email-input",1,"form-label"],["type","email","id","email-input","autocomplete","disabled","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password","autocomplete","current-password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-lg-6","my-2","my-lg-1"],["href","/register",2,"text-decoration","none"],[1,"text-danger"],[1,"col-lg-6","my-lg-1"],["href","/forgot-password",1,"text-dark",2,"text-decoration","none"],[2,"text-decoration","none","cursor","pointer",3,"click"],[1,"card","mx-5","sign-google"],[1,"card-body","shadow","d-flex","justify-content-center","align-items-center"],["src","../../../assets/Imgs/googleImg.png","alt","",2,"width","20px"],[1,"text-dark","mx-2"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6)(7,"div",7)(8,"h4",8),h._uU(9,"Login"),h.qZA()(),h.TgZ(10,"div",7)(11,"label",9),h._uU(12,"Email"),h.qZA(),h.TgZ(13,"input",10),h.NdJ("ngModelChange",function(s){return t.email=s}),h.qZA()(),h.TgZ(14,"div",7)(15,"label",11),h._uU(16,"Password"),h.qZA(),h.TgZ(17,"input",12),h.NdJ("ngModelChange",function(s){return t.password=s}),h.qZA()(),h.TgZ(18,"button",13),h.NdJ("click",function(){return t.login()}),h._uU(19,"Login"),h.qZA(),h.TgZ(20,"div",14)(21,"div",15)(22,"a",16),h._uU(23,"Need Account ? "),h.TgZ(24,"span",17),h._uU(25,"Register"),h.qZA()()(),h.TgZ(26,"div",18)(27,"a",19),h._uU(28,"Forget Password ?"),h.qZA()()()(),h.TgZ(29,"a",20),h.NdJ("click",function(){return t.signUpWithGoogle()}),h.TgZ(30,"div",21)(31,"div",22),h._UZ(32,"img",23),h.TgZ(33,"span",24),h._uU(34,"Sign Up With Google"),h.qZA()()()()()()(),h._UZ(35,"div",2),h.qZA()()),2&e&&(h.xp6(13),h.Q6J("ngModel",t.email),h.xp6(4),h.Q6J("ngModel",t.password))},dependencies:[Ch,Xa,De,Je,bh,ua],styles:["@media (max-width:400px){.sign-google[_ngcontent-%COMP%]{margin:0!important}}"]});class E0{constructor(e){this.auth=e,this.email="",this.password=""}register(){""==this.email||""==this.password?alert("Please Enter Your Info Correctly."):(this.auth.register(this.email,this.password),this.email="",this.password="")}}E0.\u0275fac=function(e){return new(e||E0)(h.Y36(Uo))},E0.\u0275cmp=h.Xpm({type:E0,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col-lg","col-md-3","col-sm-2"],[1,"col-lg","col-md-6","col-sm-8"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),h._uU(9,"Register"),h.qZA()(),h.TgZ(10,"div",6)(11,"label",8),h._uU(12,"Email"),h.qZA(),h.TgZ(13,"input",9),h.NdJ("ngModelChange",function(s){return t.email=s}),h.qZA()(),h.TgZ(14,"div",6)(15,"label",10),h._uU(16,"Password"),h.qZA(),h.TgZ(17,"input",11),h.NdJ("ngModelChange",function(s){return t.password=s}),h.qZA()(),h.TgZ(18,"button",12),h.NdJ("click",function(){return t.register()}),h._uU(19,"Register"),h.qZA(),h.TgZ(20,"div",13)(21,"div",14)(22,"a",15),h._uU(23,"Have An Account ? "),h.TgZ(24,"span",16),h._uU(25,"Login"),h.qZA()()()()()()()(),h._UZ(26,"div",2),h.qZA()()),2&e&&(h.xp6(13),h.Q6J("ngModel",t.email),h.xp6(4),h.Q6J("ngModel",t.password))},dependencies:[Ch,Xa,De,Je,bh,ua]});class I0{}I0.\u0275fac=function(e){return new(e||I0)},I0.\u0275cmp=h.Xpm({type:I0,selectors:[["app-verify-email"]],decls:14,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"div",2),h.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),h._uU(9,"Welcome"),h.qZA()(),h.TgZ(10,"div",6)(11,"p",8),h._uU(12,"Link Has Send On Your Registered Email. Please Verify It."),h.qZA()()()()()(),h._UZ(13,"div",2),h.qZA()())},dependencies:[Ch,Je,ua]});const lV=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:w0},{path:"register",component:E0},{path:"dashboard",component:f0},{path:"forgot-password",component:v0},{path:"verify-email",component:I0},{path:"upload-files",component:_0}];class Jm{}Jm.\u0275fac=function(e){return new(e||Jm)},Jm.\u0275mod=h.oAB({type:Jm}),Jm.\u0275inj=h.cJS({imports:[fE.forRoot(lV),fE]});class D0{constructor(){this.title="LearnFireBase"}}D0.\u0275fac=function(e){return new(e||D0)},D0.\u0275cmp=h.Xpm({type:D0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&h._UZ(0,"router-outlet")},dependencies:[tg]});class ey{}ey.\u0275fac=function(e){return new(e||ey)},ey.\u0275mod=h.oAB({type:ey,bootstrap:[D0]}),ey.\u0275inj=h.cJS({providers:[Uo,np],imports:[mc,Jm,X.hO.initializeApp(Lp_firebase),function il(n,...e){return{ngModule:sa,providers:[{provide:nl,useFactory:rl(n),multi:!0,deps:[h.R0b,h.zs3,dn.HU,...e]}]}}(()=>C(Lp_firebase)),ml]}),mp().bootstrapModule(ey).catch(n=>console.error(n))},9751:(pt,Ce,P)=>{P.d(Ce,{y:()=>le});var h=P(2961),j=P(727),O=P(8822),te=P(9635),ie=P(2416),ae=P(576),ge=P(2806);let le=(()=>{class Z{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const ze=new Z;return ze.source=this,ze.operator=Te,ze}subscribe(Te,ze,ot){const pe=function G(Z){return Z&&Z instanceof h.Lv||function z(Z){return Z&&(0,ae.m)(Z.next)&&(0,ae.m)(Z.error)&&(0,ae.m)(Z.complete)}(Z)&&(0,j.Nn)(Z)}(Te)?Te:new h.Hp(Te,ze,ot);return(0,ge.x)(()=>{const{operator:Se,source:Ie}=this;pe.add(Se?Se.call(pe,Ie):Ie?this._subscribe(pe):this._trySubscribe(pe))}),pe}_trySubscribe(Te){try{return this._subscribe(Te)}catch(ze){Te.error(ze)}}forEach(Te,ze){return new(ze=fe(ze))((ot,pe)=>{const Se=new h.Hp({next:Ie=>{try{Te(Ie)}catch(Pe){pe(Pe),Se.unsubscribe()}},error:pe,complete:ot});this.subscribe(Se)})}_subscribe(Te){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(Te)}[O.L](){return this}pipe(...Te){return(0,te.U)(Te)(this)}toPromise(Te){return new(Te=fe(Te))((ze,ot)=>{let pe;this.subscribe(Se=>pe=Se,Se=>ot(Se),()=>ze(pe))})}}return Z.create=$e=>new Z($e),Z})();function fe(Z){var $e;return null!==($e=Z??ie.v.Promise)&&void 0!==$e?$e:Promise}},7579:(pt,Ce,P)=>{P.d(Ce,{x:()=>ge});var h=P(9751),j=P(727);const te=(0,P(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=P(8737),ae=P(2806);let ge=(()=>{class fe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Z=new le(this,this);return Z.operator=G,Z}_throwIfClosed(){if(this.closed)throw new te}next(G){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(G)}})}error(G){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Z}=this;for(;Z.length;)Z.shift().error(G)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Z,isStopped:$e,observers:Te}=this;return Z||$e?j.Lc:(this.currentObservers=null,Te.push(G),new j.w0(()=>{this.currentObservers=null,(0,ie.P)(Te,G)}))}_checkFinalizedStatuses(G){const{hasError:Z,thrownError:$e,isStopped:Te}=this;Z?G.error($e):Te&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return fe.create=(z,G)=>new le(z,G),fe})();class le extends ge{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Z||Z.call(G,z)}error(z){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Z||Z.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,Z;return null!==(Z=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==Z?Z:j.Lc}}},2961:(pt,Ce,P)=>{P.d(Ce,{Hp:()=>ot,Lv:()=>Z});var h=P(576),j=P(727),O=P(2416),te=P(7849);function ie(){}const ae=fe("C",void 0,void 0);function fe(Ae,xe,be){return{kind:Ae,value:xe,error:be}}var z=P(3410),G=P(2806);class Z extends j.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,j.Nn)(xe)&&xe.add(this)):this.destination=Pe}static create(xe,be,je){return new ot(xe,be,je)}next(xe){this.isStopped?Ie(function le(Ae){return fe("N",Ae,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Ie(function ge(Ae){return fe("E",void 0,Ae)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Ie(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(Ae,xe){return $e.call(Ae,xe)}class ze{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:be}=this;if(be.next)try{be.next(xe)}catch(je){pe(je)}}error(xe){const{partialObserver:be}=this;if(be.error)try{be.error(xe)}catch(je){pe(je)}else pe(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(be){pe(be)}}}class ot extends Z{constructor(xe,be,je){let Y;if(super(),(0,h.m)(xe)||!xe)Y={next:xe??void 0,error:be??void 0,complete:je??void 0};else{let se;this&&O.v.useDeprecatedNextContext?(se=Object.create(xe),se.unsubscribe=()=>this.unsubscribe(),Y={next:xe.next&&Te(xe.next,se),error:xe.error&&Te(xe.error,se),complete:xe.complete&&Te(xe.complete,se)}):Y=xe}this.destination=new ze(Y)}}function pe(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ae):(0,te.h)(Ae)}function Ie(Ae,xe){const{onStoppedNotification:be}=O.v;be&&z.z.setTimeout(()=>be(Ae,xe))}const Pe={closed:!0,next:ie,error:function Se(Ae){throw Ae},complete:ie}},727:(pt,Ce,P)=>{P.d(Ce,{Lc:()=>ae,w0:()=>ie,Nn:()=>ge});var h=P(576);const O=(0,P(3888).d)(fe=>function(G){fe(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Z,$e)=>`${$e+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var te=P(8737);class ie{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Te of G)Te.remove(this);else G.remove(this);const{initialTeardown:Z}=this;if((0,h.m)(Z))try{Z()}catch(Te){z=Te instanceof O?Te.errors:[Te]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Te of $e)try{le(Te)}catch(ze){z=z??[],ze instanceof O?z=[...z,...ze.errors]:z.push(ze)}}if(z)throw new O(z)}}add(z){var G;if(z&&z!==this)if(this.closed)le(z);else{if(z instanceof ie){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,te.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,te.P)(G,z),z instanceof ie&&z._removeParent(this)}}ie.EMPTY=(()=>{const fe=new ie;return fe.closed=!0,fe})();const ae=ie.EMPTY;function ge(fe){return fe instanceof ie||fe&&"closed"in fe&&(0,h.m)(fe.remove)&&(0,h.m)(fe.add)&&(0,h.m)(fe.unsubscribe)}function le(fe){(0,h.m)(fe)?fe():fe.unsubscribe()}},2416:(pt,Ce,P)=>{P.d(Ce,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Ce,P)=>{P.d(Ce,{E:()=>j});const j=new(P(9751).y)(ie=>ie.complete())},8996:(pt,Ce,P)=>{P.d(Ce,{D:()=>xe});var h=P(8421),j=P(5363),O=P(9468),ae=P(9751),le=P(2202),fe=P(576),z=P(9672);function Z(be,je){if(!be)throw new Error("Iterable cannot be null");return new ae.y(Y=>{(0,z.f)(Y,je,()=>{const se=be[Symbol.asyncIterator]();(0,z.f)(Y,je,()=>{se.next().then(ve=>{ve.done?Y.complete():Y.next(ve.value)})},0,!0)})})}var $e=P(3670),Te=P(8239),ze=P(1144),ot=P(6495),pe=P(2206),Se=P(4532),Ie=P(3260);function xe(be,je){return je?function Ae(be,je){if(null!=be){if((0,$e.c)(be))return function te(be,je){return(0,h.Xf)(be).pipe((0,O.R)(je),(0,j.Q)(je))}(be,je);if((0,ze.z)(be))return function ge(be,je){return new ae.y(Y=>{let se=0;return je.schedule(function(){se===be.length?Y.complete():(Y.next(be[se++]),Y.closed||this.schedule())})})}(be,je);if((0,Te.t)(be))return function ie(be,je){return(0,h.Xf)(be).pipe((0,O.R)(je),(0,j.Q)(je))}(be,je);if((0,pe.D)(be))return Z(be,je);if((0,ot.T)(be))return function G(be,je){return new ae.y(Y=>{let se;return(0,z.f)(Y,je,()=>{se=be[le.h](),(0,z.f)(Y,je,()=>{let ve,We;try{({value:ve,done:We}=se.next())}catch(Ge){return void Y.error(Ge)}We?Y.complete():Y.next(ve)},0,!0)}),()=>(0,fe.m)(se?.return)&&se.return()})}(be,je);if((0,Ie.L)(be))return function Pe(be,je){return Z((0,Ie.Q)(be),je)}(be,je)}throw(0,Se.z)(be)}(be,je):(0,h.Xf)(be)}},8421:(pt,Ce,P)=>{P.d(Ce,{Xf:()=>$e});var h=P(655),j=P(1144),O=P(8239),te=P(9751),ie=P(3670),ae=P(2206),ge=P(4532),le=P(6495),fe=P(3260),z=P(576),G=P(7849),Z=P(8822);function $e(Ae){if(Ae instanceof te.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Te(Ae){return new te.y(xe=>{const be=Ae[Z.L]();if((0,z.m)(be.subscribe))return be.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,j.z)(Ae))return function ze(Ae){return new te.y(xe=>{for(let be=0;be<Ae.length&&!xe.closed;be++)xe.next(Ae[be]);xe.complete()})}(Ae);if((0,O.t)(Ae))return function ot(Ae){return new te.y(xe=>{Ae.then(be=>{xe.closed||(xe.next(be),xe.complete())},be=>xe.error(be)).then(null,G.h)})}(Ae);if((0,ae.D)(Ae))return Se(Ae);if((0,le.T)(Ae))return function pe(Ae){return new te.y(xe=>{for(const be of Ae)if(xe.next(be),xe.closed)return;xe.complete()})}(Ae);if((0,fe.L)(Ae))return function Ie(Ae){return Se((0,fe.Q)(Ae))}(Ae)}throw(0,ge.z)(Ae)}function Se(Ae){return new te.y(xe=>{(function Pe(Ae,xe){var be,je,Y,se;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(Ae);!(je=yield be.next()).done;)if(xe.next(je.value),xe.closed)return}catch(ve){Y={error:ve}}finally{try{je&&!je.done&&(se=be.return)&&(yield se.call(be))}finally{if(Y)throw Y.error}}xe.complete()})})(Ae,xe).catch(be=>xe.error(be))})}},6451:(pt,Ce,P)=>{P.d(Ce,{T:()=>ae});var h=P(8189),j=P(8421),O=P(515),te=P(7669),ie=P(8996);function ae(...ge){const le=(0,te.yG)(ge),fe=(0,te._6)(ge,1/0),z=ge;return z.length?1===z.length?(0,j.Xf)(z[0]):(0,h.J)(fe)((0,ie.D)(z,le)):O.E}},5403:(pt,Ce,P)=>{P.d(Ce,{x:()=>j});var h=P(2961);function j(te,ie,ae,ge,le){return new O(te,ie,ae,ge,le)}class O extends h.Lv{constructor(ie,ae,ge,le,fe,z){super(ie),this.onFinalize=fe,this.shouldUnsubscribe=z,this._next=ae?function(G){try{ae(G)}catch(Z){ie.error(Z)}}:super._next,this._error=le?function(G){try{le(G)}catch(Z){ie.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(G){ie.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(pt,Ce,P)=>{P.d(Ce,{U:()=>O});var h=P(4482),j=P(5403);function O(te,ie){return(0,h.e)((ae,ge)=>{let le=0;ae.subscribe((0,j.x)(ge,fe=>{ge.next(te.call(ie,fe,le++))}))})}},8189:(pt,Ce,P)=>{P.d(Ce,{J:()=>O});var h=P(5577),j=P(4671);function O(te=1/0){return(0,h.z)(j.y,te)}},5577:(pt,Ce,P)=>{P.d(Ce,{z:()=>le});var h=P(4004),j=P(8421),O=P(4482),te=P(9672),ie=P(5403),ge=P(576);function le(fe,z,G=1/0){return(0,ge.m)(z)?le((Z,$e)=>(0,h.U)((Te,ze)=>z(Z,Te,$e,ze))((0,j.Xf)(fe(Z,$e))),G):("number"==typeof z&&(G=z),(0,O.e)((Z,$e)=>function ae(fe,z,G,Z,$e,Te,ze,ot){const pe=[];let Se=0,Ie=0,Pe=!1;const Ae=()=>{Pe&&!pe.length&&!Se&&z.complete()},xe=je=>Se<Z?be(je):pe.push(je),be=je=>{Te&&z.next(je),Se++;let Y=!1;(0,j.Xf)(G(je,Ie++)).subscribe((0,ie.x)(z,se=>{$e?.(se),Te?xe(se):z.next(se)},()=>{Y=!0},void 0,()=>{if(Y)try{for(Se--;pe.length&&Se<Z;){const se=pe.shift();ze?(0,te.f)(z,ze,()=>be(se)):be(se)}Ae()}catch(se){z.error(se)}}))};return fe.subscribe((0,ie.x)(z,xe,()=>{Pe=!0,Ae()})),()=>{ot?.()}}(Z,$e,fe,G)))}},5363:(pt,Ce,P)=>{P.d(Ce,{Q:()=>te});var h=P(9672),j=P(4482),O=P(5403);function te(ie,ae=0){return(0,j.e)((ge,le)=>{ge.subscribe((0,O.x)(le,fe=>(0,h.f)(le,ie,()=>le.next(fe),ae),()=>(0,h.f)(le,ie,()=>le.complete(),ae),fe=>(0,h.f)(le,ie,()=>le.error(fe),ae)))})}},3099:(pt,Ce,P)=>{P.d(Ce,{B:()=>ie});var h=P(8421),j=P(7579),O=P(2961),te=P(4482);function ie(ge={}){const{connector:le=(()=>new j.x),resetOnError:fe=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=ge;return Z=>{let $e,Te,ze,ot=0,pe=!1,Se=!1;const Ie=()=>{Te?.unsubscribe(),Te=void 0},Pe=()=>{Ie(),$e=ze=void 0,pe=Se=!1},Ae=()=>{const xe=$e;Pe(),xe?.unsubscribe()};return(0,te.e)((xe,be)=>{ot++,!Se&&!pe&&Ie();const je=ze=ze??le();be.add(()=>{ot--,0===ot&&!Se&&!pe&&(Te=ae(Ae,G))}),je.subscribe(be),!$e&&ot>0&&($e=new O.Hp({next:Y=>je.next(Y),error:Y=>{Se=!0,Ie(),Te=ae(Pe,fe,Y),je.error(Y)},complete:()=>{pe=!0,Ie(),Te=ae(Pe,z),je.complete()}}),(0,h.Xf)(xe).subscribe($e))})(Z)}}function ae(ge,le,...fe){if(!0===le)return void ge();if(!1===le)return;const z=new O.Hp({next:()=>{z.unsubscribe(),ge()}});return(0,h.Xf)(le(...fe)).subscribe(z)}},9468:(pt,Ce,P)=>{P.d(Ce,{R:()=>j});var h=P(4482);function j(O,te=0){return(0,h.e)((ie,ae)=>{ae.add(O.schedule(()=>ie.subscribe(ae),te))})}},8505:(pt,Ce,P)=>{P.d(Ce,{b:()=>ie});var h=P(576),j=P(4482),O=P(5403),te=P(4671);function ie(ae,ge,le){const fe=(0,h.m)(ae)||ge||le?{next:ae,error:ge,complete:le}:ae;return fe?(0,j.e)((z,G)=>{var Z;null===(Z=fe.subscribe)||void 0===Z||Z.call(fe);let $e=!0;z.subscribe((0,O.x)(G,Te=>{var ze;null===(ze=fe.next)||void 0===ze||ze.call(fe,Te),G.next(Te)},()=>{var Te;$e=!1,null===(Te=fe.complete)||void 0===Te||Te.call(fe),G.complete()},Te=>{var ze;$e=!1,null===(ze=fe.error)||void 0===ze||ze.call(fe,Te),G.error(Te)},()=>{var Te,ze;$e&&(null===(Te=fe.unsubscribe)||void 0===Te||Te.call(fe)),null===(ze=fe.finalize)||void 0===ze||ze.call(fe)}))}):te.y}},4408:(pt,Ce,P)=>{P.d(Ce,{o:()=>ie});var h=P(727);class j extends h.w0{constructor(ge,le){super()}schedule(ge,le=0){return this}}const O={setInterval(ae,ge,...le){const{delegate:fe}=O;return fe?.setInterval?fe.setInterval(ae,ge,...le):setInterval(ae,ge,...le)},clearInterval(ae){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(ae)},delegate:void 0};var te=P(8737);class ie extends j{constructor(ge,le){super(ge,le),this.scheduler=ge,this.work=le,this.pending=!1}schedule(ge,le=0){var fe;if(this.closed)return this;this.state=ge;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,le)),this.pending=!0,this.delay=le,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(G,this.id,le),this}requestAsyncId(ge,le,fe=0){return O.setInterval(ge.flush.bind(ge,this),fe)}recycleAsyncId(ge,le,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return le;null!=le&&O.clearInterval(le)}execute(ge,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ge,le);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,le){let z,fe=!1;try{this.work(ge)}catch(G){fe=!0,z=G||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ge,scheduler:le}=this,{actions:fe}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(fe,this),null!=ge&&(this.id=this.recycleAsyncId(le,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Ce,P)=>{P.d(Ce,{v:()=>O});var h=P(6063);class j{constructor(ie,ae=j.now){this.schedulerActionCtor=ie,this.now=ae}schedule(ie,ae=0,ge){return new this.schedulerActionCtor(this,ie).schedule(ge,ae)}}j.now=h.l.now;class O extends j{constructor(ie,ae=j.now){super(ie,ae),this.actions=[],this._active=!1}flush(ie){const{actions:ae}=this;if(this._active)return void ae.push(ie);let ge;this._active=!0;do{if(ge=ie.execute(ie.state,ie.delay))break}while(ie=ae.shift());if(this._active=!1,ge){for(;ie=ae.shift();)ie.unsubscribe();throw ge}}}},4986:(pt,Ce,P)=>{P.d(Ce,{z:()=>O});var h=P(4408);const O=new(P(7565).v)(h.o)},6063:(pt,Ce,P)=>{P.d(Ce,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(pt,Ce,P)=>{P.d(Ce,{z:()=>h});const h={setTimeout(j,O,...te){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(j,O,...te):setTimeout(j,O,...te)},clearTimeout(j){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(pt,Ce,P)=>{P.d(Ce,{h:()=>j});const j=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Ce,P)=>{P.d(Ce,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Ce,P)=>{P.d(Ce,{_6:()=>ae,jO:()=>te,yG:()=>ie});var h=P(576);function O(ge){return ge[ge.length-1]}function te(ge){return(0,h.m)(O(ge))?ge.pop():void 0}function ie(ge){return function j(ge){return ge&&(0,h.m)(ge.schedule)}(O(ge))?ge.pop():void 0}function ae(ge,le){return"number"==typeof O(ge)?ge.pop():le}},8737:(pt,Ce,P)=>{function h(j,O){if(j){const te=j.indexOf(O);0<=te&&j.splice(te,1)}}P.d(Ce,{P:()=>h})},3888:(pt,Ce,P)=>{function h(j){const te=j(ie=>{Error.call(ie),ie.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}P.d(Ce,{d:()=>h})},2806:(pt,Ce,P)=>{P.d(Ce,{O:()=>te,x:()=>O});var h=P(2416);let j=null;function O(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const ae=!j;if(ae&&(j={errorThrown:!1,error:null}),ie(),ae){const{errorThrown:ge,error:le}=j;if(j=null,ge)throw le}}else ie()}function te(ie){h.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=ie)}},9672:(pt,Ce,P)=>{function h(j,O,te,ie=0,ae=!1){const ge=O.schedule(function(){te(),ae?j.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(j.add(ge),!ae)return ge}P.d(Ce,{f:()=>h})},4671:(pt,Ce,P)=>{function h(j){return j}P.d(Ce,{y:()=>h})},1144:(pt,Ce,P)=>{P.d(Ce,{z:()=>h});const h=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(pt,Ce,P)=>{P.d(Ce,{D:()=>j});var h=P(576);function j(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(pt,Ce,P)=>{function h(j){return"function"==typeof j}P.d(Ce,{m:()=>h})},3670:(pt,Ce,P)=>{P.d(Ce,{c:()=>O});var h=P(8822),j=P(576);function O(te){return(0,j.m)(te[h.L])}},6495:(pt,Ce,P)=>{P.d(Ce,{T:()=>O});var h=P(2202),j=P(576);function O(te){return(0,j.m)(te?.[h.h])}},8239:(pt,Ce,P)=>{P.d(Ce,{t:()=>j});var h=P(576);function j(O){return(0,h.m)(O?.then)}},3260:(pt,Ce,P)=>{P.d(Ce,{L:()=>te,Q:()=>O});var h=P(655),j=P(576);function O(ie){return(0,h.FC)(this,arguments,function*(){const ge=ie.getReader();try{for(;;){const{value:le,done:fe}=yield(0,h.qq)(ge.read());if(fe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(le)}}finally{ge.releaseLock()}})}function te(ie){return(0,j.m)(ie?.getReader)}},4482:(pt,Ce,P)=>{P.d(Ce,{A:()=>j,e:()=>O});var h=P(576);function j(te){return(0,h.m)(te?.lift)}function O(te){return ie=>{if(j(ie))return ie.lift(function(ae){try{return te(ae,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(pt,Ce,P)=>{P.d(Ce,{U:()=>O,z:()=>j});var h=P(4671);function j(...te){return O(te)}function O(te){return 0===te.length?h.y:1===te.length?te[0]:function(ae){return te.reduce((ge,le)=>le(ge),ae)}}},7849:(pt,Ce,P)=>{P.d(Ce,{h:()=>O});var h=P(2416),j=P(3410);function O(te){j.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw te;ie(te)})}},4532:(pt,Ce,P)=>{function h(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>h})},655:(pt,Ce,P)=>{function te(oe,de){var we={};for(var Re in oe)Object.prototype.hasOwnProperty.call(oe,Re)&&de.indexOf(Re)<0&&(we[Re]=oe[Re]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(Re=Object.getOwnPropertySymbols(oe);Ue<Re.length;Ue++)de.indexOf(Re[Ue])<0&&Object.prototype.propertyIsEnumerable.call(oe,Re[Ue])&&(we[Re[Ue]]=oe[Re[Ue]])}return we}function Z(oe,de,we,Re){return new(we||(we=Promise))(function(Be,tt){function Ze(wt){try{bt(Re.next(wt))}catch(rt){tt(rt)}}function cn(wt){try{bt(Re.throw(wt))}catch(rt){tt(rt)}}function bt(wt){wt.done?Be(wt.value):function Ue(Be){return Be instanceof we?Be:new we(function(tt){tt(Be)})}(wt.value).then(Ze,cn)}bt((Re=Re.apply(oe,de||[])).next())})}function Ae(oe){return this instanceof Ae?(this.v=oe,this):new Ae(oe)}function xe(oe,de,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Re=we.apply(oe,de||[]),Be=[];return Ue={},tt("next"),tt("throw"),tt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function tt(rn){Re[rn]&&(Ue[rn]=function(_n){return new Promise(function(mn,sn){Be.push([rn,_n,mn,sn])>1||Ze(rn,_n)})})}function Ze(rn,_n){try{!function cn(rn){rn.value instanceof Ae?Promise.resolve(rn.value.v).then(bt,wt):rt(Be[0][2],rn)}(Re[rn](_n))}catch(mn){rt(Be[0][3],mn)}}function bt(rn){Ze("next",rn)}function wt(rn){Ze("throw",rn)}function rt(rn,_n){rn(_n),Be.shift(),Be.length&&Ze(Be[0][0],Be[0][1])}}function je(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,de=oe[Symbol.asyncIterator];return de?de.call(oe):(oe=function ot(oe){var de="function"==typeof Symbol&&Symbol.iterator,we=de&&oe[de],Re=0;if(we)return we.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&Re>=oe.length&&(oe=void 0),{value:oe&&oe[Re++],done:!oe}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),we={},Re("next"),Re("throw"),Re("return"),we[Symbol.asyncIterator]=function(){return this},we);function Re(Be){we[Be]=oe[Be]&&function(tt){return new Promise(function(Ze,cn){!function Ue(Be,tt,Ze,cn){Promise.resolve(cn).then(function(bt){Be({value:bt,done:Ze})},tt)}(Ze,cn,(tt=oe[Be](tt)).done,tt.value)})}}}P.d(Ce,{FC:()=>xe,KL:()=>je,_T:()=>te,mG:()=>Z,qq:()=>Ae})},4650:(pt,Ce,P)=>{P.d(Ce,{$8M:()=>yc,$WT:()=>kn,$Z:()=>jy,AFp:()=>em,AaK:()=>le,CHM:()=>Wd,CRH:()=>vI,CZH:()=>xf,CqO:()=>Qw,D6c:()=>Js,EJc:()=>kI,EpF:()=>o_,F4k:()=>Yw,FYo:()=>ti,FiY:()=>Co,GfV:()=>jc,Gpc:()=>G,JOm:()=>ns,KtG:()=>ic,LFG:()=>He,LSH:()=>by,Lbi:()=>PT,Lck:()=>pT,MMx:()=>$_,NdJ:()=>u_,OlP:()=>an,Oqu:()=>_u,P3R:()=>K0,PXZ:()=>HI,Q6J:()=>n_,QGY:()=>a_,Qsj:()=>ky,R0b:()=>Bi,RDi:()=>lb,Rgc:()=>tr,SBq:()=>Ms,Sil:()=>PI,Suo:()=>_I,TTD:()=>ao,TgZ:()=>lg,VKq:()=>Fg,X6Q:()=>Av,XFs:()=>at,Xpm:()=>to,Xts:()=>Mh,Y36:()=>Kc,YKP:()=>va,YNc:()=>Ww,Yjl:()=>ro,Yz7:()=>rt,Z0I:()=>sn,ZZ4:()=>wm,_Bn:()=>ff,_UZ:()=>i_,_Vd:()=>Nh,_c5:()=>ue,_uU:()=>ya,aQg:()=>Ff,c2e:()=>Rf,cJS:()=>_n,cg1:()=>A_,dDg:()=>BI,dqk:()=>Nt,eFA:()=>Ul,ekj:()=>w_,eoX:()=>cm,f3M:()=>nt,g9A:()=>rm,h0i:()=>er,hGG:()=>Em,hij:()=>pg,iGM:()=>ov,ifc:()=>Me,ip1:()=>yv,jDz:()=>H_,kL8:()=>Eg,lG2:()=>Da,lqb:()=>ml,lri:()=>Sd,n5z:()=>Xu,oAB:()=>no,oxw:()=>c_,q4F:()=>Oh,qLn:()=>kh,qOj:()=>hu,qZA:()=>Jh,rWj:()=>Iv,s9C:()=>hg,sBO:()=>Mv,s_b:()=>jg,soG:()=>Td,tb:()=>OI,tp0:()=>b,uIk:()=>ug,vHH:()=>pe,vpe:()=>Ns,wAp:()=>At,xp6:()=>Lh,z2F:()=>Pf,zSh:()=>rw,zs3:()=>Ro});var h=P(7579),j=P(727),O=P(9751),te=P(6451),ie=P(3099);function ae(i){for(let o in i)if(i[o]===ae)return o;throw Error("Could not find renamed property on target object.")}function ge(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function le(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(le).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function fe(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const z=ae({__forward_ref__:ae});function G(i){return i.__forward_ref__=G,i.toString=function(){return le(this())},i}function Z(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===G}function Te(i){return i&&!!i.\u0275providers}const ot="https://g.co/ng/security#xss";class pe extends Error{constructor(o,a){super(function Se(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function Ie(i){return"string"==typeof i?i:null==i?"":String(i)}function je(i,o){throw new pe(-201,!1)}function tt(i,o){null==i&&function Ze(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function rt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function _n(i){return{providers:i.providers||[],imports:i.imports||[]}}function mn(i){return Wn(i,Kr)||Wn(i,pn)}function sn(i){return null!==mn(i)}function Wn(i,o){return i.hasOwnProperty(o)?i[o]:null}function Un(i){return i&&(i.hasOwnProperty(_i)||i.hasOwnProperty(sr))?i[_i]:null}const Kr=ae({\u0275prov:ae}),_i=ae({\u0275inj:ae}),pn=ae({ngInjectableDef:ae}),sr=ae({ngInjectorDef:ae});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let or;function Vn(i){const o=or;return or=i,o}function Bn(i,o,a){const l=mn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&at.Optional?null:void 0!==o?o:void je(le(i))}const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zn={},Dn="__NG_DI_FLAG__",Yr="ngTempTokenPath",vi=/\n/gm,wi="__source";let Wt;function Tr(i){const o=Wt;return Wt=i,o}function On(i,o=at.Default){if(void 0===Wt)throw new pe(-203,!1);return null===Wt?Bn(i,void 0,o):Wt.get(i,o&at.Optional?null:void 0,o)}function He(i,o=at.Default){return(function mr(){return or}()||On)(Z(i),o)}function nt(i,o=at.Default){return He(i,Ct(o))}function Ct(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function St(i){const o=[];for(let a=0;a<i.length;a++){const l=Z(i[a]);if(Array.isArray(l)){if(0===l.length)throw new pe(900,!1);let d,f=at.Default;for(let y=0;y<l.length;y++){const w=l[y],I=H(w);"number"==typeof I?-1===I?d=w.token:f|=I:d=w}o.push(He(d,f))}else o.push(He(l))}return o}function Xt(i,o){return i[Dn]=o,i.prototype[Dn]=o,i}function H(i){return i[Dn]}function U(i){return{toString:i}.toString()}var R=(()=>((R=R||{})[R.OnPush=0]="OnPush",R[R.Default=1]="Default",R))(),Me=(()=>{return(i=Me||(Me={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Me;var i})();const lt={},qe=[],Lt=ae({\u0275cmp:ae}),ft=ae({\u0275dir:ae}),yn=ae({\u0275pipe:ae}),ar=ae({\u0275mod:ae}),kt=ae({\u0275fac:ae}),Sr=ae({__NG_ELEMENT_ID__:ae});let Ru=0;function to(i){return U(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||qe,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Me.Emulated,id:"c"+Ru++,styles:i.styles||qe,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=i.dependencies,y=i.features;return d.inputs=ku(i.inputs,l),d.outputs=ku(i.outputs),y&&y.forEach(w=>w(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ou).filter(ur):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(yr).filter(ur):null,d})}function Ou(i){return nn(i)||En(i)}function ur(i){return null!==i}function no(i){return U(()=>({type:i.type,bootstrap:i.bootstrap||qe,declarations:i.declarations||qe,imports:i.imports||qe,exports:i.exports||qe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ku(i,o){if(null==i)return lt;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}const Da=to;function ro(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function nn(i){return i[Lt]||null}function En(i){return i[ft]||null}function yr(i){return i[yn]||null}function kn(i){const o=nn(i)||En(i)||yr(i);return null!==o&&o.standalone}function Ur(i,o){const a=i[ar]||null;if(!a&&!0===o)throw new Error(`Type ${le(i)} does not have '\u0275mod' property.`);return a}function Xr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Jr(i){return Array.isArray(i)&&!0===i[1]}function qi(i){return 0!=(4&i.flags)}function Go(i){return i.componentOffset>-1}function Lu(i){return 1==(1&i.flags)}function dr(i){return null!==i.template}function sp(i){return 0!=(256&i[2])}function Us(i,o){return i.hasOwnProperty(kt)?i[kt]:null}class oo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ao(){return uo}function uo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Vs),Na}function Na(){const i=Oa(this),o=i?.current;if(o){const a=i.previous;if(a===lt)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Vs(i,o,a,l){const d=this.declaredInputs[a],f=Oa(i)||function Uu(i,o){return i[lo]=o}(i,{previous:lt,current:null}),y=f.current||(f.current={}),w=f.previous,I=w[d];y[d]=new oo(I&&I.currentValue,o,w===lt),i[l]=o}ao.ngInherit=!0;const lo="__ngSimpleChanges__";function Oa(i){return i[lo]||null}function Mn(i){for(;Array.isArray(i);)i=i[0];return i}function ps(i,o){return Mn(o[i])}function hr(i,o){return Mn(o[i.index])}function Pa(i,o){return i.data[o]}function Qn(i,o){const a=o[i];return Xr(a)?a:a[0]}function js(i){return 64==(64&i[2])}function Ei(i,o){return null==o?null:i[o]}function Bu(i){i[18]=0}function $s(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const Vt={lFrame:dp(null),bindingsEnabled:!0};function rc(){return Vt.bindingsEnabled}function me(){return Vt.lFrame.lView}function en(){return Vt.lFrame.tView}function Wd(i){return Vt.lFrame.contextLView=i,i[8]}function ic(i){return Vt.lFrame.contextLView=null,i}function Xn(){let i=$u();for(;null!==i&&64===i.type;)i=i.parent;return i}function $u(){return Vt.lFrame.currentTNode}function Ii(i,o){const a=Vt.lFrame;a.currentTNode=i,a.isParent=o}function fo(){return Vt.lFrame.isParent}function Ki(){return Vt.lFrame.bindingIndex++}function Hu(i,o){const a=Vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ms(o)}function ms(i){Vt.lFrame.currentDirectiveIndex=i}function Yd(){return Vt.lFrame.currentQueryIndex}function Gu(i){Vt.lFrame.currentQueryIndex=i}function ac(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Qd(i,o,a){if(a&at.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&at.Host||(d=ac(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,i=f}const l=Vt.lFrame=cp();return l.currentTNode=o,l.lView=i,!0}function Ua(i){const o=cp(),a=i[1];Vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function cp(){const i=Vt.lFrame,o=null===i?null:i.child;return null===o?dp(i):o}function dp(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function hp(){const i=Vt.lFrame;return Vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const uc=hp;function fp(){const i=hp();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function $r(){return Vt.lFrame.selectedIndex}function Yi(i){Vt.lFrame.selectedIndex=i}function hn(){const i=Vt.lFrame;return Pa(i.tView,i.selectedIndex)}function Xo(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Jo(i,o,a){yo(i,o,3,a)}function Hs(i,o,a,l){(3&i[2])===a&&yo(i,o,a,l)}function ys(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function yo(i,o,a,l){const f=l??-1,y=o.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(eh(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function eh(i,o,a,l){const d=a[l]<0,f=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class Va{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ba(i,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],y=a[l++],w=a[l++];i.setAttribute(o,y,w,f)}else{const f=d,y=a[++l];ja(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),l++}}return l}function Fi(i){return 3===i||4===i||6===i}function ja(i){return 64===i.charCodeAt(0)}function Di(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||$a(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function $a(i,o,a,l,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function qu(i){return-1!==i}function _o(i){return 32767&i}function Gs(i,o){let a=function Wu(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let vo=!0;function vs(i){const o=vo;return vo=i,o}let Ha=0;const Hr={};function Xi(i,o){const a=Ku(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,wo(l.data,i),wo(o,null),wo(l.blueprint,null));const d=Ga(i,o),f=i.injectorIndex;if(qu(d)){const y=_o(d),w=Gs(d,o),I=w[1].data;for(let T=0;T<8;T++)o[f+T]=w[y+T]|I[y+T]}return o[f+8]=d,f}function wo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ku(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ga(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=mc(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Yu(i,o,a){!function fc(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Sr)&&(l=a[Sr]),null==l&&(l=a[Sr]=Ha++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function pc(i,o,a){if(a&at.Optional||void 0!==i)return i;je()}function qa(i,o,a,l){if(a&at.Optional&&void 0===l&&(l=null),!(a&(at.Self|at.Host))){const d=i[9],f=Vn(void 0);try{return d?d.get(o,l,a&at.Optional):Bn(o,l,a&at.Optional)}finally{Vn(f)}}return pc(l,0,a)}function Wa(i,o,a,l=at.Default,d){if(null!==i){if(1024&o[2]){const y=function nh(i,o,a,l,d){let f=i,y=o;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=bi(f,y,a,l|at.Self,Hr);if(w!==Hr)return w;let I=f.parent;if(!I){const T=y[21];if(T){const M=T.get(a,Hr,l);if(M!==Hr)return M}I=mc(y),y=y[15]}f=I}return d}(i,o,a,l,Hr);if(y!==Hr)return y}const f=bi(i,o,a,l,Hr);if(f!==Hr)return f}return qa(o,a,l,d)}function bi(i,o,a,l,d){const f=function gc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Sr)?i[Sr]:void 0;return"number"==typeof o?o>=0?255&o:mp:o}(a);if("function"==typeof f){if(!Qd(o,i,l))return l&at.Host?pc(d,0,l):qa(o,a,l,d);try{const y=f(l);if(null!=y||l&at.Optional)return y;je()}finally{uc()}}else if("number"==typeof f){let y=null,w=Ku(i,o),I=-1,T=l&at.Host?o[16][6]:null;for((-1===w||l&at.SkipSelf)&&(I=-1===w?Ga(i,o):o[w+8],-1!==I&&ei(l,!1)?(y=o[1],w=_o(I),o=Gs(I,o)):w=-1);-1!==w;){const M=o[1];if(Qu(f,w,M.data)){const F=th(w,o,a,y,l,T);if(F!==Hr)return F}I=o[w+8],-1!==I&&ei(l,o[1].data[w+8]===T)&&Qu(f,w,o)?(y=M,w=_o(I),o=Gs(I,o)):w=-1}}return d}function th(i,o,a,l,d,f){const y=o[1],w=y.data[i+8],M=qs(w,y,a,null==l?Go(w)&&vo:l!=y&&0!=(3&w.type),d&at.Host&&f===w);return null!==M?Li(o,y,M,w):Hr}function qs(i,o,a,l,d){const f=i.providerIndexes,y=o.data,w=1048575&f,I=i.directiveStart,M=f>>20,q=d?w+M:i.directiveEnd;for(let ee=l?w:w+M;ee<q;ee++){const _e=y[ee];if(ee<I&&a===_e||ee>=I&&_e.type===a)return ee}if(d){const ee=y[I];if(ee&&dr(ee)&&ee.type===a)return I}return null}function Li(i,o,a,l){let d=i[a];const f=o.data;if(function Mr(i){return i instanceof Va}(d)){const y=d;y.resolving&&function Ae(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new pe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ie(i)}(f[a]));const w=vs(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Vn(y.injectImpl):null;Qd(i,l,at.Default);try{d=i[a]=y.factory(void 0,f,i,l),o.firstCreatePass&&a>=l.directiveStart&&function dc(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=uo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],o)}finally{null!==I&&Vn(I),vs(w),y.resolving=!1,uc()}}return d}function Qu(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ei(i,o){return!(i&at.Self||i&at.Host&&o)}class Ji{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Wa(this._tNode,this._lView,o,Ct(l),a)}}function mp(){return new Ji(Xn(),me())}function Xu(i){return U(()=>{const o=i.prototype.constructor,a=o[kt]||Eo(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[kt]||Eo(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Eo(i){return $e(i)?()=>{const o=Eo(Z(i));return o&&o()}:Us(i)}function mc(i){const o=i[1],a=o.type;return 2===a?o.declTNode:1===a?i[6]:null}function yc(i){return function za(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Fi(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(Xn(),i)}const Za="__parameters__";function ta(i,o,a){return U(()=>{const l=function vc(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return w.annotation=y,w;function w(I,T,M){const F=I.hasOwnProperty(Za)?I[Za]:Object.defineProperty(I,Za,{value:[]})[Za];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class an{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function es(i,o){i.forEach(a=>Array.isArray(a)?es(a,o):o(a))}function Ju(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ia(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Gr(i,o,a){let l=xr(i,o);return l>=0?i[1|l]=a:(l=~l,function sy(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ic(i,o){const a=xr(i,o);if(a>=0)return i[1|a]}function xr(i,o){return function bo(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(i,o,1)}const Co=Xt(ta("Optional"),8),b=Xt(ta("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const Ja=new Map;let Ac=0;const ul="__ngContext__";function Or(i,o){Xr(o)?(i[ul]=o[20],function ch(i){Ja.set(i[20],i)}(o)):i[ul]=o}function De(i,o){return undefined(i,o)}function ht(i){const o=i[3];return Jr(o)?o[3]:o}function ui(i){return xc(i[13])}function Ss(i){return xc(i[4])}function xc(i){for(;null!==i&&!Jr(i);)i=i[4];return i}function nu(i,o,a,l,d){if(null!=l){let f,y=!1;Jr(l)?f=l:Xr(l)&&(y=!0,l=l[0]);const w=Mn(l);0===i&&null!==a?null==d?_h(o,a,w):dl(o,a,w,d||null,!0):1===i&&null!==a?dl(o,a,w,d||null,!0):2===i?function hy(i,o,a){const l=Pc(i,o);l&&function M0(i,o,a,l){i.removeChild(o,a,l)}(i,l,o,a)}(o,w,y):3===i&&o.destroyNode(w),null!=f&&function N0(i,o,a,l,d){const f=a[7];f!==Mn(a)&&nu(o,i,l,f,d);for(let w=10;w<a.length;w++){const I=a[w];ou(I[1],I,i,o,l,f)}}(o,i,f,a,d)}}function Nc(i,o,a){return i.createElement(o,a)}function kc(i,o){const a=i[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,$s(d,-1)),a.splice(l,1)}function cl(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&kc(d,l),o>0&&(i[a-1][4]=l[4]);const f=ia(i,10+o);!function uy(i,o){ou(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function mh(i,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ou(i,o,a,3,null,null),function Np(i){let o=i[13];if(!o)return ru(i[1],i);for(;o;){let a=null;if(Xr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Xr(o)&&ru(o[1],o),o=o[3];null===o&&(o=i),Xr(o)&&ru(o[1],o),a=o&&o[4]}o=a}}(o)}}function ru(i,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function cy(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Va)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=d[f[y]],I=f[y+1];try{I.call(w)}finally{}}else try{f.call(d)}finally{}}}}(i,o),function yh(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?l[d=y]():l[d=-y].unsubscribe(),f+=2}else{const y=l[d=a[f+1]];a[f].call(y)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();o[7]=null}}(i,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Jr(o[3])){a!==o[3]&&kc(a,o);const l=o[19];null!==l&&l.detachView(i)}!function hh(i){Ja.delete(i[20])}(o)}}function A0(i,o,a){return function Op(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=i.data[l.directiveStart+d];if(f===Me.None||f===Me.Emulated)return null}return hr(l,a)}}(i,o.parent,a)}function dl(i,o,a,l,d){i.insertBefore(o,a,l,d)}function _h(i,o,a){i.appendChild(o,a)}function dy(i,o,a,l,d){null!==l?dl(i,o,a,l,d):_h(i,o,a)}function Pc(i,o){return i.parentNode(o)}let Dh,Pp,sb=function x0(i,o,a){return 40&i.type?hr(i,a):null};function hl(i,o,a,l){const d=A0(i,l,o),f=o[11],w=function ib(i,o,a){return sb(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)dy(f,d,a[I],w,!1);else dy(f,d,a,w,!1)}function su(i,o){if(null!==o){const a=o.type;if(3&a)return hr(o,i);if(4&a)return Fc(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return su(i,l);{const d=i[o.index];return Jr(d)?Fc(-1,d):Mn(d)}}if(32&a)return De(o,i)()||Mn(i[o.index]);{const l=wh(i,o);return null!==l?Array.isArray(l)?l[0]:su(ht(i[16]),l):su(i,o.next)}}return null}function wh(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Fc(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return su(l,d)}return o[7]}function Eh(i,o,a,l,d,f,y){for(;null!=a;){const w=l[a.index],I=a.type;if(y&&0===o&&(w&&Or(Mn(w),l),a.flags|=2),32!=(32&a.flags))if(8&I)Eh(i,o,a.child,l,d,f,!1),nu(o,i,d,w,f);else if(32&I){const T=De(a,l);let M;for(;M=T();)nu(o,i,d,M,f);nu(o,i,d,w,f)}else 16&I?R0(i,o,l,a,d,f):nu(o,i,d,w,f);a=y?a.projectionNext:a.next}}function ou(i,o,a,l,d,f){Eh(a,l,i.firstChild,o,d,f,!1)}function R0(i,o,a,l,d,f){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)nu(o,i,d,I[T],f);else Eh(i,o,I,y[3],d,f,!0)}function k0(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function ub(i,o,a){const{mergedAttrs:l,classes:d,styles:f}=a;null!==l&&Ba(i,o,l),null!==d&&k0(i,o,d),null!==f&&function O0(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function lb(i){Dh=i}function gy(i){return function fl(){if(void 0===Pp&&(Pp=null,Nt.trustedTypes))try{Pp=Nt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Pp}()?.createScriptURL(i)||i}class my{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ot})`}}function pl(i){return i instanceof my?i.changingThisBreaksApplicationSecurity:i}function Fp(i,o){const a=function hb(i){return i instanceof my&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ot})`)}return a===o}const V0=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function by(i){const o=Ah();return o?o.sanitize(Ir.URL,i)||"":Fp(i,"URL")?pl(i):function yy(i){return(i=String(i)).match(V0)?i:"unsafe:"+i}(Ie(i))}function Cy(i){const o=Ah();if(o)return gy(o.sanitize(Ir.RESOURCE_URL,i)||"");if(Fp(i,"ResourceURL"))return gy(pl(i));throw new pe(904,!1)}function K0(i,o,a){return function Z0(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Cy:by}(o,a)(i)}function Ah(){const i=me();return i&&i[12]}const Mh=new an("ENVIRONMENT_INITIALIZER"),Ty=new an("INJECTOR",-1),Y0=new an("INJECTOR_DEF_TYPES");class Sy{get(o,a=Zn){if(a===Zn){const l=new Error(`NullInjectorError: No provider for ${le(o)}!`);throw l.name="NullInjectorError",l}return a}}function Q0(...i){return{\u0275providers:X0(0,i),\u0275fromNgModule:!0}}function X0(i,...o){const a=[],l=new Set;let d;return es(o,f=>{const y=f;My(y,a,[],l)&&(d||(d=[]),d.push(y))}),void 0!==d&&Ay(d,a),a}function Ay(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];J0(d,f=>{o.push(f)})}}function My(i,o,a,l){if(!(i=Z(i)))return!1;let d=null,f=Un(i);const y=!f&&nn(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const I=i.ngModule;if(f=Un(I),!f)return!1;d=I}const w=l.has(d);if(y){if(w)return!1;if(l.add(d),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of I)My(T,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;l.add(d);try{es(f.imports,M=>{My(M,o,a,l)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Ay(T,o)}if(!w){const T=Us(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:qe},{provide:Y0,useValue:d,multi:!0},{provide:Mh,useValue:()=>He(d),multi:!0})}const I=f.providers;null==I||w||J0(I,M=>{o.push(M)})}}return d!==i&&void 0!==i.providers}function J0(i,o){for(let a of i)Te(a)&&(a=a.\u0275providers),Array.isArray(a)?J0(a,o):o(a)}const xM=ae({provide:String,useValue:ae});function ew(i){return null!==i&&"object"==typeof i&&xM in i}function Vc(i){return"function"==typeof i}const rw=new an("Set Injector scope."),xy={},NM={};let iw;function Ry(){return void 0===iw&&(iw=new Sy),iw}class ml{}class Db extends ml{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vp(o,y=>this.processProvider(y)),this.records.set(Ty,Bc(void 0,this)),d.has("environment")&&this.records.set(ml,Bc(void 0,this));const f=this.records.get(rw);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Y0.multi,qe,at.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Tr(this),l=Vn(void 0);try{return o()}finally{Tr(a),Vn(l)}}get(o,a=Zn,l=at.Default){this.assertNotDestroyed(),l=Ct(l);const d=Tr(this),f=Vn(void 0);try{if(!(l&at.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function bb(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(o)&&mn(o);w=I&&this.injectableDefInScope(I)?Bc(Lp(o),xy):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&at.Self?Ry():this.parent).get(o,a=l&at.Optional&&a===Zn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Yr]=y[Yr]||[]).unshift(le(o)),d)throw y;return function B(i,o,a,l){const d=i[Yr];throw o[wi]&&d.unshift(o[wi]),i.message=function W(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=le(o);if(Array.isArray(o))d=o.map(le).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):le(w)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(vi,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Yr]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{Vn(f),Tr(d)}}resolveInjectorInitializers(){const o=Tr(this),a=Vn(void 0);try{const l=this.get(Mh.multi,qe,at.Self);for(const d of l)d()}finally{Tr(o),Vn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(le(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(o){let a=Vc(o=Z(o))?o:Z(o&&o.provide);const l=function au(i){return ew(i)?Bc(void 0,i.useValue):Bc(As(i),xy)}(o);if(Vc(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Bc(void 0,xy,!0),d.factory=()=>St(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===xy&&(a.value=NM,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Z(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Lp(i){const o=mn(i),a=null!==o?o.factory:Us(i);if(null!==a)return a;if(i instanceof an)throw new pe(204,!1);if(i instanceof Function)return function Dt(i){const o=i.length;if(o>0)throw function Ds(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new pe(204,!1);const a=function Fr(i){const o=i&&(i[Kr]||i[pn]);if(o){const a=function yi(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new pe(204,!1)}function As(i,o,a){let l;if(Vc(i)){const d=Z(i);return Us(d)||Lp(d)}if(ew(i))l=()=>Z(i.useValue);else if(function nw(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...St(i.deps||[]));else if(function tw(i){return!(!i||!i.useExisting)}(i))l=()=>He(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function Up(i){return!!i.deps}(i))return Us(d)||Lp(d);l=()=>new d(...St(i.deps))}return l}function Bc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Vp(i,o){for(const a of i)Array.isArray(a)?Vp(a,o):a&&Te(a)?Vp(a.\u0275providers,o):o(a)}class Cb{}class Ny{}class aw{resolveComponentFactory(o){throw function Rh(i){const o=Error(`No component factory found for ${le(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let Nh=(()=>{class i{}return i.NULL=new aw,i})();function Oy(){return Ao(Xn(),me())}function Ao(i,o){return new Ms(hr(i,o))}let Ms=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Oy,i})();function uw(i){return i instanceof Ms?i.nativeElement:i}class ti{}let ky=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function lw(){const i=me(),a=Qn(Xn().index,i);return(Xr(a)?a:i)[11]}(),i})(),Dr=(()=>{class i{}return i.\u0275prov=rt({token:i,providedIn:"root",factory:()=>null}),i})();class jc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Oh=new jc("15.1.5"),rs={};function jp(i){return i.ngOriginalError}class kh{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&jp(o);for(;a&&jp(a);)a=jp(a);return a||null}}function ca(i){return i instanceof Function?i():i}function dw(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const hw="ng-template";function Mo(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==dw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Fy(i){return 4===i.type&&i.value!==hw}function fw(i,o,a){return o===(4!==i.type||a?i.value:hw)}function pw(i,o,a){let l=4;const d=i.attrs||[],f=function Ab(i){for(let o=0;o<i.length;o++)if(Fi(i[o]))return o;return i.length}(d);let y=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!fw(i,I,a)||""===I&&1===o.length){if(xo(l))return!1;y=!0}}else{const T=8&l?I:o[++w];if(8&l&&null!==i.attrs){if(!Mo(i.attrs,T,a)){if(xo(l))return!1;y=!0}continue}const F=ri(8&l?"class":I,d,Fy(i),a);if(-1===F){if(xo(l))return!1;y=!0;continue}if(""!==T){let q;q=F>f?"":d[F+1].toLowerCase();const ee=8&l?q:null;if(ee&&-1!==dw(ee,T,0)||2&l&&T!==q){if(xo(l))return!1;y=!0}}}}else{if(!y&&!xo(l)&&!xo(I))return!1;if(y&&xo(I))continue;y=!1,l=I|1&l}}return xo(l)||y}function xo(i){return 0==(1&i)}function ri(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function gw(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function da(i,o,a=!1){for(let l=0;l<o.length;l++)if(pw(i,o[l],a))return!0;return!1}function yw(i,o){return i?":not("+o.trim()+")":o}function _w(i){let o=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!xo(y)&&(o+=yw(f,d),d=""),l=y,f=f||!xo(l);a++}return""!==d&&(o+=yw(f,d)),o}const Gt={};function Lh(i){lu(en(),me(),$r()+i,!1)}function lu(i,o,a,l){if(!l)if(3==(3&o[2])){const f=i.preOrderCheckHooks;null!==f&&Jo(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Hs(o,f,0,a)}Yi(a)}function Hc(i,o=null,a=null,l){const d=Vy(i,o,a,l);return d.resolveInjectorInitializers(),d}function Vy(i,o=null,a=null,l,d=new Set){const f=[a||qe,Q0(i)];return l=l||("object"==typeof i?void 0:le(i)),new Db(f,o||Ry(),l||null,d)}let Ro=(()=>{class i{static create(a,l){if(Array.isArray(a))return Hc({name:""},l,a,"");{const d=a.name??"";return Hc({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Zn,i.NULL=new Sy,i.\u0275prov=rt({token:i,providedIn:"any",factory:()=>He(Ty)}),i.__NG_ELEMENT_ID__=-1,i})();function Kc(i,o=at.Default){const a=me();return null===a?He(i,o):Wa(Xn(),a,Z(i),o)}function jy(){throw new Error("invalid")}function Zp(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const f=a[l+1];if(-1!==f){const y=i.data[f];Gu(a[l]),y.contentQueries(2,o[f],f)}}}function Qc(i,o,a,l,d,f,y,w,I,T,M){const F=o.blueprint.slice();return F[0]=d,F[2]=76|l,(null!==M||i&&1024&i[2])&&(F[2]|=1024),Bu(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=I||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function Sp(){return Ac++}(),F[21]=M,F[16]=2==o.type?i[16]:F,F}function Xc(i,o,a,l,d){let f=i.data[o];if(null===f)f=function Kp(i,o,a,l,d){const f=$u(),y=fo(),I=i.data[o]=function zb(i,o,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,o,a,l,d),function oc(){return Vt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function ho(){const i=Vt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Ii(f,!0),f}function Jc(i,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function El(i,o,a){Ua(o);try{const l=i.viewQuery;null!==l&&eg(1,l,a);const d=i.template;null!==d&&Yp(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Zp(i,o),i.staticViewQueries&&eg(2,i.viewQuery,a);const f=i.components;null!==f&&function $b(i,o){for(let a=0;a<o.length;a++)Qb(i,o[a])}(o,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,fp()}}function is(i,o,a,l){const d=o[2];if(128!=(128&d)){Ua(o);try{Bu(o),function go(i){return Vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Yp(i,o,a,2,l);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&Jo(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Hs(o,T,0,null),ys(o,0)}if(function Zy(i){for(let o=ui(i);null!==o;o=Ss(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l];512&d[2]||$s(d[3],1),d[2]|=512}}}(o),function Wy(i){for(let o=ui(i);null!==o;o=Ss(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];js(l)&&is(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&Zp(i,o),y){const T=i.contentCheckHooks;null!==T&&Jo(o,T)}else{const T=i.contentHooks;null!==T&&Hs(o,T,1),ys(o,1)}!function jb(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Yi(~d);else{const f=d,y=a[++l],w=a[++l];Hu(y,f),w(2,o[f])}}}finally{Yi(-1)}}(i,o);const w=i.components;null!==w&&function Yc(i,o){for(let a=0;a<o.length;a++)Yb(i,o[a])}(o,w);const I=i.viewQuery;if(null!==I&&eg(2,I,l),y){const T=i.viewCheckHooks;null!==T&&Jo(o,T)}else{const T=i.viewHooks;null!==T&&Hs(o,T,2),ys(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,$s(o[3],-1))}finally{fp()}}}function Yp(i,o,a,l,d){const f=$r(),y=2&l;try{Yi(-1),y&&o.length>22&&lu(i,o,22,!1),a(l,d)}finally{Yi(f)}}function ha(i,o,a){if(qi(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}function ed(i,o,a){rc()&&(function Rw(i,o,a,l){const d=a.directiveStart,f=a.directiveEnd;Go(a)&&function kw(i,o,a){const l=hr(o,i),d=$y(a),f=i[10],y=rd(i,Qc(i,d,null,a.onPush?32:16,l,o,f,f.createRenderer(l,a),null,null,null));i[o.index]=y}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Xi(a,o),Or(l,o);const y=a.initialInputs;for(let w=d;w<f;w++){const I=i.data[w],T=Li(o,i,w,a);Or(T,o),null!==y&&Pw(0,w-d,T,I,0,y),dr(I)&&(Qn(a.index,o)[8]=Li(o,i,w,a))}}(i,o,a,hr(a,o)),64==(64&a.flags)&&Xp(i,o,a))}function Qp(i,o,a=hr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?a(o,i):i[y];i[d++]=w}}}function $y(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Hy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Hy(i,o,a,l,d,f,y,w,I,T){const M=22+l,F=M+d,q=function Hb(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Gt);return a}(M,F),ee="function"==typeof T?T():T;return q[1]={type:i,blueprint:q,template:a,queries:null,viewQuery:w,declTNode:o,data:q.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function bw(i,o,a,l){const d=id(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Hh(i).push(l,d.length-1))}function Cw(i,o,a,l){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===l?Tw(a,o,d,f):l.hasOwnProperty(d)&&Tw(a,o,l[d],f)}return a}function Tw(i,o,a,l){i.hasOwnProperty(a)?i[a].push(o,l):i[a]=[o,l]}function ss(i,o,a,l,d,f,y,w){const I=hr(o,a);let M,T=o.inputs;!w&&null!=T&&(M=T[l])?(Ky(i,a,M,l,d),Go(o)&&Sw(a,o.index)):3&o.type&&(l=function Wb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(I,l,d))}function Sw(i,o){const a=Qn(o,i);16&a[2]||(a[2]|=32)}function Mw(i,o,a,l){let d=!1;if(rc()){const f=null===l?null:{"":-1},y=function fa(i,o){const a=i.directiveRegistry;let l=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(da(o,y.selectors,!1))if(l||(l=[]),dr(y))if(null!==y.findHostDirectiveDefs){const w=[];d=d||new Map,y.findHostDirectiveDefs(y,w,d),l.unshift(...w,y),du(i,o,w.length)}else l.unshift(y),du(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(i,a);let w,I;null===y?w=I=null:[w,I]=y,null!==w&&(d=!0,xw(i,o,a,w,f,I)),f&&function Nw(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new pe(-301,!1);l.push(o[d],f)}}}(a,l,f)}return a.mergedAttrs=Di(a.mergedAttrs,a.attrs),d}function xw(i,o,a,l,d,f){for(let T=0;T<l.length;T++)Yu(Xi(a,o),i,l[T].type);!function Kb(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,l.length);for(let T=0;T<l.length;T++){const M=l[T];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,I=Jc(i,o,l.length,null);for(let T=0;T<l.length;T++){const M=l[T];a.mergedAttrs=Di(a.mergedAttrs,M.hostAttrs),td(i,a,o,I,M),Ow(I,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const F=M.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!w&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),I++}!function qb(i,o,a){const d=o.directiveEnd,f=i.data,y=o.attrs,w=[];let I=null,T=null;for(let M=o.directiveStart;M<d;M++){const F=f[M],q=a?a.get(F):null,_e=q?q.outputs:null;I=Cw(F.inputs,M,I,q?q.inputs:null),T=Cw(F.outputs,M,T,_e);const Le=null===I||null===y||Fy(o)?null:zy(I,M,y);w.push(Le)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=w,o.inputs=I,o.outputs=T}(i,a,f)}function Xp(i,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Kd(){return Vt.lFrame.currentDirectiveIndex}();try{Yi(f);for(let w=l;w<d;w++){const I=i.data[w],T=o[w];ms(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Gy(I,T)}}finally{Yi(-1),ms(y)}}function Gy(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function du(i,o,a){o.componentOffset=a,(i.components||(i.components=[])).push(o.index)}function Ow(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;dr(o)&&(a[""]=i)}}function td(i,o,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Us(d.type)),y=new Va(f,dr(d),Kc);i.blueprint[l]=y,a[l]=y,function VM(i,o,a,l,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~o.index;(function Zb(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(a,l,f)}}(i,o,l,Jc(i,a,d.hostVars,Gt),d)}function No(i,o,a,l,d,f){const y=hr(i,o);!function nd(i,o,a,l,d,f,y){if(null==f)i.removeAttribute(o,d,a);else{const w=null==y?Ie(f):y(f,l||"",d);i.setAttribute(o,d,w,a)}}(o[11],y,f,i.value,a,l,d)}function Pw(i,o,a,l,d,f){const y=f[o];if(null!==y){const w=l.setInput;for(let I=0;I<y.length;){const T=y[I++],M=y[I++],F=y[I++];null!==w?l.setInput(a,F,T,M):a[M]=F}}}function zy(i,o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===l&&(l=[]);const y=i[f];for(let w=0;w<y.length;w+=2)if(y[w]===o){l.push(f,y[w+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function qy(i,o,a,l){return[i,!0,!1,o,null,0,l,a,null,null]}function Yb(i,o){const a=Qn(o,i);if(js(a)){const l=a[1];48&a[2]?is(l,a,l.template,a[8]):a[5]>0&&Il(a)}}function Il(i){for(let l=ui(i);null!==l;l=Ss(l))for(let d=10;d<l.length;d++){const f=l[d];if(js(f))if(512&f[2]){const y=f[1];is(y,f,y.template,f[8])}else f[5]>0&&Il(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Qn(a[l],i);js(d)&&d[5]>0&&Il(d)}}function Qb(i,o){const a=Qn(o,i),l=a[1];(function Xb(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),El(l,a,a[8])}function rd(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Jp(i){for(;i;){i[2]|=32;const o=ht(i);if(sp(i)&&!o)return i;i=o}return null}function $h(i,o,a,l=!0){const d=o[10];d.begin&&d.begin();try{is(i,o,i.template,a)}catch(y){throw l&&Fw(o,y),y}finally{d.end&&d.end()}}function eg(i,o,a){Gu(0),o(i,a)}function id(i){return i[7]||(i[7]=[])}function Hh(i){return i.cleanup||(i.cleanup=[])}function Fw(i,o){const a=i[9],l=a?a.get(kh,null):null;l&&l.handleError(o)}function Ky(i,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],I=o[y],T=i.data[y];null!==T.setInput?T.setInput(I,d,l,w):I[w]=d}}function Gh(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?f=w:1==f?d=fe(d,w):2==f&&(l=fe(l,w+": "+o[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Yy(i,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(Mn(f)),Jr(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&Yy(I[1],I,T,l)}const y=a.type;if(8&y)Yy(i,o,a.child,l);else if(32&y){const w=De(a,o);let I;for(;I=w();)l.push(I)}else if(16&y){const w=wh(o,a);if(Array.isArray(w))l.push(...w);else{const I=ht(o[16]);Yy(I[1],I,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class ng{get rootNodes(){const o=this._lView,a=o[1];return Yy(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Jr(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(cl(o,l),ia(a,l))}this._attachedToViewContainer=!1}mh(this._lView[1],this._lView)}onDestroy(o){bw(this._lView[1],this._lView,null,o)}markForCheck(){Jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){$h(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Oc(i,o){ou(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=o}}class jM extends ng{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;$h(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class eC extends Nh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=nn(o);return new zh(a,this.ngModule)}}function rg(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class nC{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=Ct(l);const d=this.injector.get(o,rs,l);return d!==rs||a===rs?d:this.parentInjector.get(o,a,l)}}class zh extends Ny{get inputs(){return rg(this.componentDef.inputs)}get outputs(){return rg(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Mb(i){return i.map(_w).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof ml?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new nC(o,f):o,w=y.get(ti,null);if(null===w)throw new pe(407,!1);const I=y.get(Dr,null),T=w.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=l?function Gb(i,o,a){return i.selectRootElement(o,a===Me.ShadowDom)}(T,l,this.componentDef.encapsulation):Nc(T,M,function tC(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),q=this.componentDef.onPush?288:272,ee=Hy(0,null,null,1,0,null,null,null,null,null),_e=Qc(null,ee,null,q,null,null,w,T,I,y,null);let Le,Ke;Ua(_e);try{const st=this.componentDef;let Et,Ne=null;st.findHostDirectiveDefs?(Et=[],Ne=new Map,st.findHostDirectiveDefs(st,Et,Ne),Et.push(st)):Et=[st];const Rt=function Lw(i,o){const a=i[1];return i[22]=o,Xc(a,22,2,"#host",null)}(_e,F),Nn=function qh(i,o,a,l,d,f,y,w){const I=d[1];!function rC(i,o,a,l){for(const d of i)o.mergedAttrs=Di(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Gh(o,o.mergedAttrs,!0),null!==a&&ub(l,a,o))}(l,i,o,y);const T=f.createRenderer(o,a),M=Qc(d,$y(a),null,a.onPush?32:16,d[i.index],i,f,T,w||null,null,null);return I.firstCreatePass&&du(I,i,l.length-1),rd(d,M),d[i.index]=M}(Rt,F,st,Et,_e,w,T);Ke=Pa(ee,22),F&&function Uw(i,o,a,l){if(l)Ba(i,a,["ng-version",Oh.full]);else{const{attrs:d,classes:f}=function vw(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++l]):8===d&&a.push(f);else{if(!xo(d))break;d=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ba(i,a,d),f&&f.length>0&&k0(i,a,f.join(" "))}}(T,st,F,l),void 0!==a&&function ig(i,o,a){const l=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];l.push(null!=f?Array.from(f):null)}}(Ke,this.ngContentSelectors,a),Le=function iC(i,o,a,l,d,f){const y=Xn(),w=d[1],I=hr(y,d);xw(w,d,y,a,null,l);for(let M=0;M<a.length;M++)Or(Li(d,w,y.directiveStart+M,y),d);Xp(w,d,y),I&&Or(I,d);const T=Li(d,w,y.directiveStart+y.componentOffset,y);if(i[8]=d[8]=T,null!==f)for(const M of f)M(T,o);return ha(w,y,i),T}(Nn,st,Et,Ne,_e,[sC]),El(ee,_e,null)}finally{fp()}return new Qy(this.componentType,Le,Ao(Ke,_e),_e,Ke)}}class Qy extends Cb{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new jM(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const f=this._rootLView;Ky(f[1],f,d,o,a),Sw(f,this._tNode.index)}}get injector(){return new Ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function sC(){const i=Xn();Xo(me()[1],i)}function hu(i){let o=function Vw(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(dr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new pe(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=Xy(i.inputs),y.declaredInputs=Xy(i.declaredInputs),y.outputs=Xy(i.outputs);const w=d.hostBindings;w&&Kh(i,w);const I=d.viewQuery,T=d.contentQueries;if(I&&oC(i,I),T&&Zh(i,T),ge(i.inputs,d.inputs),ge(i.declaredInputs,d.declaredInputs),ge(i.outputs,d.outputs),dr(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===hu&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Wh(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Di(d.hostAttrs,a=Di(a,d.hostAttrs))}}(l)}function Xy(i){return i===lt?{}:i===qe?[]:i}function oC(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Zh(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function Kh(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Dl=null;function xs(){if(!Dl){const i=Nt.Symbol;if(i&&i.iterator)Dl=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Dl=l)}}}return Dl}function og(i){return!!Jy(i)&&(Array.isArray(i)||!(i instanceof Map)&&xs()in i)}function Jy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ci(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function ug(i,o,a,l){const d=me();return ci(d,Ki(),o)&&(en(),No(hn(),d,i,o,a,l)),ug}function pa(i,o,a,l){return ci(i,Ki(),a)?o+Ie(a)+l:Gt}function Ww(i,o,a,l,d,f,y,w){const I=me(),T=en(),M=i+22,F=T.firstCreatePass?function qw(i,o,a,l,d,f,y,w,I){const T=o.consts,M=Xc(o,i,4,y||null,Ei(T,w));Mw(o,a,M,Ei(T,I)),Xo(o,M);const F=M.tViews=Hy(2,M,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,T,I,o,a,l,d,f,y):T.data[M];Ii(F,!1);const q=I[11].createComment("");hl(T,I,q,F),Or(q,I),rd(I,I[M]=qy(q,I,q,F)),Lu(F)&&ed(T,I,F),null!=y&&Qp(I,F,w)}function n_(i,o,a){const l=me();return ci(l,Ki(),o)&&ss(en(),hn(),l,i,o,l[11],a,!1),n_}function r_(i,o,a,l,d){const y=d?"class":"style";Ky(i,a,o.inputs[y],y,l)}function lg(i,o,a,l){const d=me(),f=en(),y=22+i,w=d[11],I=d[y]=Nc(w,o,function pp(){return Vt.lFrame.currentNamespace}()),T=f.firstCreatePass?function yC(i,o,a,l,d,f,y){const w=o.consts,T=Xc(o,i,2,d,Ei(w,f));return Mw(o,a,T,Ei(w,y)),null!==T.attrs&&Gh(T,T.attrs,!1),null!==T.mergedAttrs&&Gh(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,f,d,0,o,a,l):f.data[y];return Ii(T,!0),ub(w,I,T),32!=(32&T.flags)&&hl(f,d,I,T),0===function Ko(){return Vt.lFrame.elementDepthCount}()&&Or(I,d),function zd(){Vt.lFrame.elementDepthCount++}(),Lu(T)&&(ed(f,d,T),ha(f,T,d)),null!==l&&Qp(d,T),lg}function Jh(){let i=Xn();fo()?function sc(){Vt.lFrame.isParent=!1}():(i=i.parent,Ii(i,!1));const o=i;!function Yo(){Vt.lFrame.elementDepthCount--}();const a=en();return a.firstCreatePass&&(Xo(a,i),qi(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function hc(i){return 0!=(8&i.flags)}(o)&&r_(a,o,me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function _s(i){return 0!=(16&i.flags)}(o)&&r_(a,o,me(),o.stylesWithoutHost,!1),Jh}function i_(i,o,a,l){return lg(i,o,a,l),Jh(),i_}function o_(){return me()}function a_(i){return!!i&&"function"==typeof i.then}function Yw(i){return!!i&&"function"==typeof i.subscribe}const Qw=Yw;function u_(i,o,a,l){const d=me(),f=en(),y=Xn();return function l_(i,o,a,l,d,f,y){const w=Lu(l),T=i.firstCreatePass&&Hh(i),M=o[8],F=id(o);let q=!0;if(3&l.type||y){const Le=hr(l,o),Ke=y?y(Le):Le,st=F.length,Et=y?Rt=>y(Mn(Rt[l.index])):l.index;let Ne=null;if(!y&&w&&(Ne=function _C(i,o,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const w=o[7],I=d[f+2];return w.length>I?w[I]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,l.index)),null!==Ne)(Ne.__ngLastListenerFn__||Ne).__ngNextListenerFn__=f,Ne.__ngLastListenerFn__=f,q=!1;else{f=Jw(l,o,M,f,!1);const Rt=a.listen(Ke,d,f);F.push(f,Rt),T&&T.push(d,Et,st,st+1)}}else f=Jw(l,o,M,f,!1);const ee=l.outputs;let _e;if(q&&null!==ee&&(_e=ee[d])){const Le=_e.length;if(Le)for(let Ke=0;Ke<Le;Ke+=2){const Nn=o[_e[Ke]][_e[Ke+1]].subscribe(f),Sn=F.length;F.push(f,Nn),T&&T.push(d,l.index,Sn,-(Sn+1))}}}(f,d,d[11],y,i,o,l),u_}function dg(i,o,a,l){try{return!1!==a(l)}catch(d){return Fw(i,d),!1}}function Jw(i,o,a,l,d){return function f(y){if(y===Function)return l;Jp(i.componentOffset>-1?Qn(i.index,o):o);let I=dg(o,0,l,y),T=f.__ngNextListenerFn__;for(;T;)I=dg(o,0,T,y)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function c_(i=1){return function ty(i){return(Vt.lFrame.contextLView=function lc(i,o){for(;i>0;)o=o[15],i--;return o}(i,Vt.lFrame.contextLView))[8]}(i)}function hg(i,o,a){return dd(i,"",o,"",a),hg}function dd(i,o,a,l,d){const f=me(),y=pa(f,o,a,l);return y!==Gt&&ss(en(),hn(),f,i,y,f[11],d,!1),dd}function Tl(i,o){return i<<17|o<<2}function gu(i){return i>>17&32767}function p_(i){return 2|i}function Sl(i){return(131068&i)>>2}function g_(i,o){return-131069&i|o<<2}function di(i){return 1|i}function m_(i,o,a,l,d){const f=i[a+1],y=null===o;let w=l?gu(f):Sl(f),I=!1;for(;0!==w&&(!1===I||y);){const M=i[w+1];qM(i[w],o)&&(I=!0,i[w+1]=l?di(M):p_(M)),w=l?gu(M):Sl(M)}I&&(i[a+1]=l?p_(f):di(f))}function qM(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&xr(i,o)>=0}function w_(i,o){return function Po(i,o,a,l){const d=me(),f=en(),y=function gs(i){const o=Vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function E_(i,o,a,l){const d=i.data;if(null===d[a+1]){const f=d[$r()],y=function SC(i,o){return o>=i.expandoStartIndex}(i,a);(function Rs(i,o){return 0!=(i.flags&(o?8:16))})(f,l)&&null===o&&!y&&(o=!1),o=function AC(i,o,a,l){const d=function Qo(i){const o=Vt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=tf(a=I_(null,i,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=I_(d,i,o,a,l),null===f){let I=function MC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Sl(l))return i[gu(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=I_(null,i,o,I[1],l),I=tf(I,o.attrs,l),function fE(i,o,a,l){i[gu(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else f=function xC(i,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=tf(l,i[f].hostAttrs,a);return tf(l,o.attrs,a)}(i,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function IC(i,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,w=gu(y),I=Sl(y);i[l]=a;let M,T=!1;if(Array.isArray(a)?(M=a[1],(null===M||xr(a,M)>0)&&(T=!0)):M=a,d)if(0!==I){const q=gu(i[w+1]);i[l+1]=Tl(q,w),0!==q&&(i[q+1]=g_(i[q+1],l)),i[w+1]=function sE(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=Tl(w,0),0!==w&&(i[w+1]=g_(i[w+1],l)),w=l;else i[l+1]=Tl(I,0),0===w?w=l:i[I+1]=g_(i[I+1],l),I=l;T&&(i[l+1]=p_(i[l+1])),m_(i,M,l,!0),m_(i,M,l,!1),function DC(i,o,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&xr(f,o)>=0&&(a[l+1]=di(a[l+1]))}(o,M,i,l,f),y=Tl(w,I),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}(f,i,y,l),o!==Gt&&ci(d,y,o)&&function mE(i,o,a,l,d,f,y,w){if(!(3&o.type))return;const I=i.data,T=I[w+1],M=function EC(i){return 1==(1&i)}(T)?NC(I,o,a,d,Sl(T),y):void 0;fg(M)||(fg(f)||function wC(i){return 2==(2&i)}(T)&&(f=NC(I,null,a,d,w,y)),function ab(i,o,a,l,d){if(o)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:ns.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=ns.Important),i.setStyle(a,l,d,f))}}(l,y,ps($r(),a),d,f))}(f,f.data[$r()],d,d[11],i,d[y+1]=function Kt(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=le(pl(i)))),i}(o,a),l,y)}(i,o,null,!0),w_}function I_(i,o,a,l,d){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=o[w],l=tf(l,f.hostAttrs,d),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function tf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Gr(i,y,!!a||o[++f]))}return void 0===i?null:i}function NC(i,o,a,l,d,f){const y=null===o;let w;for(;d>0;){const I=i[d],T=Array.isArray(I),M=T?I[1]:I,F=null===M;let q=a[d+1];q===Gt&&(q=F?qe:void 0);let ee=F?Ic(q,l):M===l?q:void 0;if(T&&!fg(ee)&&(ee=Ic(I,l)),fg(ee)&&(w=ee,y))return w;const _e=i[d+1];d=y?gu(_e):Sl(_e)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(w=Ic(I,l))}return w}function fg(i){return void 0!==i}function ya(i,o=""){const a=me(),l=en(),d=i+22,f=l.firstCreatePass?Xc(l,d,1,o,null):l.data[d],y=a[d]=function Rc(i,o){return i.createText(o)}(a[11],o);hl(l,a,y,f),Ii(f,!1)}function _u(i){return pg("",i,""),_u}function pg(i,o,a){const l=me(),d=pa(l,i,o,a);return d!==Gt&&function Zs(i,o,a){const l=ps(o,i);!function xp(i,o,a){i.setValue(o,a)}(i[11],l,a)}(l,$r(),d),pg}const Fo=void 0;var $C=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let fd={};function A_(i){const o=function sf(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=M_(o);if(a)return a;const l=o.split("-")[0];if(a=M_(l),a)return a;if("en"===l)return $C;throw new pe(701,!1)}function Eg(i){return A_(i)[At.PluralCase]}function M_(i){return i in fd||(fd[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),fd[i]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const vu="en-US";let RE=vu;function md(i,o,a,l,d){if(i=Z(i),Array.isArray(i))for(let f=0;f<i.length;f++)md(i[f],o,a,l,d);else{const f=en(),y=me();let w=Vc(i)?i:Z(i.provide),I=As(i);const T=Xn(),M=1048575&T.providerIndexes,F=T.directiveStart,q=T.providerIndexes>>20;if(Vc(i)||!i.multi){const ee=new Va(I,d,Kc),_e=hf(w,o,d?M:M+q,F);-1===_e?(Yu(Xi(T,y),f,w),Ml(f,i,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[_e]=ee,y[_e]=ee)}else{const ee=hf(w,o,M+q,F),_e=hf(w,o,M,M+q),Ke=_e>=0&&a[_e];if(d&&!Ke||!d&&!(ee>=0&&a[ee])){Yu(Xi(T,y),f,w);const st=function hi(i,o,a,l,d){const f=new Va(i,a,Kc);return f.multi=[],f.index=o,f.componentProviders=0,nI(f,d,l&&!a),f}(d?fT:hT,a.length,d,l,I);!d&&Ke&&(a[_e].providerFactory=st),Ml(f,i,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(st),y.push(st)}else Ml(f,i,ee>-1?ee:_e,nI(a[d?_e:ee],I,!d&&l));!d&&l&&Ke&&a[_e].componentProviders++}}}function Ml(i,o,a,l){const d=Vc(o),f=function RM(i){return!!i.useClass}(o);if(d||f){const I=(f?Z(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,I]):T[M+1].push(l,I)}else T.push(a,I)}}}function nI(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function hf(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function hT(i,o,a,l){return j_(this.multi,[])}function fT(i,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Li(a,a[1],this.providerFactory.index,l);f=w.slice(0,y),j_(d,f);for(let I=y;I<w.length;I++)f.push(w[I])}else f=[],j_(d,f);return f}function j_(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function ff(i,o=[]){return a=>{a.providersResolver=(l,d)=>function xg(i,o,a){const l=en();if(l.firstCreatePass){const d=dr(i);md(a,l.data,l.blueprint,d,!0),md(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class er{}class va{}function pT(i,o){return new Rg(i,o??null)}class Rg extends er{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new eC(this);const l=Ur(o);this._bootstrapComponents=ca(l.bootstrap),this._r3Injector=Vy(o,a,[{provide:er,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver}],le(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ng extends va{constructor(o){super(),this.moduleType=o}create(o){return new Rg(this.moduleType,o)}}class fi extends er{constructor(o,a,l){super(),this.componentFactoryResolver=new eC(this),this.instance=null;const d=new Db([...o,{provide:er,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver}],a||Ry(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function $_(i,o,a=null){return new fi(i,o,a).injector}let Og=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=X0(0,a.type),d=l.length>0?$_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=rt({token:i,providedIn:"environment",factory:()=>new i(He(ml))}),i})();function H_(i){i.getStandaloneInjector=o=>o.get(Og).getOrCreateStandaloneInjector(i)}function Fg(i,o,a,l){return function K_(i,o,a,l,d,f){const y=o+a;return ci(i,y,d)?function Oo(i,o,a){return i[o]=a}(i,y+1,f?l.call(f,d):l(d)):function xl(i,o){const a=i[o];return a===Gt?void 0:a}(i,y+1)}(me(),function vr(){const i=Vt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),i,o,a,l)}function ev(i){return o=>{setTimeout(i,void 0,o)}}const Ns=class hI extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=ev(f),d&&(d=ev(d)),y&&(y=ev(y)));const w=super.subscribe({next:d,error:f,complete:y});return o instanceof j.w0&&o.add(w),w}};function tv(){return this._results[xs()]()}class vf{get changes(){return this._changes||(this._changes=new Ns)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=xs(),l=vf.prototype;l[a]||(l[a]=tv)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function Er(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function vp(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let tr=(()=>{class i{}return i.__NG_ELEMENT_ID__=nv,i})();const si=tr,Vg=class extends si{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=Qc(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(l)),El(l,d,o),new ng(d)}};function nv(){return Bg(Xn(),me())}function Bg(i,o){return 4&i.type?new Vg(o,i,Ao(i,o)):null}let jg=(()=>{class i{}return i.__NG_ELEMENT_ID__=fI,i})();function fI(){return gI(Xn(),me())}const bT=jg,pI=class extends bT{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ao(this._hostTNode,this._hostLView)}get injector(){return new Ji(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ga(this._hostTNode,this._hostLView);if(qu(o)){const a=Gs(o,this._hostLView),l=_o(o);return new Ji(a[1].data[l+8],a)}return new Ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=rv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const y=o.createEmbeddedView(a||{},f);return this.insert(y,d),y}createComponent(o,a,l,d,f){const y=o&&!function ra(i){return"function"==typeof i}(o);let w;if(y)w=a;else{const F=a||{};w=F.index,l=F.injector,d=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const I=y?o:new zh(nn(o)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const q=(y?T:this.parentInjector).get(ml,null);q&&(f=q)}const M=I.create(T,d,void 0,f);return this.insert(M.hostView,w),M}insert(o,a){const l=o._lView,d=l[1];if(function Hd(i){return Jr(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=l[3],q=new pI(F,F[6],F[3]);q.detach(q.indexOf(o))}}const f=this._adjustIndex(a),y=this._lContainer;!function ly(i,o,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=o),l<f-10?(o[4]=a[d],Ju(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function gh(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=64}(d,l,y,f);const w=Fc(f,y),I=l[11],T=Pc(I,y[7]);return null!==T&&function Rp(i,o,a,l,d,f){l[0]=d,l[6]=o,ou(i,l,a,1,d,f)}(d,y[6],I,l,T,w),o.attachToViewContainerRef(),Ju(wf(y),f,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=rv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=cl(this._lContainer,a);l&&(ia(wf(this._lContainer),a),mh(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=cl(this._lContainer,a);return l&&null!=ia(wf(this._lContainer),a)?new ng(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function rv(i){return i[8]}function wf(i){return i[8]||(i[8]=[])}function gI(i,o){let a;const l=o[i.index];if(Jr(l))a=l;else{let d;if(8&i.type)d=Mn(l);else{const f=o[11];d=f.createComment("");const y=hr(i,o);dl(f,Pc(f,y),d,function yM(i,o){return i.nextSibling(o)}(f,y),!1)}o[i.index]=a=qy(l,o,d,i),rd(o,a)}return new pI(a,i,o)}class Ef{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ef(this.queryList)}setDirty(){this.queryList.setDirty()}}class $g{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new $g(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==av(o,a).matches&&this.queries[a].setDirty()}}class mI{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class _d{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new _d(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class If{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new If(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,iv(a,f)),this.matchTNodeWithReadOption(o,a,qs(a,o,f,!1,!1))}else l===tr?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,qs(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Ms||d===jg||d===tr&&4&a.type)this.addMatch(a.index,-2);else{const f=qs(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function iv(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function CT(i,o,a,l){return-1===a?function yI(i,o){return 11&i.type?Ao(i,o):4&i.type?Bg(i,o):null}(o,i):-2===a?function Df(i,o,a){return a===Ms?Ao(o,i):a===tr?Bg(o,i):a===jg?gI(o,i):void 0}(i,o,l):Li(i,i[1],a,o)}function sv(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const f=i.data,y=a.matches,w=[];for(let I=0;I<y.length;I+=2){const T=y[I];w.push(T<0?null:CT(o,f[T],y[I+1],a.metadata.read))}d.matches=w}return d.matches}function Hg(i,o,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=sv(i,o,d,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)l.push(y[w/2]);else{const T=f[w+1],M=o[-I];for(let F=10;F<M.length;F++){const q=M[F];q[17]===q[3]&&Hg(q[1],q,T,l)}if(null!==M[9]){const F=M[9];for(let q=0;q<F.length;q++){const ee=F[q];Hg(ee[1],ee,T,l)}}}}}return l}function ov(i){const o=me(),a=en(),l=Yd();Gu(l+1);const d=av(a,l);if(i.dirty&&function Fa(i){return 4==(4&i[2])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Hg(a,o,l,[]):sv(a,o,d,l);i.reset(f,uw),i.notifyOnChanges()}return!0}return!1}function _I(i,o,a,l){const d=en();if(d.firstCreatePass){const f=Xn();(function EI(i,o,a){null===i.queries&&(i.queries=new _d),i.queries.track(new If(o,a))})(d,new mI(o,a,l),f.index),function Nl(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function wI(i,o,a){const l=new vf(4==(4&a));bw(i,o,l,l.destroy),null===o[19]&&(o[19]=new $g),o[19].queries.push(new Ef(l))}(d,me(),a)}function vI(){return function vd(i,o){return i[19].queries[o].queryList}(me(),Yd())}function av(i,o){return i.queries.getByIndex(o)}function Mf(...i){}const yv=new an("Application Initializer");let xf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Mf,this.reject=Mf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(a_(f))a.push(f);else if(Qw(f)){const y=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(He(yv,8))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const em=new an("AppId",{providedIn:"root",factory:function tm(){return`${nm()}${nm()}${nm()}`}});function nm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const rm=new an("Platform Initializer"),PT=new an("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),OI=new an("appBootstrapListener");let Rf=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Td=new an("LocaleId",{providedIn:"root",factory:()=>nt(Td,at.Optional|at.SkipSelf)||function im(){return typeof $localize<"u"&&$localize.locale||vu}()}),kI=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nr{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let PI=(()=>{class i{compileModuleSync(a){return new Ng(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=ca(Ur(a).declarations).reduce((y,w)=>{const I=nn(w);return I&&y.push(new zh(I)),y},[]);return new nr(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const FI=(()=>Promise.resolve(0))();function Qs(i){typeof Zone>"u"?FI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Bi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ns(!1),this.onMicrotaskEmpty=new Ns(!1),this.onStable=new Ns(!1),this.onError=new Ns(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function LI(){let i=Nt.requestAnimationFrame,o=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function um(i){const o=()=>{!function Ev(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,lm(i),i.isCheckStableRunning=!0,am(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),lm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,w)=>{try{return Of(i),a.invokeTask(d,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),UI(i)}},onInvoke:(a,l,d,f,y,w,I)=>{try{return Of(i),a.invoke(d,f,y,w,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),UI(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,lm(i),am(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bi.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(Bi.isInAngularZone())throw new pe(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Nf,Mf,Mf);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Nf={};function am(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function lm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Of(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function UI(i){i._nesting--,am(i)}class VI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ns,this.onMicrotaskEmpty=new Ns,this.onStable=new Ns,this.onError=new Ns}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Sd=new an(""),Iv=new an("");let dm,BI=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dm||(function Dv(i){dm=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bi.assertNotInAngularZone(),Qs(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qs(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(He(Bi),He(cm),He(Iv))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),cm=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return dm?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Xs=null;const bv=new an("AllowMultipleToken"),hm=new an("PlatformDestroyListeners");class HI{constructor(o,a){this.name=o,this.token=a}}function Ul(i,o,a=[]){const l=`Platform: ${o}`,d=new an(l);return(f=[])=>{let y=Tv();if(!y||y.injector.get(bv,!1)){const w=[...a,...f,{provide:d,useValue:!0}];i?i(w):function fm(i){if(Xs&&!Xs.get(bv,!1))throw new pe(400,!1);Xs=i;const o=i.get(qI);(function Cv(i){const o=i.get(rm,null);o&&o.forEach(a=>a())})(i)}(function GI(i=[],o){return Ro.create({name:o,providers:[{provide:rw,useValue:"platform"},{provide:hm,useValue:new Set([()=>Xs=null])},...i]})}(w,l))}return function $T(i){const o=Tv();if(!o)throw new pe(401,!1);return o}()}}function Tv(){return Xs?.get(qI)??null}let qI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function WI(i,o){let a;return a="noop"===i?new VI:("zone.js"===i?void 0:i)||new Bi(o),a}(l?.ngZone,function Sv(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Bi,useValue:d}];return d.run(()=>{const y=Ro.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),I=w.injector.get(kh,null);if(!I)throw new pe(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:M=>{I.handleError(M)}});w.onDestroy(()=>{fr(this._modules,w),T.unsubscribe()})}),function kf(i,o,a){try{const l=a();return a_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,d,()=>{const T=w.injector.get(xf);return T.runInitializers(),T.donePromise.then(()=>(function NE(i){tt(i,"Expected localeId to be defined"),"string"==typeof i&&(RE=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(Td,vu)||vu),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const d=ZI({},l);return function jI(i,o,a){const l=new Ng(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Pf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new pe(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(hm,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(He(Ro))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function ZI(i,o){return Array.isArray(o)?o.reduce(ZI,i):{...i,...o}}let Pf=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new O.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Bi.assertNotInAngularZone(),Qs(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Bi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,te.T)(f,y.pipe((0,ie.B)()))}bootstrap(a,l){const d=a instanceof Ny;if(!this._injector.get(xf).done)throw!d&&kn(a),new pe(405,false);let y;y=d?a:this._injector.get(Nh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function $I(i){return i.isBoundToModule}(y)?void 0:this._injector.get(er),T=y.create(Ro.NULL,[],l||y.selector,w),M=T.location.nativeElement,F=T.injector.get(Sd,null);return F?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),fr(this.components,T),F?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;fr(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(OI,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>fr(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new pe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(He(Bi),He(ml),He(kh))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function fr(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function Av(){return!1}let Mv=(()=>{class i{}return i.__NG_ELEMENT_ID__=ut,i})();function ut(i){return function _t(i,o,a){if(Go(i)&&!a){const l=Qn(i.index,o);return new ng(l,l)}return 47&i.type?new ng(o[16],o):null}(Xn(),me(),16==(16&i))}class on{constructor(){}supports(o){return og(o)}create(o){return new rr(o)}}const WT=(i,o)=>o;class rr{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||WT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<Iu(l,d,f)?a:l,w=Iu(y,d,f),I=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const T=w-d,M=I-d;if(T!=M){for(let q=0;q<T;q++){const ee=q<f.length?f[q]:f[q]=0,_e=ee+q;M<=_e&&_e<T&&(f[q]=ee+1)}f[y.previousIndex]=M-T}}w!==I&&o(y,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!og(o))throw new pe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)f=o[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),l=!0),a=a._next}else d=0,function hC(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[xs()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Qe(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new _m),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _m),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Qe{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ym{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class _m{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ym,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Iu(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class XI{constructor(){}supports(o){return o instanceof Map||Jy(o)}create(){return new vm}}class vm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Jy(o)))throw new pe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new ZT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class ZT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ad(){return new wm([new on])}let wm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ad()),deps:[[i,new b,new Co]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new pe(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:Ad}),i})();function ji(){return new Ff([new XI])}let Ff=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ji()),deps:[[i,new b,new Co]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new pe(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:ji}),i})();const ue=Ul(null,"core",[]);let Em=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(He(Pf))},i.\u0275mod=no({type:i}),i.\u0275inj=_n({}),i})();function Js(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(pt,Ce,P)=>{P.d(Ce,{Z:()=>ze});var h=P(2090),j=P(4859),O=P(9681),te=P(1877);class ie{constructor(pe,Se){this._delegate=pe,this.firebase=Se,(0,O._addComponent)(pe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,Se=O._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(pe);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Ie=Pe.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:Se})}_removeServiceInstance(pe,Se=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(Se)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function fe(){const ot=function le(ot){const pe={},Se={__esModule:!0,initializeApp:function Ae(Y,se={}){const ve=O.initializeApp(Y,se);if((0,h.r3)(pe,ve.name))return pe[ve.name];const We=new ot(ve,Se);return pe[ve.name]=We,We},app:Pe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function be(Y){const se=Y.name,ve=se.replace("-compat","");if(O._registerComponent(Y)&&"PUBLIC"===Y.type){const We=(Ge=Pe())=>{if("function"!=typeof Ge[ve])throw ge.create("invalid-app-argument",{appName:se});return Ge[ve]()};void 0!==Y.serviceProps&&(0,h.ZB)(We,Y.serviceProps),Se[ve]=We,ot.prototype[ve]=function(...Ge){return this._getService.bind(this,se).apply(this,Y.multipleInstances?Ge:[])}}return"PUBLIC"===Y.type?Se[ve]:null},removeApp:function Ie(Y){delete pe[Y]},useAsService:function je(Y,se){return"serverAuth"===se?null:se},modularAPIs:O}};function Pe(Y){if(!(0,h.r3)(pe,Y=Y||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Y});return pe[Y]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function xe(){return Object.keys(pe).map(Y=>pe[Y])}}),Pe.App=ot,Se}(ie);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function pe(Se){(0,h.ZB)(ot,Se)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ot}(),G=new te.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=z;!function Te(ot){(0,O.registerVersion)("@firebase/app-compat","0.2.3",ot)}()},9681:(pt,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Ue,_addComponent:()=>cn,_addOrOverwriteComponent:()=>bt,_apps:()=>tt,_clearComponents:()=>_n,_components:()=>Ze,_getProvider:()=>rt,_registerComponent:()=>wt,_removeServiceInstance:()=>rn,deleteApp:()=>_i,getApp:()=>Un,getApps:()=>Kr,initializeApp:()=>yi,onLog:()=>at,registerVersion:()=>sr,setLogLevel:()=>or});var h=P(5861),j=P(4859),O=P(1877),te=P(2090),ie=P(8766);class ae{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function ge(He){return"VERSION"===He.getComponent()?.type}(nt)){const Ct=nt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(nt=>nt).join(" ")}}const le="@firebase/app",z=new O.Yd("@firebase/app"),Ue="[DEFAULT]",Be={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tt=new Map,Ze=new Map;function cn(He,Ee){try{He.container.addComponent(Ee)}catch(nt){z.debug(`Component ${Ee.name} failed to register with FirebaseApp ${He.name}`,nt)}}function bt(He,Ee){He.container.addOrOverwriteComponent(Ee)}function wt(He){const Ee=He.name;if(Ze.has(Ee))return z.debug(`There were multiple attempts to register component ${Ee}.`),!1;Ze.set(Ee,He);for(const nt of tt.values())cn(nt,He);return!0}function rt(He,Ee){const nt=He.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),He.container.getProvider(Ee)}function rn(He,Ee,nt=Ue){rt(He,Ee).clearInstance(nt)}function _n(){Ze.clear()}const sn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wn{constructor(Ee,nt,Ct){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const Fr="9.17.1";function yi(He,Ee={}){let nt=He;"object"!=typeof Ee&&(Ee={name:Ee});const Ct=Object.assign({name:Ue,automaticDataCollectionEnabled:!1},Ee),St=Ct.name;if("string"!=typeof St||!St)throw sn.create("bad-app-name",{appName:String(St)});if(nt||(nt=(0,te.aH)()),!nt)throw sn.create("no-options");const Xt=tt.get(St);if(Xt){if((0,te.vZ)(nt,Xt.options)&&(0,te.vZ)(Ct,Xt.config))return Xt;throw sn.create("duplicate-app",{appName:St})}const H=new j.H0(St);for(const W of Ze.values())H.addComponent(W);const B=new Wn(nt,Ct,H);return tt.set(St,B),B}function Un(He=Ue){const Ee=tt.get(He);if(!Ee&&He===Ue)return yi();if(!Ee)throw sn.create("no-app",{appName:He});return Ee}function Kr(){return Array.from(tt.values())}function _i(He){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(He){const Ee=He.name;tt.has(Ee)&&(tt.delete(Ee),yield Promise.all(He.container.getProviders().map(nt=>nt.delete())),He.isDeleted=!0)})).apply(this,arguments)}function sr(He,Ee,nt){var Ct;let St=null!==(Ct=Be[He])&&void 0!==Ct?Ct:He;nt&&(St+=`-${nt}`);const Xt=St.match(/\s|\//),H=Ee.match(/\s|\//);if(Xt||H){const B=[`Unable to register library "${St}" with version "${Ee}":`];return Xt&&B.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Xt&&H&&B.push("and"),H&&B.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void z.warn(B.join(" "))}wt(new j.wA(`${St}-version`,()=>({library:St,version:Ee}),"VERSION"))}function at(He,Ee){if(null!==He&&"function"!=typeof He)throw sn.create("invalid-log-argument");(0,O.Am)(He,Ee)}function or(He){(0,O.Ub)(He)}const Bn="firebase-heartbeat-store";let Lr=null;function Nt(){return Lr||(Lr=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(He,Ee)=>{0===Ee&&He.createObjectStore(Bn)}}).catch(He=>{throw sn.create("idb-open",{originalErrorMessage:He.message})})),Lr}function xt(){return(xt=(0,h.Z)(function*(He){try{return(yield Nt()).transaction(Bn).objectStore(Bn).get(Dn(He))}catch(Ee){if(Ee instanceof te.ZR)z.warn(Ee.message);else{const nt=sn.create("idb-get",{originalErrorMessage:Ee?.message});z.warn(nt.message)}}})).apply(this,arguments)}function gn(He,Ee){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(He,Ee){try{const Ct=(yield Nt()).transaction(Bn,"readwrite");return yield Ct.objectStore(Bn).put(Ee,Dn(He)),Ct.done}catch(nt){if(nt instanceof te.ZR)z.warn(nt.message);else{const Ct=sn.create("idb-set",{originalErrorMessage:nt?.message});z.warn(Ct.message)}}})).apply(this,arguments)}function Dn(He){return`${He.name}!${He.options.appId}`}class vi{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new Wt(nt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ee=this;return(0,h.Z)(function*(){const Ct=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=$t();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==St&&!Ee._heartbeatsCache.heartbeats.some(Xt=>Xt.date===St))return Ee._heartbeatsCache.heartbeats.push({date:St,agent:Ct}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(Xt=>{const H=new Date(Xt.date).valueOf();return Date.now()-H<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,h.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const nt=$t(),{heartbeatsToSend:Ct,unsentEntries:St}=function wi(He,Ee=1024){const nt=[];let Ct=He.slice();for(const St of He){const Xt=nt.find(H=>H.agent===St.agent);if(Xt){if(Xt.dates.push(St.date),Tr(nt)>Ee){Xt.dates.pop();break}}else if(nt.push({agent:St.agent,dates:[St.date]}),Tr(nt)>Ee){nt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ct}}(Ee._heartbeatsCache.heartbeats),Xt=(0,te.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ee._heartbeatsCache.lastSentHeartbeatDate=nt,St.length>0?(Ee._heartbeatsCache.heartbeats=St,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),Xt})()}}function $t(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,h.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function gt(He){return xt.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var nt=this;return(0,h.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Xt=yield nt.read();return gn(nt.app,{lastSentHeartbeatDate:null!==(Ct=Ee.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Xt.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var nt=this;return(0,h.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const Xt=yield nt.read();return gn(nt.app,{lastSentHeartbeatDate:null!==(Ct=Ee.lastSentHeartbeatDate)&&void 0!==Ct?Ct:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Ee.heartbeats]})}})()}}function Tr(He){return(0,te.L)(JSON.stringify({version:2,heartbeats:He})).length}!function On(He){wt(new j.wA("platform-logger",Ee=>new ae(Ee),"PRIVATE")),wt(new j.wA("heartbeat",Ee=>new vi(Ee),"PRIVATE")),sr(le,"0.9.3",He),sr(le,"0.9.3","esm2017"),sr("fire-js","")}("")},4859:(pt,Ce,P)=>{P.d(Ce,{H0:()=>le,wA:()=>O});var h=P(5861),j=P(2090);class O{constructor(z,G,Z){this.name=z,this.instanceFactory=G,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const te="[DEFAULT]";class ie{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const Z=new j.BH;if(this.instancesDeferred.set(G,Z),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&Z.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const Z=this.normalizeInstanceIdentifier(z?.identifier),$e=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ge(fe){return"EAGER"===fe.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[G,Z]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});Z.resolve(Te)}catch{}}}}clearInstance(z=te){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,h.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...G.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=te){return this.instances.has(z)}getOptions(z=te){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,Z=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Z,options:G});for(const[Te,ze]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Te)&&ze.resolve($e);return $e}onInit(z,G){var Z;const $e=this.normalizeInstanceIdentifier(G),Te=null!==(Z=this.onInitCallbacks.get($e))&&void 0!==Z?Z:new Set;Te.add(z),this.onInitCallbacks.set($e,Te);const ze=this.instances.get($e);return ze&&z(ze,$e),()=>{Te.delete(z)}}invokeOnInitCallbacks(z,G){const Z=this.onInitCallbacks.get(G);if(Z)for(const $e of Z)try{$e(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let Z=this.instances.get(z);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=z,fe===te?void 0:fe),options:G}),this.instances.set(z,Z),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(Z,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Z)}catch{}var fe;return Z||null}normalizeInstanceIdentifier(z=te){return this.component?this.component.multipleInstances?z:te:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ie(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Ce,P)=>{P.d(Ce,{Am:()=>fe,Ub:()=>le,Yd:()=>ge,in:()=>j});const h=[];var j=(()=>{return(z=j||(j={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",j;var z})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},te=j.INFO,ie={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ae=(z,G,...Z)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Te=ie[G];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Te](`[${$e}]  ${z.name}:`,...Z)};class ge{constructor(G){this.name=G,this._logLevel=te,this._logHandler=ae,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in j))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...G),this._logHandler(this,j.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...G),this._logHandler(this,j.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,j.INFO,...G),this._logHandler(this,j.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,j.WARN,...G),this._logHandler(this,j.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...G),this._logHandler(this,j.ERROR,...G)}}function le(z){h.forEach(G=>{G.setLogLevel(z)})}function fe(z,G){for(const Z of h){let $e=null;G&&G.level&&($e=O[G.level]),Z.userLogHandler=null===z?null:(Te,ze,...ot)=>{const pe=ot.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");ze>=($e??Te.logLevel)&&z({level:j[ze].toLowerCase(),message:pe,args:ot,type:Te.name})}}}},259:(pt,Ce,P)=>{P.d(Ce,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=P(9681);(0,h.registerVersion)("firebase","9.17.1","app")},9260:(pt,Ce,P)=>{P.d(Ce,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(pt,Ce,P)=>{P.r(Ce);var h=P(5861),j=P(3942),O=P(2722),te=P(2090),ge=(P(9681),P(1877),P(4859));function le(){return window}function G(){return(G=(0,h.Z)(function*(U,R,L){var re;const{BuildInfo:Me}=le();(0,O.ap)(R.sessionId,"AuthEvent did not contain a session ID");const lt=yield Se(R.sessionId),qe={};return(0,O.aq)()?qe.ibi=Me.packageName:(0,O.ar)()?qe.apn=Me.packageName:(0,O.as)(U,"operation-not-supported-in-this-environment"),Me.displayName&&(qe.appDisplayName=Me.displayName),qe.sessionId=lt,(0,O.at)(U,L,R.type,void 0,null!==(re=R.eventId)&&void 0!==re?re:void 0,qe)})).apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(U){const{BuildInfo:R}=le(),L={};(0,O.aq)()?L.iosBundleId=R.packageName:(0,O.ar)()?L.androidPackageName=R.packageName:(0,O.as)(U,"operation-not-supported-in-this-environment"),yield(0,O.au)(U,L)})).apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(U,R,L){const{cordova:re}=le();let Me=()=>{};try{yield new Promise((lt,qe)=>{let Lt=null;function ft(){var kt;lt();const Sr=null===(kt=re.plugins.browsertab)||void 0===kt?void 0:kt.close;"function"==typeof Sr&&Sr(),"function"==typeof L?.close&&L.close()}function yn(){Lt||(Lt=window.setTimeout(()=>{qe((0,O.aw)(U,"redirect-cancelled-by-user"))},2e3))}function ar(){"visible"===document?.visibilityState&&yn()}R.addPassiveListener(ft),document.addEventListener("resume",yn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",ar,!1),Me=()=>{R.removePassiveListener(ft),document.removeEventListener("resume",yn,!1),document.removeEventListener("visibilitychange",ar,!1),Lt&&window.clearTimeout(Lt)}})}finally{Me()}})).apply(this,arguments)}function Se(U){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,h.Z)(function*(U){const R=Pe(U),L=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(L)).map(Me=>Me.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pe(U){if((0,O.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const R=new ArrayBuffer(U.length),L=new Uint8Array(R);for(let re=0;re<U.length;re++)L[re]=U.charCodeAt(re);return L}class xe extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(R)),super.onEvent(R)}initialized(){var R=this;return(0,h.Z)(function*(){yield R.initPromise})()}}function Y(U){return se.apply(this,arguments)}function se(){return(se=(0,h.Z)(function*(U){const R=yield Ge()._get(Mt(U));return R&&(yield Ge()._remove(Mt(U))),R})).apply(this,arguments)}function We(){const U=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const re=Math.floor(Math.random()*R.length);U.push(R.charAt(re))}return U.join("")}function Ge(){return(0,O.az)(O.b)}function Mt(U){return(0,O.aA)("authEvent",U.config.apiKey,U.name)}function de(U){if(!U?.includes("?"))return{};const[R,...L]=U.split("?");return(0,te.zd)(L.join("?"))}const Ue=class Re{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,h.Z)(function*(){const re=R._key();let Me=L.eventManagers.get(re);return Me||(Me=new xe(R),L.eventManagers.set(re,Me),L.attachCallbackListeners(R,Me)),Me})()}_openPopup(R){(0,O.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,L,re,Me){var lt=this;return(0,h.Z)(function*(){!function pe(U){var R,L,re,Me,lt,qe,Lt,ft,yn,ar;const kt=le();(0,O.ax)("function"==typeof(null===(R=kt?.universalLinks)||void 0===R?void 0:R.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(L=kt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(lt=null===(Me=null===(re=kt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===lt?void 0:lt.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(ft=null===(Lt=null===(qe=kt?.cordova)||void 0===qe?void 0:qe.plugins)||void 0===Lt?void 0:Lt.browsertab)||void 0===ft?void 0:ft.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(ar=null===(yn=kt?.cordova)||void 0===yn?void 0:yn.InAppBrowser)||void 0===ar?void 0:ar.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const qe=yield lt._initialize(R);yield qe.initialized(),qe.resetRedirect(),(0,O.aD)(),yield lt._originValidation(R);const Lt=function be(U,R,L=null){return{type:R,eventId:L,urlResponse:null,sessionId:We(),postBody:null,tenantId:U.tenantId,error:(0,O.aw)(U,"no-auth-event")}}(R,re,Me);yield function je(U,R){return Ge()._set(Mt(U),R)}(R,Lt);const ft=yield function z(U,R,L){return G.apply(this,arguments)}(R,Lt,L),yn=yield function Te(U){const{cordova:R}=le();return new Promise(L=>{R.plugins.browsertab.isAvailable(re=>{let Me=null;re?R.plugins.browsertab.openUrl(U):Me=R.InAppBrowser.open(U,(0,O.av)()?"_blank":"_system","location=yes"),L(Me)})})}(ft);return function ze(U,R,L){return ot.apply(this,arguments)}(R,qe,yn)})()}_isIframeWebStorageSupported(R,L){throw new Error("Method not implemented.")}_originValidation(R){const L=R._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Z(U){return $e.apply(this,arguments)}(R)),this.originValidationPromises[L]}attachCallbackListeners(R,L){const{universalLinks:re,handleOpenURL:Me,BuildInfo:lt}=le(),qe=setTimeout((0,h.Z)(function*(){yield Y(R),L.onEvent(Be())}),500),Lt=function(){var ar=(0,h.Z)(function*(kt){clearTimeout(qe);const Sr=yield Y(R);let Ru=null;Sr&&kt?.url&&(Ru=function ve(U,R){var L,re;const Me=function oe(U){const R=de(U),L=R.link?decodeURIComponent(R.link):void 0,re=de(L).link,Me=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return de(Me).link||Me||re||L||U}(R);if(Me.includes("/__/auth/callback")){const lt=de(Me),qe=lt.firebaseError?function Xe(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(lt.firebaseError)):null,Lt=null===(re=null===(L=qe?.code)||void 0===L?void 0:L.split("auth/"))||void 0===re?void 0:re[1],ft=Lt?(0,O.aw)(Lt):null;return ft?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:ft,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Me,postBody:null}}return null}(Sr,kt.url)),L.onEvent(Ru||Be())});return function(Sr){return ar.apply(this,arguments)}}();typeof re<"u"&&"function"==typeof re.subscribe&&re.subscribe(null,Lt);const ft=Me,yn=`${lt.packageName.toLowerCase()}://`;le().handleOpenURL=function(){var ar=(0,h.Z)(function*(kt){if(kt.toLowerCase().startsWith(yn)&&Lt({url:kt}),"function"==typeof ft)try{ft(kt)}catch(Sr){console.error(Sr)}});return function(kt){return ar.apply(this,arguments)}}()}};function Be(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function wt(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function rn(U=(0,te.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()&&"capacitor:"!==wt()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fr(){try{const U=self.localStorage,R=O.aI();if(U)return U.setItem(R,"1"),U.removeItem(R),!function Wn(U=(0,te.z$)()){return function mn(){return(0,te.w1)()&&11===document?.documentMode}()||function sn(U=(0,te.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,te.hl)()}catch{return yi()&&(0,te.hl)()}return!1}function yi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function rt(){return"http:"===wt()||"https:"===wt()}()||(0,te.ru)()||rn())&&!function _n(){return(0,te.b$)()||(0,te.UG)()}()&&Fr()&&!yi()}function Kr(){return rn()&&typeof document<"u"}function pn(){return(pn=(0,h.Z)(function*(){return!!Kr()&&new Promise(U=>{const R=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),U(!0)})})})).apply(this,arguments)}const at={LOCAL:"local",NONE:"none",SESSION:"session"},or=O.ax,mr="persistence";function Bn(U){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,h.Z)(function*(U){yield U._initializationPromise;const R=gt(),L=O.aA(mr,U.config.apiKey,U.name);R&&R.setItem(L,U._getPersistence())})).apply(this,arguments)}function gt(){var U;try{return(null===(U=function sr(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const xt=O.ax;class gn{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(Ue),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(R){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,L,re,Me){var lt=this;return(0,h.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openPopup(R,L,re,Me)})()}_openRedirect(R,L,re,Me){var lt=this;return(0,h.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openRedirect(R,L,re,Me)})()}_isIframeWebStorageSupported(R,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,L)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Kr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,h.Z)(function*(){if(R.underlyingResolver)return;const L=yield function _i(){return pn.apply(this,arguments)}();R.underlyingResolver=L?R.cordovaResolver:R.browserResolver})()}}function Zn(U){return U.unwrap()}function Yr(U){return vi(U)}function vi(U){const{_tokenResponse:R}=U instanceof te.ZR?U.customData:U;if(!R)return null;if(!(U instanceof te.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return O.P.credentialFromResult(U);const L=R.providerId;if(!L||L===O.o.PASSWORD)return null;let re;switch(L){case O.o.GOOGLE:re=O.Q;break;case O.o.FACEBOOK:re=O.N;break;case O.o.GITHUB:re=O.T;break;case O.o.TWITTER:re=O.W;break;default:const{oauthIdToken:Me,oauthAccessToken:lt,oauthTokenSecret:qe,pendingToken:Lt,nonce:ft}=R;return lt||qe||Me||Lt?Lt?L.startsWith("saml.")?O.aL._create(L,Lt):O.J._fromParams({providerId:L,signInMethod:L,pendingToken:Lt,idToken:Me,accessToken:lt}):new O.U(L).credential({idToken:Me,accessToken:lt,rawNonce:ft}):null}return U instanceof te.ZR?re.credentialFromError(U):re.credentialFromResult(U)}function $t(U,R){return R.catch(L=>{throw L instanceof te.ZR&&function Kn(U,R){var L;const re=null===(L=R.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new Tr(U,O.an(U,R));else if(re){const Me=vi(R),lt=R;Me&&(lt.credential=Me,lt.tenantId=re.tenantId||void 0,lt.email=re.email||void 0,lt.phoneNumber=re.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Me=L.user;return{operationType:L.operationType,credential:Yr(L),additionalUserInfo:O.al(L),user:On.getOrCreate(Me)}})}function wi(U,R){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(U,R){const L=yield R;return{verificationId:L.verificationId,confirm:re=>$t(U,L.confirm(re))}})).apply(this,arguments)}class Tr{constructor(R,L){this.resolver=L,this.auth=function Dn(U){return U.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return $t(Zn(this.auth),this.resolver.resolveSignIn(R))}}class On{constructor(R){this._delegate=R,this.multiFactor=O.ao(R)}static getOrCreate(R){return On.USER_MAP.has(R)||On.USER_MAP.set(R,new On(R)),On.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var L=this;return(0,h.Z)(function*(){return $t(L.auth,O.Z(L._delegate,R))})()}linkWithPhoneNumber(R,L){var re=this;return(0,h.Z)(function*(){return wi(re.auth,O.l(re._delegate,R,L))})()}linkWithPopup(R){var L=this;return(0,h.Z)(function*(){return $t(L.auth,O.d(L._delegate,R,gn))})()}linkWithRedirect(R){var L=this;return(0,h.Z)(function*(){return yield Bn(O.aE(L.auth)),O.g(L._delegate,R,gn)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var L=this;return(0,h.Z)(function*(){return $t(L.auth,O._(L._delegate,R))})()}reauthenticateWithPhoneNumber(R,L){return wi(this.auth,O.r(this._delegate,R,L))}reauthenticateWithPopup(R){return $t(this.auth,O.e(this._delegate,R,gn))}reauthenticateWithRedirect(R){var L=this;return(0,h.Z)(function*(){return yield Bn(O.aE(L.auth)),O.h(L._delegate,R,gn)})()}sendEmailVerification(R){return O.ab(this._delegate,R)}unlink(R){var L=this;return(0,h.Z)(function*(){return yield O.ak(L._delegate,R),L})()}updateEmail(R){return O.ag(this._delegate,R)}updatePassword(R){return O.ah(this._delegate,R)}updatePhoneNumber(R){return O.u(this._delegate,R)}updateProfile(R){return O.af(this._delegate,R)}verifyBeforeUpdateEmail(R,L){return O.ac(this._delegate,R,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}On.USER_MAP=new WeakMap;const He=O.ax;let Ee=(()=>{class U{constructor(L,re){if(this.app=L,re.isInitialized())return this._delegate=re.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Me}=L.options;He(Me,"invalid-api-key",{appName:L.name}),He(Me,"invalid-api-key",{appName:L.name});const lt=typeof window<"u"?gn:void 0;this._delegate=re.initialize({options:{persistence:Ct(Me,L.name),popupRedirectResolver:lt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?On.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,re){O.G(this._delegate,L,re)}applyActionCode(L){return O.a2(this._delegate,L)}checkActionCode(L){return O.a3(this._delegate,L)}confirmPasswordReset(L,re){return O.a1(this._delegate,L,re)}createUserWithEmailAndPassword(L,re){var Me=this;return(0,h.Z)(function*(){return $t(Me._delegate,O.a5(Me._delegate,L,re))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return O.aa(this._delegate,L)}isSignInWithEmailLink(L){return O.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,h.Z)(function*(){He(Un(),L._delegate,"operation-not-supported-in-this-environment");const re=yield O.j(L._delegate,gn);return re?$t(L._delegate,Promise.resolve(re)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function tt(U,R){(0,O.aE)(U)._logFramework(R)}(this._delegate,L)}onAuthStateChanged(L,re,Me){const{next:lt,error:qe,complete:Lt}=nt(L,re,Me);return this._delegate.onAuthStateChanged(lt,qe,Lt)}onIdTokenChanged(L,re,Me){const{next:lt,error:qe,complete:Lt}=nt(L,re,Me);return this._delegate.onIdTokenChanged(lt,qe,Lt)}sendSignInLinkToEmail(L,re){return O.a7(this._delegate,L,re)}sendPasswordResetEmail(L,re){return O.a0(this._delegate,L,re||void 0)}setPersistence(L){var re=this;return(0,h.Z)(function*(){let Me;switch(function Vn(U,R){or(Object.values(at).includes(R),U,"invalid-persistence-type"),(0,te.b$)()?or(R!==at.SESSION,U,"unsupported-persistence-type"):(0,te.UG)()?or(R===at.NONE,U,"unsupported-persistence-type"):yi()?or(R===at.NONE||R===at.LOCAL&&(0,te.hl)(),U,"unsupported-persistence-type"):or(R===at.NONE||Fr(),U,"unsupported-persistence-type")}(re._delegate,L),L){case at.SESSION:Me=O.a;break;case at.LOCAL:Me=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case at.NONE:Me=O.L;break;default:return O.as("argument-error",{appName:re._delegate.name})}return re._delegate.setPersistence(Me)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return $t(this._delegate,O.X(this._delegate))}signInWithCredential(L){return $t(this._delegate,O.Y(this._delegate,L))}signInWithCustomToken(L){return $t(this._delegate,O.$(this._delegate,L))}signInWithEmailAndPassword(L,re){return $t(this._delegate,O.a6(this._delegate,L,re))}signInWithEmailLink(L,re){return $t(this._delegate,O.a9(this._delegate,L,re))}signInWithPhoneNumber(L,re){return wi(this._delegate,O.s(this._delegate,L,re))}signInWithPopup(L){var re=this;return(0,h.Z)(function*(){return He(Un(),re._delegate,"operation-not-supported-in-this-environment"),$t(re._delegate,O.c(re._delegate,L,gn))})()}signInWithRedirect(L){var re=this;return(0,h.Z)(function*(){return He(Un(),re._delegate,"operation-not-supported-in-this-environment"),yield Bn(re._delegate),O.f(re._delegate,L,gn)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return O.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=at,U})();function nt(U,R,L){let re=U;"function"!=typeof U&&({next:re,error:R,complete:L}=U);const Me=re;return{next:qe=>Me(qe&&On.getOrCreate(qe)),error:R,complete:L}}function Ct(U,R){const L=function Nt(U,R){const L=gt();if(!L)return[];const re=O.aA(mr,U,R);switch(L.getItem(re)){case at.NONE:return[O.L];case at.LOCAL:return[O.i,O.a];case at.SESSION:return[O.a];default:return[]}}(U,R);if(typeof self<"u"&&!L.includes(O.i)&&L.push(O.i),typeof window<"u")for(const re of[O.b,O.a])L.includes(re)||L.push(re);return L.includes(O.L)||L.push(O.L),L}class St{constructor(){this.providerId="phone",this._delegate=new O.P(Zn(j.Z.auth()))}static credential(R,L){return O.P.credential(R,L)}verifyPhoneNumber(R,L){return this._delegate.verifyPhoneNumber(R,L)}unwrap(){return this._delegate}}St.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,St.PROVIDER_ID=O.P.PROVIDER_ID;const Xt=O.ax;class H{constructor(R,L,re=j.Z.app()){var Me;Xt(null===(Me=re.options)||void 0===Me?void 0:Me.apiKey,"invalid-api-key",{appName:re.name}),this._delegate=new O.R(R,L,re.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function W(U){U.INTERNAL.registerComponent(new ge.wA("auth-compat",R=>{const L=R.getProvider("app-compat").getImmediate(),re=R.getProvider("auth");return new Ee(L,re)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:St,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:H,TwitterAuthProvider:O.W,Auth:Ee,AuthCredential:O.H,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.3.3")}(j.Z)},8766:(pt,Ce,P)=>{P.d(Ce,{Lj:()=>Ae,X3:()=>Pe});var h=P(5861);let O,te;const ge=new WeakMap,le=new WeakMap,fe=new WeakMap,z=new WeakMap,G=new WeakMap;let Te={get(se,ve,We){if(se instanceof IDBTransaction){if("done"===ve)return le.get(se);if("objectStoreNames"===ve)return se.objectStoreNames||fe.get(se);if("store"===ve)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return Se(se[ve])},set:(se,ve,We)=>(se[ve]=We,!0),has:(se,ve)=>se instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in se};function pe(se){return"function"==typeof se?function ot(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ae(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ve){return se.apply(Ie(this),ve),Se(ge.get(this))}:function(...ve){return Se(se.apply(Ie(this),ve))}:function(ve,...We){const Ge=se.call(Ie(this),ve,...We);return fe.set(Ge,ve.sort?ve.sort():[ve]),Se(Ge)}}(se):(se instanceof IDBTransaction&&function $e(se){if(le.has(se))return;const ve=new Promise((We,Ge)=>{const Mt=()=>{se.removeEventListener("complete",Xe),se.removeEventListener("error",oe),se.removeEventListener("abort",oe)},Xe=()=>{We(),Mt()},oe=()=>{Ge(se.error||new DOMException("AbortError","AbortError")),Mt()};se.addEventListener("complete",Xe),se.addEventListener("error",oe),se.addEventListener("abort",oe)});le.set(se,ve)}(se),((se,ve)=>ve.some(We=>se instanceof We))(se,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,Te):se)}function Se(se){if(se instanceof IDBRequest)return function Z(se){const ve=new Promise((We,Ge)=>{const Mt=()=>{se.removeEventListener("success",Xe),se.removeEventListener("error",oe)},Xe=()=>{We(Se(se.result)),Mt()},oe=()=>{Ge(se.error),Mt()};se.addEventListener("success",Xe),se.addEventListener("error",oe)});return ve.then(We=>{We instanceof IDBCursor&&ge.set(We,se)}).catch(()=>{}),G.set(ve,se),ve}(se);if(z.has(se))return z.get(se);const ve=pe(se);return ve!==se&&(z.set(se,ve),G.set(ve,se)),ve}const Ie=se=>G.get(se);function Pe(se,ve,{blocked:We,upgrade:Ge,blocking:Mt,terminated:Xe}={}){const oe=indexedDB.open(se,ve),de=Se(oe);return Ge&&oe.addEventListener("upgradeneeded",we=>{Ge(Se(oe.result),we.oldVersion,we.newVersion,Se(oe.transaction))}),We&&oe.addEventListener("blocked",()=>We()),de.then(we=>{Xe&&we.addEventListener("close",()=>Xe()),Mt&&we.addEventListener("versionchange",()=>Mt())}).catch(()=>{}),de}function Ae(se,{blocked:ve}={}){const We=indexedDB.deleteDatabase(se);return ve&&We.addEventListener("blocked",()=>ve()),Se(We).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],je=new Map;function Y(se,ve){if(!(se instanceof IDBDatabase)||ve in se||"string"!=typeof ve)return;if(je.get(ve))return je.get(ve);const We=ve.replace(/FromIndex$/,""),Ge=ve!==We,Mt=be.includes(We);if(!(We in(Ge?IDBIndex:IDBObjectStore).prototype)||!Mt&&!xe.includes(We))return;const Xe=function(){var oe=(0,h.Z)(function*(de,...we){const Re=this.transaction(de,Mt?"readwrite":"readonly");let Ue=Re.store;return Ge&&(Ue=Ue.index(we.shift())),(yield Promise.all([Ue[We](...we),Mt&&Re.done]))[0]});return function(we){return oe.apply(this,arguments)}}();return je.set(ve,Xe),Xe}!function ze(se){Te=se(Te)}(se=>({...se,get:(ve,We,Ge)=>Y(ve,We)||se.get(ve,We,Ge),has:(ve,We)=>!!Y(ve,We)||se.has(ve,We)}))},5861:(pt,Ce,P)=>{function h(O,te,ie,ae,ge,le,fe){try{var z=O[le](fe),G=z.value}catch(Z){return void ie(Z)}z.done?te(G):Promise.resolve(G).then(ae,ge)}function j(O){return function(){var te=this,ie=arguments;return new Promise(function(ae,ge){var le=O.apply(te,ie);function fe(G){h(le,ae,ge,fe,z,"next",G)}function z(G){h(le,ae,ge,fe,z,"throw",G)}fe(void 0)})}}P.d(Ce,{Z:()=>j})}},pt=>{pt(pt.s=4032)}]);